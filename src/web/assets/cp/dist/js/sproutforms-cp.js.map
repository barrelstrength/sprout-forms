{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/type-func/dist/bundle.js","webpack:///./src/web/assets/cp/src/js/editable-table.js","webpack:///./src/web/assets/cp/src/js/form-settings.js","webpack:///./src/web/assets/cp/src/js/field-layout-editor.js","webpack:///./node_modules/dragula/dragula.js","webpack:///./node_modules/contra/emitter.js","webpack:///./node_modules/atoa/atoa.js","webpack:///./node_modules/contra/debounce.js","webpack:///./node_modules/ticky/ticky-browser.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/crossvent/src/crossvent.js","webpack:///./node_modules/custom-event/index.js","webpack:///./node_modules/crossvent/src/eventmap.js","webpack:///./node_modules/dragula/classes.js","webpack:///./node_modules/dom-autoscroller/dist/bundle.js","webpack:///./node_modules/animation-frame-polyfill/lib/animation-frame-polyfill.cjs.js","webpack:///./node_modules/dom-set/dist/bundle.js","webpack:///./node_modules/array-from/index.js","webpack:///./node_modules/array-from/polyfill.js","webpack:///./node_modules/is-array/index.js","webpack:///./node_modules/iselement/module/index.js","webpack:///./node_modules/dom-plane/dist/bundle.js","webpack:///./node_modules/create-point-cb/dist/bundle.js","webpack:///./node_modules/dom-mousemove-dispatcher/dist/bundle.js","webpack:///./src/web/assets/cp/src/js/field-modal.js","webpack:///./src/web/assets/cp/src/js/integration-modal.js","webpack:///./src/web/assets/cp/src/js/integrations.js","webpack:///./src/web/assets/cp/src/js/rule-modal.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","getDef","f","boolean","func","def","_len","arguments","length","args","Array","_key","apply","integer","_len2","_key2","parseInt","string","_len3","_key3","Craft","SproutForms","EditableTable","Garnish","Base","extend","initialized","id","baseName","columns","fieldRuleOptions","sorter","biggestId","$table","$tbody","$addRowBtn","init","settings","setSettings","defaults","$","children","DataTableSorter","helperClass","copyDraggeeInputValuesToHelper","isVisible","initialize","addListener","$win","height","removeListener","$rows","Row","find","addRow","initializeIfVisible","rowId","rowIdPrefix","rowHtml","getRowHtml","$tr","appendTo","addItems","first","focus","onAddRow","textualColTypes","noop","onDeleteRow","values","formFieldValue","colId","col","textual","inArray","type","options","hasOptgroups","firstRow","option","optgroup","optionLabel","label","optionValue","disabled","colVal","table","niceTexts","$tds","$textareas","$deleteBtn","tr","attr","substr","textareasByColId","that","$textarea","add","push","NiceText","onHeightChange","proxy","initSproutFields","onTextareaHeightChange","autopopulate","val","HandleGenerator","needCheck","data","$formFieldInput","$conditionalInput","change","row","event","conditionSelectHtml","html","addValueInputHtml","last","self","lastElement","postActionRequest","response","textStatus","success","cp","displayError","SproutFields","initFields","onTextareaFocus","ev","currentTarget","setTimeout","setSelectionRange","ignoreNextTextareaFocus","validateKeypress","keyCode","charCode","isCtrlKeyPressed","RETURN_KEY","numericKeyCodes","preventDefault","validateValue","safeValue","match","replace","tallestTextareaHeight","css","tdHeight","parent","deleteRow","removeItems","remove","$andDiv","prev","FormSettings","modal","ruleModal","$lightswitches","initButtons","each","el","integrationId","ruleId","$ruleEnabledLightswitches","IntegrationModal","getInstance","on","integration","resetIntegration","RuleModal","rule","resetConditional","onEnableIntegration","lightswitch","enabled","formId","displayNotice","onEnableRule","$integrationDiv","$container","currentValue","addClass","removeClass","conditional","$conditionalDiv","$behaviorContainer","behavior","createDefaultIntegration","integrationTableBody","currentIntegration","sendRule","append","createDefaultRule","ruleTableBody","currentRule","editRule","currentOption","base","editIntegration","jQuery","dragula","require","autoScroll","SproutFormsFieldLayoutEditor","undefined","sproutforms","$formPage","$formPageManagerBtn","$addFormPageBtn","$saveFormButton","$revisionSpinner","$revisionStatus","selectedTab","$selectedTab","selectedTabId","formPageManagerTabs","fieldModal","FieldModal","initGlobalButtons","resizeContainers","initFieldLayout","initDragula","showFormPageManager","addFormPage","refreshFieldLayout","addEventListener","trigger","$formFields","formField","fieldId","showEditFieldModal","formBuilder","destroy","fieldsLayout","document","getElementById","tabContainers","querySelectorAll","dragAndDropContainers","copy","source","accepts","target","invalid","handle","classList","contains","fadeIn","tab","closest","tabName","tabId","fieldType","createDefaultField","container","margin","maxSpeed","scrollWhenOutside","down","dragging","globalHeader","tabsContainer","contentContainer","body","globalHeaderHeight","$bod","hasClass","outerHeight","headerContainerHeight","tabHeight","bottomPaddingAdjustment","headerFooterHeight","newTabName","newFieldElement","nextDiv","next","nextId","nextDivId","split","defaultName","prepend","join","initFieldOnDrop","field","defaultField","editField","formPageManager","show","$tabs","buildFormPageManagerElements","HUD","$formPageManagerForm","hudClass","onShow","onHide","initFormPageManagerAdminTable","$formPageManagerNoTabs","$formPageManagerTable","formTab","getAttribute","$row","getFormManagerTableRow","renameFormPage","adminTable","AdminTable","tableSelector","noObjectsSelector","sortable","reorderAction","reorderSuccessMessage","reorderFailMessage","deleteAction","confirmDeleteMessage","onReorderItems","ids","currentTabName","text","onDeleteItem","prompt","oldName","newName","initTabs","totalTabs","querySelector","innerText","escapeHtml","$newTabs","replaceWith","tabsHtml","insertBefore","contentHtml","initUiElements","appendHeadHtml","headHtml","appendFootHtml","bodyHtml","updateBody","$targetActiveTab","getCurrentTabByName","$lastTab","trim","$tab","$element","topOfElement","offset","top","bottomOfElement","bottomOfScreen","scrollTop","innerHeight","topOfScreen","emitter","crossvent","classes","doc","documentElement","touchy","op","fn","global","navigator","pointerEnabled","mouseup","mousedown","mousemove","msPointerEnabled","whichMouseButton","touches","which","buttons","button","getOffset","rect","getBoundingClientRect","left","getScroll","scrollProp","offsetProp","clientHeight","getElementBehindPoint","point","x","y","state","className","elementFromPoint","never","always","getRectWidth","width","right","getRectHeight","bottom","getParent","parentNode","isInput","tagName","isEditable","contentEditable","nextEl","nextElementSibling","sibling","nextSibling","nodeType","manually","getCoord","coord","host","targetTouches","changedTouches","getEventHost","missMap","pageX","pageY","initialContainers","_mirror","_source","_item","_offsetX","_offsetY","_moveX","_moveY","_initialSibling","_currentSibling","_copy","_renderTimer","len","isArray","_grabbed","_lastDropTarget","moves","invalidTarget","containers","isContainer","copySortSource","revertOnSpill","removeOnSpill","direction","ignoreInputTextSelection","mirrorContainer","drake","start","manualStart","end","cancel","canMove","spillOver","spillOut","events","indexOf","grab","release","eventualMovements","startBecauseMouseMoved","movements","preventGrabbed","clientX","clientY","metaKey","ctrlKey","item","context","canStart","grabbed","renderMirrorImage","drag","isCopy","cloneNode","emit","drop","ungrab","dropTarget","findDropTarget","removeChild","isInitialPlacement","cleanup","revert","reverts","initial","removeMirrorImage","rm","clearTimeout","elementBehindCursor","accepted","immediate","getImmediateChild","reference","getReference","style","changed","moved","appendChild","horizontal","resolve","inside","outside","after","atoa","debounce","thing","opts","evt","once","_once","off","et","splice","emitterSnapshot","shift","slice","ctx","throws","forEach","listen","async","a","ticky","tick","setImmediate","Timeout","clearFn","_id","_clearFn","scope","setInterval","clearInterval","timeout","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","attachTo","getPrototypeOf","toString","process","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","createElement","script","onreadystatechange","Math","random","attachEvent","callback","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","marker","runClearTimeout","Item","array","title","browser","env","argv","version","versions","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","customEvent","eventmap","addEvent","capturing","removeEvent","removeEventListener","hardCache","unwrap","element","wrapper","originalEvent","srcElement","returnValue","stopPropagation","cancelBubble","wrapperFactory","wrap","listener","detachEvent","fabricate","model","detail","createEvent","initEvent","createEventObject","makeClassicEvent","dispatchEvent","fireEvent","NativeCustomEvent","CustomEvent","foo","useNative","params","initCustomEvent","bubbles","cancelable","Boolean","eventname","ron","test","cache","lookupClass","cached","lastIndex","RegExp","current","ex","typeFunc","animationFramePolyfill","domSet","domPlane","mousemoveDispatcher","AutoScroller","elements","scrolling","pointCB","createPointCB","dispatcher","isNaN","syncMove","forceCleanAnimation","onDown","onUp","onMouseOut","onMove","setScroll","cleanAnimation","addElements","removeElements","windowAnimationFrame","temp","hasWindow","defineProperties","animationFrame","requestAnimationFrame","cancelAnimationFrame","getElementUnderPoint","underPoint","hasElement","getTarget","scrollWindow","scrollTick","scrollx","scrolly","getClientRect","floor","max","ceil","min","dispatch","amount","scrollTo","pageXOffset","pageYOffset","scrollY","scrollLeft","scrollX","pointInside","prefix","limit","lastTime","now","Date","getTime","ttc","timer","_interopDefault","arrayFrom","isElement","_typeof","iterator","obj","constructor","isElement$1","input","ownerDocument","select","selector","indexOfElement","resolveElement","domListOf","arr","map","pushElements","toAdd","noThrow","TypeError","concatElementLists","lists","reduce","list","toRemove","index","selectAll","from","isCallable","maxSafeInteger","toLength","iteratorProp","getMethod","iteratorStep","pow","number","Number","isFinite","abs","toInteger","O","P","result","done","items","T","A","k","C","mapFn","usingIterator","nextValue","arrayLike","kValue","str","createPointCb","props","innerWidth","createWindowRect","allowUpdate","originalTarget","screenX","screenY","eventDoc","clientLeft","clientTop","Temp","objectCreate","propertiesObject","__proto__","objectCreate$1","mouseEventProps","createMoveInit","defaultSettings","initMove","setSpecial","console","log","dispatched","shiftKey","altKey","relatedTarget","region","MouseEvent","initMouseEvent","MutationObserver","WebKitMutationObserver","observe","disconnect","Modal","$body","$content","$main","$footer","$leftButtons","$rightButtons","$saveBtn","$cancelBtn","$saveSpinner","$deleteSpinner","$loadSpinner","addedDelete","$html","$js","$css","$currentHtml","$currentJs","$currentCss","$observed","observer","templateLoaded","executedJs","loadedCss","resizable","mutations","addedNodes","setContainer","postData","initTemplate","template","initListeners","visible","initSettings","parseTemplate","$head","$doc","js","filter","$cssFiles","prop","$cssInline","$this","src","$jsFiles","$jsInline","jsFiles","when","runExternalScripts","then","files","filesCount","getScript","status","destroySettings","enable","destroyListeners","disable","clone","childList","subtree","keys","closeModal","hide","saveField","serialize","inputId","statusSuccess","shake","error","deleteField","confirmDeleteField","confirm","_disabled","$shade","_instance","saveIntegration","deleteIntegration","confirmDeleteIntegration","SproutFormsIntegration","integrationType","disableOptions","updateAllFieldSelects","updateTargetFieldsOnChange","elementId","rows","sourceFormFields","td","empty","mappingTableRows","$currentRows","getCurrentRows","targetIntegrationFields","$select","fields","appendFieldsToSelect","dropdown","closeOptgroup","selectedCode","lastItem","saveRule","deleteRule","confirmDeleteRule"],"mappings":";aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,IAIjBlC,EAAoBA,EAAoBmC,EAAI,G,gBClFrD,IAAIC,EAGJA,EAAI,WACH,OAAOC,KADJ,GAIJ,IAECD,EAAIA,GAAK,IAAIE,SAAS,cAAb,GACR,MAAOC,GAEc,iBAAXC,SAAqBJ,EAAII,QAOrCrC,EAAOD,QAAUkC,G,6BCfjB,SAASK,EAAOC,EAAGhC,GACf,YAAiB,IAANgC,OACa,IAANhC,EAAoBgC,EAAIhC,EAGnCgC,EAPX5B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IA2EtDnB,EAAQyC,QAlER,SAAiBC,EAAMC,GAInB,MAAoB,mBAFpBD,EAAOH,EAAOG,EAAMC,IAGT,WACH,IAAK,IAAIC,EAAOC,UAAUC,OAAQC,EAAOC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IACzEF,EAAKE,GAAQJ,UAAUI,GAG3B,QAASP,EAAKQ,MAAMf,KAAMY,IAIzBL,EAAO,WACZ,OAAO,GACP,WACA,OAAO,IAkDf1C,EAAQmD,QA9CR,SAAiBT,EAAMC,GAInB,MAAoB,mBAFpBD,EAAOH,EAAOG,EAAMC,IAGT,WACH,IAAK,IAAIS,EAAQP,UAAUC,OAAQC,EAAOC,MAAMI,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAC9EN,EAAKM,GAASR,UAAUQ,GAG5B,IAAI1B,EAAI2B,SAASZ,EAAKQ,MAAMf,KAAMY,GAAO,IACzC,OAAOpB,GAAKA,EAAI,EAAIA,IAI5Be,EAAOY,SAASZ,EAAM,MAEPA,EAAO,WAClB,OAAO,GACP,WACA,OAAOA,IA2Bf1C,EAAQuD,OAvBR,SAAgBb,EAAMC,GAIlB,MAAoB,mBAFpBD,EAAOH,EAAOG,EAAMC,IAGT,WACH,IAAK,IAAIa,EAAQX,UAAUC,OAAQC,EAAOC,MAAMQ,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAC9EV,EAAKU,GAASZ,UAAUY,GAG5B,MAAO,GAAKf,EAAKQ,MAAMf,KAAMY,KAIrCL,EAAO,GAAKA,EAEL,WACH,OAAOA,M,yUC/DX,gBAAOgB,MAAMC,eACfD,MAAMC,YAAc,IAMtBD,MAAMC,YAAYC,cAAgBC,QAAQC,KAAKC,OAC7C,CACEC,aAAa,EAEbC,GAAI,KACJC,SAAU,KACVC,QAAS,KACTC,iBAAkB,KAClBC,OAAQ,KACRC,WAAY,EAEZC,OAAQ,KACRC,OAAQ,KACRC,WAAY,KAEZC,KAAM,SAAST,EAAIC,EAAUC,EAASQ,EAAUP,GAC9CjC,KAAK8B,GAAKA,EACV9B,KAAK+B,SAAWA,EAChB/B,KAAKgC,QAAUA,EACfhC,KAAKiC,iBAAmBA,EACxBjC,KAAKyC,YAAYD,EAAUjB,MAAMC,YAAYC,cAAciB,UAE3D1C,KAAKoC,OAASO,EAAE,IAAMb,GACtB9B,KAAKqC,OAASrC,KAAKoC,OAAOQ,SAAS,SAEnC5C,KAAKkC,OAAS,IAAIX,MAAMsB,gBAAgB7C,KAAKoC,OAAQ,CACnDU,YAAa,0BACbC,gCAAgC,IAG9B/C,KAAKgD,YACPhD,KAAKiD,WAAWjD,KAAKiC,kBAErBjC,KAAKkD,YAAYxB,QAAQyB,KAAM,SAAU,wBAI7CH,UAAW,WACT,OAAQhD,KAAKoC,OAAOgB,SAAW,GAGjCH,WAAY,SAAShB,GACnB,IAAIjC,KAAK6B,YAAT,CAIA7B,KAAK6B,aAAc,EACnB7B,KAAKqD,eAAe3B,QAAQyB,KAAM,UAIlC,IAFA,IAAMG,EAAQtD,KAAKqC,OAAOO,WAEjB7E,EAAI,EAAGA,EAAIuF,EAAM3C,OAAQ5C,IAChC,IAAIwD,MAAMC,YAAYC,cAAc8B,IAAIvD,KAAMsD,EAAMvF,GAAIkE,GAG1DjC,KAAKsC,WAAatC,KAAKoC,OAAOoB,KAAK,YAAYZ,SAAS,QACxD5C,KAAKkD,YAAYlD,KAAKsC,WAAY,WAAY,UAEzB,IAAjBgB,EAAM3C,QACRX,KAAKyD,WAITC,oBAAqB,WACf1D,KAAKgD,aACPhD,KAAKiD,cAITQ,OAAQ,WACN,IAAME,EAAQ3D,KAAKwC,SAASoB,aAAe5D,KAAKmC,UAAY,GAC1D0B,EAAUtC,MAAMC,YAAYC,cAAcqC,WAAWH,EAAO3D,KAAKgC,QAAShC,KAAK+B,SAAU,GAAI/B,KAAKiC,kBAClG8B,EAAMpB,EAAEkB,GAASG,SAAShE,KAAKqC,QAEjC,IAAId,MAAMC,YAAYC,cAAc8B,IAAIvD,KAAM+D,EAAK/D,KAAKiC,kBAErC8B,EAAIP,KAAK,uBAE5BxD,KAAKkC,OAAO+B,SAASF,GAGrBA,EAAIP,KAAK,yBAAyBU,QAAQC,QAE1CnE,KAAKwC,SAAS4B,SAASL,GACvB/D,KAAKsC,WAAayB,EAAIP,KAAK,aAC3BxD,KAAKkD,YAAYlD,KAAKsC,WAAY,WAAY,YAGlD,CACE+B,gBAAiB,CAAC,aAAc,YAAa,UAC7C3B,SAAU,CACRkB,YAAa,GACbQ,SAAUzB,EAAE2B,KACZC,YAAa5B,EAAE2B,MAGjBR,WAAY,SAASH,EAAO3B,EAASD,EAAUyC,EAAQvC,GACrD,IAAI4B,EAAU,gBAAkBF,EAAQ,KAEpCc,EAAiB,GAGrB,IAAK,IAAIC,KAAS1C,EAAS,CACzB,IAAM2C,EAAM3C,EAAQ0C,GAClBpG,EAAOyD,EAAW,cAAgB4B,EAAQ,KAAOe,EAAQ,IACzD1F,OAAkC,IAAlBwF,EAAOE,GAAyBF,EAAOE,GAAS,GAChEE,EAAUrD,MAAMsD,QAAQF,EAAIG,KAAMvD,MAAMC,YAAYC,cAAc4C,iBAUpE,OATc,MAAVK,IACcpG,EAChBmG,EAA2B,KAAVzF,EAAeA,EAAQ2F,EAAII,QAAQ,GAAG/F,OAGzD6E,GAAW,eAAiBe,EAAU,UAAY,IAAM,UAA+B,IAAjBD,EAAG,MAA4BA,EAAG,MAAY,IAAM,UAC/F,IAAjBA,EAAG,MAA4B,WAAaA,EAAG,MAAY,IAAM,IACzE,IAEMA,EAAIG,MACV,IAAK,SACHjB,GAAW,qCAAuCvF,EAAO,KAEzD,IAAI0G,GAAe,EAEfC,EAAW,WAEf,IAAK,IAAI3F,KAAOqF,EAAII,QAAS,CAC3B,IAAIG,EAASP,EAAII,QAAQzF,GAEzB,QAA+B,IAApB4F,EAAOC,SACZH,EACFnB,GAAW,cAEXmB,GAAe,EAGjBnB,GAAW,oBAAsBqB,EAAOC,SAAW,SAC9C,CACL,IAAIC,OAAuC,IAAjBF,EAAOG,MAAwBH,EAAOG,MAAQH,EACtEI,OAAuC,IAAjBJ,EAAOlG,MAAwBkG,EAAOlG,MAAQM,EAGtEuE,GAAW,WAAaoB,EAAW,WAAaK,EAAc,KAAOA,IAAgBtG,EAAQ,YAAc,UAF5D,IAApBkG,EAAOK,UAA2BL,EAAOK,SAE+D,YAAc,IAAM,IAAMH,EAAc,YAG7KH,EAAW,GAGTD,IACFnB,GAAW,eAGbA,GAAW,kBAEX,MAGF,IAAK,kBACkBvF,EACrB,IAAMkH,OAAmC,IAAnBb,EAAII,QAAQ,GAAqBJ,EAAII,QAAQ,GAAG/F,MAAQ,GAC9C,KAAVA,EAAeA,EAAQwG,EAE7C3B,GAAW,kEAAoEvF,EAAO,KACtFqG,EAAII,QAAU9C,EAAiBwC,GAAjB,oBACd,IAAIO,GAAe,EAEfC,EAAW,WAEf,IAAK,IAAI3F,KAAOqF,EAAII,QAAS,CAC3B,IAAIG,EAASP,EAAII,QAAQzF,GAEzB,QAA+B,IAApB4F,EAAOC,SACZH,EACFnB,GAAW,cAEXmB,GAAe,EAGjBnB,GAAW,oBAAsBqB,EAAOC,SAAW,SAC9C,CACL,IAAIC,OAAuC,IAAjBF,EAAOG,MAAwBH,EAAOG,MAAQH,EACtEI,OAAuC,IAAjBJ,EAAOlG,MAAwBkG,EAAOlG,MAAQM,EAGtEuE,GAAW,WAAaoB,EAAW,WAAaK,EAAc,KAAOA,IAAgBtG,EAAQ,YAAc,UAF5D,IAApBkG,EAAOK,UAA2BL,EAAOK,SAE+D,YAAc,IAAM,IAAMH,EAAc,YAG7KH,EAAW,GAGTD,IACFnB,GAAW,eAGbA,GAAW,kBAEX,MAGF,IAAK,WACHA,GAAW,8BAAgCvF,EAAO,kCACdA,EAAO,eAAiBU,EAAQ,WAAa,IAAM,IAEvF,MAGF,QACE6E,GAAW,mDAAqDvF,EAAO,YAAcU,EAAQ,KAKjG6E,GAAW,QAOb,OAJAA,GAAW,sLACkDtC,MAAMtC,EAAE,aAAc,UAAY,sBAWrGsC,MAAMC,YAAYC,cAAc8B,IAAM7B,QAAQC,KAAKC,OACjD,CACE6D,MAAO,KACP3D,GAAI,KACJ4D,UAAW,KAEX3B,IAAK,KACL4B,KAAM,KACNC,WAAY,KACZC,WAAY,KACZ5D,iBAAkB,KAElBM,KAAM,SAASkD,EAAOK,EAAI7D,GACxBjC,KAAKyF,MAAQA,EACbzF,KAAK+D,IAAMpB,EAAEmD,GACb9F,KAAK2F,KAAO3F,KAAK+D,IAAInB,WACrB5C,KAAKiC,iBAAmBA,EAGxB,IAAMH,EAAKX,SAASnB,KAAK+D,IAAIgC,KAAK,WAAWC,OAAOhG,KAAKyF,MAAMjD,SAASoB,YAAYjD,SAEhFmB,EAAK9B,KAAKyF,MAAMtD,YAClBnC,KAAKyF,MAAMtD,UAAYL,GAGzB9B,KAAK4F,WAAajD,IAClB3C,KAAK0F,UAAY,GACjB,IAAMO,EAAmB,GACnBC,EAAOlG,KAETjC,EAAI,EAER,IAAK,IAAI2G,KAAS1E,KAAKyF,MAAMzD,QAAS,CACpC,IAAI2C,EAAM3E,KAAKyF,MAAMzD,QAAQ0C,GAE7B,GAAInD,MAAMsD,QAAQF,EAAIG,KAAMvD,MAAMC,YAAYC,cAAc4C,iBAAkB,CAC5E,IAAM8B,EAAYxD,EAAE,WAAY3C,KAAK2F,KAAK5H,IAC1CiC,KAAK4F,WAAa5F,KAAK4F,WAAWQ,IAAID,GAEtCnG,KAAKkD,YAAYiD,EAAW,QAAS,mBACrCnG,KAAKkD,YAAYiD,EAAW,YAAa,2BAEzCnG,KAAK0F,UAAUW,KAAK,IAAI3E,QAAQ4E,SAASH,EAAW,CAClDI,eAAgB5D,EAAE6D,MAAMxG,KAAM,6BAGf,eAAb2E,EAAIG,MAAsC,WAAbH,EAAIG,OACnC9E,KAAKkD,YAAYiD,EAAW,WAAY,CAACrB,KAAMH,EAAIG,MAAO,oBAC1D9E,KAAKkD,YAAYiD,EAAW,aAAc,CAACrB,KAAMH,EAAIG,MAAO,kBAG9DmB,EAAiBvB,GAASyB,EAG5BpI,IASF,IAAK,IAAI2G,KANT1E,KAAKyG,mBAGLzG,KAAK0G,yBAGa1G,KAAKyF,MAAMzD,QAAS,CACpC,IAAI2C,EAAM3E,KAAKyF,MAAMzD,QAAQ0C,GAEzBC,EAAIgC,mBAA8D,IAAvCV,EAAiBtB,EAAIgC,gBAAkCV,EAAiBvB,GAAOkC,OAC5G,IAAIrF,MAAMsF,gBAAgBZ,EAAiBvB,GAAQuB,EAAiBtB,EAAIgC,eAK5E,IAAMG,EAAY9G,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,UAAUuD,KAAK,oBAC1DC,EAAkBhH,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,UACjDyD,EAAoBjH,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,UAEzDwD,EAAgBE,OAAO,CAACC,IAAKnH,OAAO,SAASoH,GAC3C,IAAIC,EAAsB,GAC1BA,GAAuB,kEAAoE/I,KAAO,KAClG,IAAMqG,EAAM,GACZA,EAAG,QAAcuB,EAAKjE,iBAAiB+E,EAAgBJ,OAAtC,oBACjB,IAAM5H,EAAQiI,EAAkBL,MAC5B5B,GAAe,EAEfC,EAAW,WAEf,IAAK,IAAI3F,KAAOqF,EAAII,QAAS,CAC3B,IAAMG,EAASP,EAAII,QAAQzF,GAE3B,QAA+B,IAApB4F,EAAOC,SACZH,EACFqC,GAAuB,cAEvBrC,GAAe,EAGjBqC,GAAuB,oBAAsBnC,EAAOC,SAAW,SAC1D,CACL,IAAMC,OAAuC,IAAjBF,EAAOG,MAAwBH,EAAOG,MAAQH,EACxEI,OAAuC,IAAjBJ,EAAOlG,MAAwBkG,EAAOlG,MAAQM,EAGtE+H,GAAuB,WAAapC,EAAW,WAAaK,EAAc,KAAOA,IAAgBtG,EAAQ,YAAc,UAFxE,IAApBkG,EAAOK,UAA2BL,EAAOK,SAE2E,YAAc,IAAM,IAAMH,EAAc,YAGzLH,EAAW,GAGTD,IACFqC,GAAuB,eAGzBA,GAAuB,kBACvBJ,EAAkBK,KAAKD,GACvBnB,EAAKqB,kBAAkBrB,MAGzBe,EAAkBC,OAAO,CAACC,IAAKnH,OAAO,SAASoH,GAC7ClB,EAAKqB,kBAAkBrB,OAGP,IAAdY,GACF9G,KAAKuH,oBAGP,IAAM1B,EAAa7F,KAAK+D,IAAInB,WAAW4E,OAAOhE,KAAK,WACnDxD,KAAKkD,YAAY2C,EAAY,QAAS,cAGxC0B,kBAhIF,WAgIiC,IAAbE,EAAa,uDAAN,KACjBvB,EAAgB,MAARuB,EAAgBzH,KAAOyH,EAE/BC,EAAiE,IAAnD1H,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,SAAS7C,OAAeX,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,UAAYxD,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,SAC/IuD,EAAO,CACX,gBAAmB/G,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,UAAUoD,MAC5D,UAAa5G,KAAK+D,IAAIP,KAAK,YAAYA,KAAK,UAAUoD,MACtD,UAAac,EAAY3B,KAAK,QAC9B,WAAc2B,EAAYd,MAC1B,OAAUjE,EAAE,WAAWiE,OAGzBrF,MAAMoG,kBAAkB,oDAAqDZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACtE,YAAfA,GACFD,EAASE,QAC5B5B,EAAKnC,IAAIP,KAAK,YAAY8D,KAAKM,EAASN,MAExC/F,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,mCAE/Ce,QAGLyG,iBAAkB,WAChBlF,MAAM0G,aAAaC,WAAWlI,KAAK+D,MAGrCoE,gBAAiB,SAASC,GACxBpI,KAAK0G,yBAEL,IAAMP,EAAYxD,EAAEyF,EAAGC,eAEnBlC,EAAUY,KAAK,mBACjBZ,EAAUY,KAAK,mBAAmB,GAIpCuB,YAAW,WACT,IAAM1B,EAAMT,EAAUS,MAGtB,QAA8C,IAAnCT,EAAU,GAAGoC,kBAAmC,CAEzD,IAAM5H,EAAsB,EAAbiG,EAAIjG,OACnBwF,EAAU,GAAGoC,kBAAkB,EAAG5H,QAGlCwF,EAAUS,IAAIA,KAEf,IAGL4B,wBAAyB,SAASJ,GAChCzF,EAAEoE,KAAKqB,EAAGC,cAAe,mBAAmB,IAG9CI,iBAAkB,SAASL,GACzB,IAAMM,EAAUN,EAAGM,QAAUN,EAAGM,QAAUN,EAAGO,SAExCjH,QAAQkH,iBAAiBR,IAC3BM,IAAYhH,QAAQmH,aACH,WAAjBT,EAAGrB,KAAKjC,MAAsBvD,MAAMsD,QAAQ6D,EAASnH,MAAMC,YAAYC,cAAc8B,IAAIuF,mBAE1FV,EAAGW,kBAIPC,cAAe,SAASZ,GACtB,IAAIa,EAEJ,GAAqB,WAAjBb,EAAGrB,KAAKjC,KAAmB,CAE7B,IAAMoE,EAAQd,EAAGC,cAAcrJ,MAAMkK,MAAM,kBAGzCD,EADY,OAAVC,EACUA,EAAM,GAEN,QAIdD,EAAYb,EAAGC,cAAcrJ,MAAMmK,QAAQ,UAAW,IAGpDF,IAAcb,EAAGC,cAAcrJ,QACjCoJ,EAAGC,cAAcrJ,MAAQiK,IAI7BvC,uBAAwB,WAItB,IAFA,IAAI0C,GAAyB,EAEpBrL,EAAI,EAAGA,EAAIiC,KAAK0F,UAAU/E,OAAQ5C,IACrCiC,KAAK0F,UAAU3H,GAAGqF,OAASgG,IAC7BA,EAAwBpJ,KAAK0F,UAAU3H,GAAGqF,QAI9CpD,KAAK4F,WAAWyD,IAAI,aAAcD,GAGlC,IAAME,EAAWtJ,KAAK4F,WAAW1B,QAAQqF,SAASnG,SAE9CkG,EAAWF,GACbpJ,KAAK4F,WAAWyD,IAAI,aAAcC,IAItCE,UAAW,WAGT,GAFAxJ,KAAKyF,MAAMvD,OAAOuH,YAAYzJ,KAAK+D,KACnC/D,KAAK+D,IAAI2F,SACmC,IAAxC1J,KAAKyF,MAAMrD,OAAOoB,KAAK,MAAM7C,OAAc,CAC7C,IAAIgJ,EAAU3J,KAAKyF,MAAMrD,OAAOwH,KAAK,oBACd,IAAnBD,EAAQhJ,QACVgJ,EAAQD,SAEV1J,KAAKyF,MAAMrD,OAAOsH,SAIpB1J,KAAKyF,MAAMjD,SAAS+B,YAAYvE,KAAK+D,OAGzC,CACE+E,gBAAiB,CAAC,EAAe,EAAkB,GAAI,GAAI,GAAI,GAAmB,GAAI,GAAkB,GAAI,IAAkB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,O,qPCtelK,gBAAOvH,MAAMC,eACfD,MAAMC,YAAc,IAGtB,SAAUmB,GACRpB,MAAMC,YAAYqI,aAAenI,QAAQC,KAAKC,OAAO,CAEnDmD,QAAS,KACT+E,MAAO,KACPC,UAAW,KACXC,eAAgB,KAKhBzH,KAAM,WAEJvC,KAAKiK,eAMPA,YAAa,WACX,IAAM/D,EAAOlG,KAGb2C,EAAE,mCAAmCuH,MAAK,SAASnM,EAAGoM,GACpD,IAAMC,EAAgBzH,EAAEwH,GAAIpD,KAAK,iBAE7BqD,GACFlE,EAAKhD,YAAYP,EAAE,2BAA6ByH,GAAgB,WAAY,sBAKhFzH,EAAE,6BAA6BuH,MAAK,SAASnM,EAAGoM,GAC9C,IAAME,EAAS1H,EAAEwH,GAAIpD,KAAK,UAEtBsD,GACFnE,EAAKhD,YAAYP,EAAE,qBAAuB0H,GAAS,WAAY,eAInErK,KAAKgK,eAAiBrH,EAAE,6CAExB3C,KAAKkD,YAAYlD,KAAKgK,eAAgB,QAAS,uBAE/ChK,KAAKsK,0BAA4B3H,EAAE,uCAEnC3C,KAAKkD,YAAYlD,KAAKsK,0BAA2B,QAAS,gBAE1DtK,KAAK8J,MAAQvI,MAAMC,YAAY+I,iBAAiBC,cAEhDxK,KAAK8J,MAAMW,GAAG,kBAAmB9H,EAAE6D,OAAM,SAAStG,GAChD,IAAMwK,EAAcxK,EAAEwK,YAEtB1K,KAAK2K,iBAAiBD,KACrB1K,OAEHA,KAAK+J,UAAYxI,MAAMC,YAAYoJ,UAAUJ,cAE7CxK,KAAK+J,UAAUU,GAAG,WAAY9H,EAAE6D,OAAM,SAAStG,GAC7C,IAAM2K,EAAO3K,EAAE2K,KAEf7K,KAAK8K,iBAAiBD,KACrB7K,OAEHA,KAAKkD,YAAYP,EAAE,wBAAyB,SAAU,4BACtD3C,KAAKkD,YAAYP,EAAE,gBAAiB,SAAU,sBAGhDoI,oBAAqB,SAAS3C,GAC5B,IAAM4C,EAAc5C,EAAGC,cACjB+B,EAAgBY,EAAYlJ,GAC9BmJ,EAAUtI,EAAEqI,GAAajF,KAAK,gBAI5BgB,EAAO,CAACqD,cAAeA,EAAea,QAH5CA,EAAsB,SAAZA,EAAqB,EAAI,EAG2BC,OAF/CvI,EAAE,WAAWiE,OAI5BrF,MAAMoG,kBAAkB,+CAAgDZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACpF,YAAfA,GAA4BD,EAASE,QACvCvG,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,yBAE/CsC,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,mCAE/Ce,QAILoL,aAAc,SAAShD,GACrB,IAAM4C,EAAc5C,EAAGC,cACjBgC,EAASW,EAAYlJ,GACvBmJ,EAAUtI,EAAEqI,GAAajF,KAAK,gBAI5BgB,EAAO,CAACsD,OAAQA,EAAQY,QAH9BA,EAAsB,SAAZA,EAAqB,EAAI,EAGaC,OAFjCvI,EAAE,WAAWiE,OAI5BrF,MAAMoG,kBAAkB,iCAAkCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACtE,YAAfA,GAA4BD,EAASE,QACvCvG,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,yBAE/CsC,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,mCAE/Ce,QAUL2K,iBAAkB,SAASD,GACzB,IAAMW,EAAkB1I,EAAE,2BAA6B+H,EAAY5I,IAE7DwJ,EAAa3I,EAAE,wBAA0B+H,EAAY5I,IAErDyJ,EAAuC,MAAxBb,EAAYO,QAE7BM,KADsD,SAApCD,EAAWvF,KAAK,mBAEpCuF,EAAWvF,KAAK,eAAgB,GAAKwF,GACjCA,EACFD,EAAWE,SAAS,MAEpBF,EAAWG,YAAY,OAG3BJ,EAAgB/D,KAAKoD,EAAYpM,OASnCwM,iBAAkB,SAASY,GACzB,IAAMC,EAAkBhJ,EAAE,qBAAuB+I,EAAY5J,IAEvDwJ,EAAa3I,EAAE,sBAAwB+I,EAAY5J,IACnD8J,EAAqBjJ,EAAE,8BAAgC+I,EAAY5J,IACnEyJ,EAAuC,MAAxBG,EAAYT,QAE7BM,KADsD,SAApCD,EAAWvF,KAAK,mBAEpCuF,EAAWvF,KAAK,eAAgB,GAAKwF,GACjCA,EACFD,EAAWE,SAAS,MAEpBF,EAAWG,YAAY,OAG3BG,EAAmBtE,KAAKoE,EAAYG,UACpCF,EAAgBrE,KAAKoE,EAAYpN,OAGnCwN,yBAA0B,SAAShH,GAEjC,IAAMoB,EAAOlG,KACP+L,EAAuBpJ,EAAE,yCACzBqJ,EAAqBrJ,EAAE,wBAAwBiE,MAC/CsE,EAASvI,EAAE,WAAWiE,MAE5B,GAA2B,KAAvBoF,EAAJ,CAIA,IAAMjF,EAAO,CACXjC,KAAMkH,EACNd,OAAQA,EACRe,SAAU,KAGZ1K,MAAMoG,kBAAkB,6CAA8CZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACrG,GAAmB,YAAfA,EAA0B,CAC5B,IAAM6C,EAAc9C,EAAS8C,YAE7BqB,EAAqBG,OAAO,kFAAoFxB,EAAY5I,GAAK,iEAElF4I,EAAY5I,GAAK,yBAA2B4I,EAAY5I,GAAK,KAAO4I,EAAYpM,KAAO,yIAGNoM,EAAY5I,GAAK,wLAWjJoE,EAAKhD,YAAYP,EAAE,2BAA6B+H,EAAY5I,IAAK,WAAY,mBAE7Ea,EAAE,wBAAwBiE,IAAI,IAC9B,IAAM0E,EAAa3I,EAAE,wBAA0B+H,EAAY5I,IAC3DwJ,EAAWN,cACX9E,EAAKhD,YAAYoI,EAAY,QAAS,0BAIvCtL,SAILmM,kBAAmB,SAASrH,GAC1B,IAAMoB,EAAOlG,KACPoM,EAAgBzJ,EAAE,kCAClB0J,EAAc1J,EAAE,gBAAgBiE,MAChCsE,EAASvI,EAAE,WAAWiE,MAE5B,GAAoB,KAAhByF,EAAJ,CAIA,IAAMtF,EAAO,CACXjC,KAAMuH,EACNnB,OAAQA,GAGV3J,MAAMoG,kBAAkB,+BAAgCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACvF,GAAmB,YAAfA,EAA0B,CAC5B,IAAMgD,EAAOjD,EAASiD,KACtBuB,EAAcF,OAAO,kCAAoCrB,EAAK/I,GAAK,+EAE1B+I,EAAK/I,GAAK,mBAAqB+I,EAAK/I,GAAK,KAAO+I,EAAKvM,KAAO,oDAG1DuM,EAAK/I,GAAK,KAAO+I,EAAKgB,SAAW,yIAGkDhB,EAAK/I,GAAK,wLAWxIoE,EAAKhD,YAAYP,EAAE,qBAAuBkI,EAAK/I,IAAK,WAAY,YAEhEa,EAAE,gBAAgBiE,IAAI,IACtB,IAAM0E,EAAa3I,EAAE,sBAAwBkI,EAAK/I,IAClDwJ,EAAWN,cACX9E,EAAKhD,YAAYoI,EAAY,QAAS,mBAIvCtL,SAILsM,SAAU,SAASC,GAEjB,IAAMrH,EAASqH,EAAclE,cACvBgC,EAAS1H,EAAEuC,GAAQ6B,KAAK,UAG9B/G,KAAKwM,KAAK7J,EAAEuC,IAEZlF,KAAK+J,UAAUuC,SAASjC,IAG1BoC,gBAAiB,SAASF,GACxB,IAAMrH,EAASqH,EAAclE,cAEvB+B,EAAgBzH,EAAEuC,GAAQ6B,KAAK,iBAGrC/G,KAAKwM,KAAK7J,EAAEuC,IAEZlF,KAAK8J,MAAM2C,gBAAgBrC,MAlRjC,CAuRGsC,S,gvBC1RH,IAAIC,EAAUC,EAAQ,GAClBC,EAAaD,EAAQ,KAEzB,SAAUjK,GAAG,IAKLmK,EALK,WAOT,WAAY5B,I,4FAAQ,cAES6B,IAAvB5M,OAAO6M,cACT7M,OAAO6M,YAAc,IAGvBhN,KAAKkL,OAASA,EACdlL,KAAKiN,UAAYtK,EAAE,qBACnB3C,KAAKkN,oBAAsBvK,EAAE,uBAC7B3C,KAAKmN,gBAAkBxK,EAAE,mBACzB3C,KAAKoN,gBAAkBzK,EAAE,qBAEzB3C,KAAKqN,iBAAmB1K,EAAE,qBAC1B3C,KAAKsN,gBAAkB3K,EAAE,oBAEzB3C,KAAKuN,YAAchM,MAAMwG,GAAGyF,aAC5BxN,KAAKyN,cAAgBzN,KAAKuN,YAAcvN,KAAKuN,YAAYhE,SAASxC,KAAK,MAAQ,KAE/E/G,KAAK0N,oBAAsB,GAC3B1N,KAAK2N,WAAapM,MAAMC,YAAYoM,WAAWpD,cAG/CxK,KAAK6N,oBACL7N,KAAK8N,mBAGL9N,KAAK+N,kBACL/N,KAAKgO,c,UAlCE,O,EAAA,G,EAAA,2CAsCP,IAAMvG,EAAOzH,KAEbA,KAAKkN,oBAAoBzC,GAAG,SAAS,WACnChD,EAAKwG,yBAGPjO,KAAKmN,gBAAgB1C,GAAG,SAAS,WAC/BhD,EAAKyG,iBAGPlO,KAAKiN,UAAUxC,GAAG,sBAAsB,WACtChD,EAAK0G,wBAGPzM,QAAQyB,KAAKsH,GAAG,UAAU,WACxBhD,EAAKqG,sBAGP3N,OAAOiO,iBAAiB,UAAU,WAChC3G,EAAKqG,sBAGP9N,KAAK2N,WAAWlD,GAAG,aAAa,SAASrD,GACvCzE,EAAE,qBAAqB0L,QAAQ,2BA7D1B,wCAkEP,IAAI5G,EAAOzH,KAEPsO,EAAc3L,EAAE,8BAHJ,uBAIhB,YAAsB2L,EAAtB,+CAAmC,KAA1BC,EAA0B,QAC7BC,EAAU7L,EAAE4L,GAAWxH,KAAK,WAC5ByH,GACW7L,EAAE,qBAAuB6L,GAC/B/D,GAAG,YAAY,SAASrD,GAC7BK,EAAKgH,mBAAmBrH,OATd,qFAjET,oCAiFP,IAAMK,EAAOzH,UAE0B+M,IAAnC5M,OAAO6M,YAAY0B,aACrBvO,OAAO6M,YAAY0B,YAAYC,UAGjC3O,KAAK4O,aAAeC,SAASC,eAAe,cAC5C9O,KAAK+O,cAAgBF,SAASG,iBAAiB,yBAG/C,IAAIC,EAA4B,CAACjP,KAAK4O,cAAb,SAA+B5O,KAAK+O,gBAE7D5O,OAAO6M,YAAY0B,YAAc/B,EAAQsC,EAAuB,CAC9DC,KAAM,SAAS/E,EAAIgF,GACjB,OAAOA,IAAW1H,EAAKmH,cAEzBQ,QAAS,SAASjF,EAAIkF,GACpB,OAAOA,IAAW5H,EAAKmH,cAEzBU,QAAS,SAASnF,EAAIoF,GAEpB,OAAOpF,EAAGqF,UAAUC,SAAS,gBAE9BhF,GAAG,QAAQ,SAASN,GAErBxH,EAAEwH,GAAIqB,SAAS,kBAEdf,GAAG,QAAQ,SAASN,EAAIkF,EAAQF,GAgBjC,GAdAxM,EAAEwH,GAAIsB,YAAY,eAClB9I,EAAE0M,GAAQ7L,KAAK,gBAAgBiI,YAAY,eAC3C9I,EAAEwM,GAAQ3L,KAAK,gBAAgBiI,YAAY,eAE3ChE,EAAK6F,gBAAgB9B,SAAS,aAC9B/D,EAAK4F,iBAAiB5B,YAAY,UAG9B9I,EAAE0M,GAAQtJ,KAAK,QAAUpD,EAAEwM,GAAQpJ,KAAK,OAG1C0B,EAAK6F,gBAAgB9B,SAAS,0BAA0BkE,OAAO,QAG7DL,GAAUF,IAAW1H,EAAKmH,aAAc,CAE1C,IAAMe,EAAMhN,EAAEwH,GAAIyF,QAAQ,2BACpBC,EAAUF,EAAI5I,KAAK,WACnB+I,EAAQH,EAAI5I,KAAK,SACjBgJ,EAAYpN,EAAEwH,GAAIpD,KAAK,QAE7BU,EAAKuI,mBAAmBD,EAAWD,EAAOD,EAAS1F,GAMrD7B,YAAW,WACTb,EAAK4F,iBAAiB7B,SAAS,UAC/B/D,EAAK6F,gBAAgB7B,YAAY,eAChC,QAEFhB,GAAG,QAAQ,SAASN,EAAI8F,GAEzBtN,EAAEwH,GAAIqB,SAAS,eACf7I,EAAEsN,GAAWzE,SAAS,uBAErBf,GAAG,OAAO,SAASN,EAAI8F,GAExBtN,EAAEwH,GAAIsB,YAAY,eAClB9I,EAAEsN,GAAWxE,YAAY,uBAM3BoB,EAAW,EAAIgC,SAASG,iBAAiB,4BAA6B,CAClEkB,OAAQ,GACRC,SAAU,GACVC,mBAAmB,EACnBvD,WAAY,WAEV,OAAO7M,KAAKqQ,MAAQlQ,OAAO6M,YAAY0B,YAAY4B,cAlKlD,yCAyKP,IAAIC,EAAe5N,EAAE,kBACjB6N,EAAgB7N,EAAE,SAClB8N,EAAmB9N,EAAE,sBAErB+N,EAAO/N,EAAE,QACTgO,EAAqB,EAErBjP,QAAQkP,KAAKC,SAAS,gBACxBH,EAAKlF,SAAS,2CAEdmF,EAAqBJ,EAAaO,aAAY,GAC9CJ,EAAKjF,YAAY,2CAGnB,IAAIsF,EAAwBpO,EAAE,qBAAqBmO,aAAY,GAC3DE,EAAYR,EAAcM,cAI1BG,EAA0B,GAC1BvP,QAAQkP,KAAKC,SAAS,kBACxBI,EAA0B,IAE5B,IAAIC,EAAqBP,EAAqBI,EAAwBC,EAAYC,EAGlFtO,EAAE,2BAA2BS,OAAOT,EAAExC,QAAQiD,SAAW8N,GACzDvO,EAAE,sBAAsBS,OAAOqN,EAAiBrN,YApMzC,yCAuMU0B,EAAMgL,EAAOD,EAAS1F,GACvC,IAAI1C,EAAOzH,KAEXyH,EAAK0J,WAAatB,EAClBpI,EAAK2J,gBAAkBjH,EAEvBxH,EAAEwH,GAAIsB,YAAY,gBAClB9I,EAAEwH,GAAIqB,SAAS,gBACf7I,EAAEwH,GAAI3G,KAAK,wBAAwBkG,SACnC/G,EAAEwH,GAAI3G,KAAK,SAASiI,YAAY,UAEhC,IAAI4F,EAAU1O,EAAEwH,GAAImH,KAAK,iBACrBC,EAASF,EAAQtL,KAAK,MAC1B,GAAI,MAAOwL,EACTF,EAAU,SACL,CAEL,IAAMG,EAAYD,EAAOE,MAAM,KAC/BF,EAASC,EAAU,GAGrB,IAAME,EAAc/O,EAAEwH,GAAIpD,KAAK,eAAiBpE,EAAEwH,GAAIpD,KAAK,eAAiBxF,MAAMtC,EAAE,eAAgB,kBAGpG0D,EAAEwH,GAAIwH,QAAQhP,EAAE,CACd,oCACA,OAAQ+O,EAAa,QACrB,UACAE,KAAK,MAEP,IACM7K,EAAO,CACX,KAAQjC,EACR,OAHanC,EAAE,WAAWiE,MAI1B,MAASkJ,EACT,OAAUyB,GAGZhQ,MAAMoG,kBAAkB,mCAAoCZ,GAAM,SAASa,EAAUC,GAChE,YAAfA,GACFJ,EAAKoK,gBAAgBjK,EAASkK,MAAOrK,EAAK0J,WAAY1J,EAAK2J,sBA/OxD,sCAoPOW,EAAclC,EAAS1F,GACrC,IAAI1C,EAAOzH,KAEU,OAAjB+R,GAAyBA,EAAanS,eAAe,OACvD+C,EAAEwH,GAAIpE,KAAK,KAAM,eAAiBgM,EAAajQ,IAG/Ca,EAAEwH,GAAIwH,QAAQhP,EAAE,CACd,wBACA,+BAAgCoP,EAAajQ,GAAI,mBAAoBiQ,EAAajQ,GAAI,iEAAkEP,MAAMtC,EAAE,eAAgB,QAAS,kBACzL,SACA2S,KAAK,MAGPjP,EAAEwH,GAAI+B,OAAOvJ,EAAE,CACX,0CAA2CkN,EAAS,eAAgBkC,EAAajQ,GAAI,uBACrF8P,KAAK,MAGTjP,EAAE,qBAAuBoP,EAAajQ,IAAI2I,GAAG,YAAY,SAASrD,GAChEK,EAAKgH,mBAAmBrH,QAG1B7F,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,oDAE9C0D,EAAEwH,GAAIT,YA7QD,yCAiRUtC,GACjB,IAAMlC,EAASkC,EAAMiB,cACfmG,EAAU7L,EAAEuC,GAAQ6B,KAAK,WAC/B/G,KAAK2N,WAAWqE,UAAUxD,KApRnB,4CAwRP,IAAI/G,EAAOzH,KAEX,GAAKG,OAAO6M,YAAYiF,gBAiBtB9R,OAAO6M,YAAYiF,gBAAgBC,WAjBI,OACnCC,EAAK,UAAG5Q,MAAMwG,GAAGoK,aAAZ,QAAqB,GAC9BnS,KAAKoS,6BAA6BD,GAElChS,OAAO6M,YAAYiF,gBAAkB,IAAIvQ,QAAQ2Q,IAAIrS,KAAKkN,oBAAqBlN,KAAKsS,qBAAsB,CACxGC,SAAU,yBACVC,OAAQ,WACN/K,EAAKyF,oBAAoB1B,SAAS,WAEpCiH,OAAQ,WACNhL,EAAKyF,oBAAoBzB,YAAY,aAIzCzL,KAAK0S,mCAxSA,mDA+SoBP,GAC3B,IAAI1K,EAAOzH,KAEXA,KAAKsS,qBAAuB,KAC5BtS,KAAK2S,uBAAyB,KAC9B3S,KAAK4S,sBAAwB,KAE7B5S,KAAKsS,qBAAuB3P,EAC1B,oIAIF3C,KAAKsS,qBAAqBtO,SAAStC,QAAQkP,MAE3C5Q,KAAK2S,uBAAyBhQ,EAAE,kBAAoBwP,EAAMxR,OAAS,kBAAoB,IAAM,IAAMY,MAAMtC,EAAE,eAAgB,gCAAkC,QAC7Je,KAAK2S,uBAAuB3O,SAAShE,KAAKsS,sBAE1CtS,KAAK4S,sBAAwBjQ,EAAE,sBAAyBwP,EAAMxR,OAAqB,GAAZ,WAAkB,OACzFX,KAAK4S,sBAAsB5O,SAAShE,KAAKsS,sBAEzC,IAAIjQ,EAASM,EAAE,YAAYqB,SAAShE,KAAK4S,uBApBP,uBAsBlC,YAAoBT,EAApB,+CAA2B,KAAlBU,EAAkB,QACrB/C,EAAQ+C,EAAQC,aAAa,WAC7BC,EAAOtL,EAAKuL,uBAAuBlD,EAAO+C,EAASV,EAAMxR,QAC5CoS,EAAKvP,KAAK,sCAEhBiH,GAAG,SAAS,SAASrD,GAC9BK,EAAKwL,eAAe7L,MAGtBK,EAAKiG,oBAAoBoC,GAASiD,EAClCA,EAAK/O,SAAS3B,IAhCkB,qFA/S3B,sDAoVP,IAAIoF,EAAOzH,KAEXG,OAAO6M,YAAYiF,gBAAgBiB,WAAa,IAAI3R,MAAM4R,WAAW,CACnEC,cAAe3L,EAAKmL,sBACpBS,kBAAmB5L,EAAKkL,uBACxBW,UAAU,EACVC,cAAe,uCACfC,sBAAuBjS,MAAMtC,EAAE,eAAgB,oBAC/CwU,mBAAoBlS,MAAMtC,EAAE,eAAgB,2BAC5CyU,aAAc,qCACdC,qBAAsBpS,MAAMtC,EAAE,eAAgB,uFAC9C2U,eAAgB,SAASC,GACvBpM,EAAKqM,eAAiBvS,MAAMwG,GAAGyF,aAAauG,OAC5CtM,EAAK0G,sBAEP6F,aAAc,SAASlS,GACrB2F,EAAKqM,eAAiBvS,MAAMwG,GAAGyF,aAAauG,OAC5CtM,EAAK0G,0BArWF,oCA2WP,IAAI1G,EAAOzH,KAIX,GAFAyH,EAAK0J,WAAa8C,OAAO1S,MAAMtC,EAAE,eAAgB,cAEzB,OAApBwI,EAAK0J,WAAT,CAIA,IAAIpK,EAAO,CACTmE,OAAQzD,EAAKyD,OACb5M,KAAMmJ,EAAK0J,YAGb1J,EAAK6F,gBAAgB9B,SAAS,aAC9B/D,EAAK4F,iBAAiB5B,YAAY,UAElClK,MAAMoG,kBAAkB,kCAAmCZ,GAAM,SAASa,GACxEH,EAAK4F,iBAAiB7B,SAAS,UAC/B/D,EAAK6F,gBAAgB7B,YAAY,aACjChE,EAAK6F,gBAAgB9B,SAAS,kBAE1B5D,EAASE,SACXL,EAAKqM,eAAiB,OACtBrM,EAAK0G,sBAEL5M,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,8BApY3C,qCAyYMmI,GACb,IAAIK,EAAOzH,KAEP+S,EAAOpQ,EAAEyE,EAAMiB,eAAekB,SAC9B2K,EAAUnB,EAAKvP,KAAK,qCAAqCuQ,OAC7D/T,KAAKmR,WAAa8C,OAAO1S,MAAMtC,EAAE,eAAgB,QAASiV,GAC1D,IAAIpE,EAAQiD,EAAKhM,KAAK,MAEtB,GAAwB,OAApB/G,KAAKmR,WAAT,CAIA,IAAIpK,EAAO,CACT+I,MAAOA,EACPqE,QAASnU,KAAKmR,YAGhB5P,MAAMoG,kBAAkB,qCAAsCZ,GAAM,SAASa,GACvEA,EAASE,SACXL,EAAKqM,eAAiBrM,EAAK0J,WAC3B1J,EAAK0G,qBACL5M,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,mBAE/CsC,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,8BAI9Ce,KAAKmR,YAAcnR,KAAKmR,aAAe+C,IAEzCvR,EAAE,eAAiBmN,EAAQ,QAAQiE,KAAK/T,KAAKmR,YAG7C4B,EAAKvP,KAAK,qCAAqCuQ,KAAK/T,KAAKmR,aAG3D5P,MAAMwG,GAAGqM,cA5aF,6CA+actE,EAAO+C,EAASwB,GAErC,IAAIxE,EAAUgD,EAAQyB,cAAc,KAAKC,UAEzC,OAAO5R,EACL,gBAAkBmN,EAAQ,gBAAkBvO,MAAMiT,WAAW3E,GAAW,kDACtBA,EAAU,mFACoBtO,MAAMtC,EAAE,eAAgB,UAAY,6BACnHoV,EAAY,EAAI,4EAA8E9S,MAAMtC,EAAE,eAAgB,WAAa,4BAA8B,KACjKoV,EAAY,EAAI,kDAAoD9S,MAAMtC,EAAE,MAAO,UAAY,4BAA8B,IAC9H,WAzbK,2CA8bP,IAAIwI,EAAOzH,KACXA,KAAKyU,SAAW,KAEhB,IAAI1N,EAAO,CACTmE,OAAQlL,KAAKkL,QAGfzD,EAAK6F,gBAAgB9B,SAAS,aAC9B/D,EAAK4F,iBAAiB5B,YAAY,UAElClK,MAAMoG,kBAAkB,6CAA8CZ,GAAM,SAASa,GACnF,GAAIA,EAASE,QAAS,CACpB,IAAIqK,EAAQxP,EAAE,SACVwP,EAAMxR,OACRwR,EAAMuC,YAAY9M,EAAS+M,UAE3BhS,EAAEiF,EAAS+M,UAAUC,aAAajS,EAAE,aAGtCA,EAAE,sCAAsC2E,KAAKM,EAASiN,aAGtDtT,MAAMuT,eAAenS,EAAE,aACvBpB,MAAMwT,eAAenN,EAASoN,UAC9BzT,MAAM0T,eAAerN,EAASsN,UAE9B3T,MAAMwG,GAAGqM,WACT3M,EAAKsG,kBACLtG,EAAKuG,cAGD7N,OAAO6M,YAAYiF,kBACrBxK,EAAK2K,6BAA6B7Q,MAAMwG,GAAGoK,OAC3ChS,OAAO6M,YAAYiF,gBAAgBkD,WAAW1N,EAAK6K,sBACnD7K,EAAKiL,iCAGP,IAAI0C,EAAmB3N,EAAK4N,sBAW5B,OARyB,OAArBD,GACFA,EAAiB5R,KAAK,KAAK6K,QAAQ,SAGrC5G,EAAK4F,iBAAiB7B,SAAS,UAC/B/D,EAAK6F,gBAAgB9B,SAAS,kBAC9B/D,EAAK6F,gBAAgB7B,YAAY,sBAE1B,EAGT,OAAO,OAjfF,4CAwfP,QAAmCsB,IAA/B,EAFO/M,KAEK8T,gBACd,OAAO,KAGT,GAA4B,SANjB9T,KAMF8T,eAA2B,CAClC,IAAIwB,EAAW3S,EAAEpB,MAAMwG,GAAGoK,MAAM5Q,MAAMwG,GAAGoK,MAAMxR,OAAS,IAP/CX,KAQJ8T,eAAiBwB,EAASvB,OAAOwB,OATpB,2BAYpB,YAAgBhU,MAAMwG,GAAGoK,MAAzB,+CAAgC,KAAvBxC,EAAuB,QAC1B6F,EAAO7S,EAAEgN,GAEb,GADc6F,EAAKhS,KAAK,KAAKuC,KAAK,WAbzB/F,KAcY8T,eACnB,OAAO0B,GAhBS,kFAoBpB,OAAO,OAzgBA,mCAihBIC,GACX,IAAIC,EAAeD,EAASE,SAASC,IACjCC,EAAkBJ,EAASE,SAASC,IAAMH,EAAS3E,cACnDgF,EAAiBnT,EAAExC,QAAQ4V,YAAcpT,EAAExC,QAAQ6V,cACnDC,EAActT,EAAExC,QAAQ4V,YAE5B,OAAQD,EAAiBJ,GAAkBO,EAAcJ,O,2BAvhBlD,KA2hBX1V,OAAO2M,6BAA+BA,EA3hBxC,CA6hBGJ,S,8BC1iBH,YAEA,IAAIwJ,EAAU,EAAQ,GAClBC,EAAY,EAAQ,IACpBC,EAAU,EAAQ,IAClBC,EAAMxH,SACNyH,EAAkBD,EAAIC,gBAwe1B,SAASC,EAAQpM,EAAIqM,EAAI1R,EAAM2R,GAgBzBC,EAAOC,UAAUC,eACnBT,EAAUK,GAAIrM,EAXD,CACb0M,QAAS,YACTC,UAAW,cACXC,UAAW,eAQgBjS,GAAO2R,GACzBC,EAAOC,UAAUK,iBAC1Bb,EAAUK,GAAIrM,EARA,CACd0M,QAAS,cACTC,UAAW,gBACXC,UAAW,iBAKiBjS,GAAO2R,IAEnCN,EAAUK,GAAIrM,EApBJ,CACV0M,QAAS,WACTC,UAAW,aACXC,UAAW,aAiBajS,GAAO2R,GAC/BN,EAAUK,GAAIrM,EAAIrF,EAAM2R,IAI5B,SAASQ,EAAkB/W,GACzB,QAAkB,IAAdA,EAAEgX,QAAsB,OAAOhX,EAAEgX,QAAQvW,OAC7C,QAAgB,IAAZT,EAAEiX,OAAgC,IAAZjX,EAAEiX,MAAe,OAAOjX,EAAEiX,MACpD,QAAkB,IAAdjX,EAAEkX,QAAsB,OAAOlX,EAAEkX,QACrC,IAAIC,EAASnX,EAAEmX,OACf,YAAe,IAAXA,EACc,EAATA,EAAa,EAAa,EAATA,EAAa,EAAc,EAATA,EAAa,EAAI,OAD7D,EAKF,SAASC,EAAWnN,GAClB,IAAIoN,EAAOpN,EAAGqN,wBACd,MAAO,CACLC,KAAMF,EAAKE,KAAOC,EAAU,aAAc,eAC1C9B,IAAK2B,EAAK3B,IAAM8B,EAAU,YAAa,gBAI3C,SAASA,EAAWC,EAAYC,GAC9B,YAAkC,IAAvBlB,EAAOkB,GACTlB,EAAOkB,GAEZtB,EAAgBuB,aACXvB,EAAgBqB,GAElBtB,EAAI3F,KAAKiH,GAGlB,SAASG,EAAuBC,EAAOC,EAAGC,GACxC,IAEI9N,EAFAtK,EAAIkY,GAAS,GACbG,EAAQrY,EAAEsY,UAKd,OAHAtY,EAAEsY,WAAa,WACfhO,EAAKkM,EAAI+B,iBAAiBJ,EAAGC,GAC7BpY,EAAEsY,UAAYD,EACP/N,EAGT,SAASkO,IAAW,OAAO,EAC3B,SAASC,IAAY,OAAO,EAC5B,SAASC,EAAchB,GAAQ,OAAOA,EAAKiB,OAAUjB,EAAKkB,MAAQlB,EAAKE,KACvE,SAASiB,EAAenB,GAAQ,OAAOA,EAAKnU,QAAWmU,EAAKoB,OAASpB,EAAK3B,IAC1E,SAASgD,EAAWzO,GAAM,OAAOA,EAAG0O,aAAexC,EAAM,KAAOlM,EAAG0O,WACnE,SAASC,EAAS3O,GAAM,MAAsB,UAAfA,EAAG4O,SAAsC,aAAf5O,EAAG4O,SAAyC,WAAf5O,EAAG4O,SACzF,SAASC,EAAY7O,GACnB,IAAKA,EAAM,OAAO,EAClB,GAA2B,UAAvBA,EAAG8O,gBAA+B,OAAO,EAC7C,GAA2B,SAAvB9O,EAAG8O,gBAA8B,OAAO,EAC5C,OAAOD,EAAWJ,EAAUzO,IALmF6O,CAAW7O,GAQ5H,SAAS+O,EAAQ/O,GACf,OAAOA,EAAGgP,oBACV,WACE,IAAIC,EAAUjP,EACd,GACEiP,EAAUA,EAAQC,kBACXD,GAAgC,IAArBA,EAAQE,UAC5B,OAAOF,EANuBG,GAuBlC,SAASC,EAAUC,EAAOvZ,GACxB,IAAIwZ,EAdN,SAAuBxZ,GAIrB,OAAIA,EAAEyZ,eAAiBzZ,EAAEyZ,cAAchZ,OAC9BT,EAAEyZ,cAAc,GAErBzZ,EAAE0Z,gBAAkB1Z,EAAE0Z,eAAejZ,OAChCT,EAAE0Z,eAAe,GAEnB1Z,EAII2Z,CAAa3Z,GACpB4Z,EAAU,CACZC,MAAO,UACPC,MAAO,WAKT,OAHIP,KAASK,KAAaL,KAASC,IAASI,EAAQL,KAAUC,IAC5DD,EAAQK,EAAQL,IAEXC,EAAKD,GAGd3b,EAAOD,QAvlBP,SAAkBoc,EAAmBlV,GACnC,IAKImV,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAfAC,EAAMna,UAAUC,OACR,IAARka,IAAkD,IAArCha,MAAMia,QAAQb,KAC7BlV,EAAUkV,EACVA,EAAoB,IAatB,IACIc,EADAC,EAAkB,KAGlBxc,EAAIuG,GAAW,QACH,IAAZvG,EAAEyc,QAAoBzc,EAAEyc,MAAQ3C,QAClB,IAAd9Z,EAAE4Q,UAAsB5Q,EAAE4Q,QAAUkJ,QACtB,IAAd9Z,EAAE8Q,UAAsB9Q,EAAE8Q,QAAU4L,QACnB,IAAjB1c,EAAE2c,aAAyB3c,EAAE2c,WAAalB,GAAqB,SAC7C,IAAlBzb,EAAE4c,cAA0B5c,EAAE4c,YAAc/C,QACjC,IAAX7Z,EAAE0Q,OAAmB1Q,EAAE0Q,MAAO,QACT,IAArB1Q,EAAE6c,iBAA6B7c,EAAE6c,gBAAiB,QAC9B,IAApB7c,EAAE8c,gBAA4B9c,EAAE8c,eAAgB,QAC5B,IAApB9c,EAAE+c,gBAA4B/c,EAAE+c,eAAgB,QAChC,IAAhB/c,EAAEgd,YAAwBhd,EAAEgd,UAAY,iBACT,IAA/Bhd,EAAEid,2BAAuCjd,EAAEid,0BAA2B,QAChD,IAAtBjd,EAAEkd,kBAA8Bld,EAAEkd,gBAAkBrF,EAAI3F,MAE5D,IAAIiL,EAAQzF,EAAQ,CAClBiF,WAAY3c,EAAE2c,WACdS,MAAOC,EACPC,IAAKA,EACLC,OAAQA,EACRrS,OAAQA,EACRiF,QAASA,EACTqN,QAASA,EACT1L,UAAU,IASZ,OANwB,IAApB9R,EAAE+c,eACJI,EAAMlR,GAAG,OAAQwR,IAAWxR,GAAG,MAAOyR,IAGxCC,IAEOR,EAEP,SAASP,EAAajR,GACpB,OAAyC,IAAlCwR,EAAMR,WAAWiB,QAAQjS,IAAc3L,EAAE4c,YAAYjR,GAG9D,SAASgS,EAAQzS,GACf,IAAI8M,EAAK9M,EAAS,SAAW,MAC7B6M,EAAOD,EAAiBE,EAAI,YAAa6F,GACzC9F,EAAOD,EAAiBE,EAAI,UAAW8F,GAGzC,SAASC,EAAmB7S,GAE1B6M,EAAOD,EADE5M,EAAS,SAAW,MACD,YAAa8S,GAG3C,SAASC,EAAW/S,GAClB,IAAI8M,EAAK9M,EAAS,SAAW,MAC7ByM,EAAUK,GAAIF,EAAiB,cAAeoG,GAC9CvG,EAAUK,GAAIF,EAAiB,QAASoG,GAG1C,SAAS/N,IACPwN,GAAO,GACPG,EAAQ,IAGV,SAASI,EAAgBxc,GACnB6a,GACF7a,EAAE6I,iBAIN,SAASsT,EAAMnc,GAKb,GAJAqa,EAASra,EAAEyc,QACXnC,EAASta,EAAE0c,UAE0B,IAAxB3F,EAAiB/W,IAAYA,EAAE2c,SAAW3c,EAAE4c,SACzD,CAGA,IAAIC,EAAO7c,EAAEmP,OACT2N,EAAUC,EAASF,GAClBC,IAGLjC,EAAWiC,EACXT,IACe,cAAXrc,EAAE4E,OACAgU,EAAQiE,GACVA,EAAK5Y,QAELjE,EAAE6I,oBAKR,SAASyT,EAAwBtc,GAC/B,GAAK6a,EAGL,GAA4B,IAAxB9D,EAAiB/W,IAKrB,QAAkB,IAAdA,EAAEyc,SAAsBzc,EAAEyc,UAAYpC,QAAwB,IAAdra,EAAE0c,SAAsB1c,EAAE0c,UAAYpC,EAA1F,CAGA,GAAIhc,EAAEid,yBAA0B,CAC9B,IAAIkB,EAAUnD,EAAS,UAAWtZ,GAC9B0c,EAAUpD,EAAS,UAAWtZ,GAElC,GAAI4Y,EADsBzC,EAAI+B,iBAAiBuE,EAASC,IAEtD,OAIJ,IAAIM,EAAUnC,EACdwB,GAAkB,GAClBE,IACAX,IACAF,EAAMsB,GAEN,IAAIvH,EAAS2B,EAAU8C,GACvBC,EAAWb,EAAS,QAAStZ,GAAKyV,EAAO8B,KACzC6C,EAAWd,EAAS,QAAStZ,GAAKyV,EAAOC,IAEzCQ,EAAQhQ,IAAIuU,GAASP,EAAO,cAC5B+C,KACAC,GAAKld,SA5BHoc,EAAQ,IA+BZ,SAASW,EAAUF,GACjB,KAAIpB,EAAMrL,UAAY4J,GAGlBkB,EAAY2B,IAAhB,CAIA,IADA,IAAIxN,EAASwN,EACNnE,EAAUmE,KAA0C,IAAjC3B,EAAYxC,EAAUmE,KAAkB,CAChE,GAAIve,EAAE8Q,QAAQyN,EAAMxN,GAClB,OAGF,KADAwN,EAAOnE,EAAUmE,IAEf,OAGJ,IAAI5N,EAASyJ,EAAUmE,GACvB,GAAK5N,EAGL,IAAI3Q,EAAE8Q,QAAQyN,EAAMxN,GAKpB,GADc/Q,EAAEyc,MAAM8B,EAAM5N,EAAQI,EAAQ2J,EAAO6D,IAKnD,MAAO,CACLA,KAAMA,EACN5N,OAAQA,IAIZ,SAAS6M,EAASe,GAChB,QAASE,EAASF,GAGpB,SAASlB,EAAakB,GACpB,IAAIC,EAAUC,EAASF,GACnBC,GACFpB,EAAMoB,GAIV,SAASpB,EAAOoB,GACVK,GAAOL,EAAQD,KAAMC,EAAQ7N,UAC/BwL,EAAQqC,EAAQD,KAAKO,WAAU,GAC/B3B,EAAM4B,KAAK,SAAU5C,EAAOqC,EAAQD,KAAM,SAG5C5C,EAAU6C,EAAQ7N,OAClBiL,EAAQ4C,EAAQD,KAChBtC,EAAkBC,EAAkBxB,EAAO8D,EAAQD,MAEnDpB,EAAMrL,UAAW,EACjBqL,EAAM4B,KAAK,OAAQnD,EAAOD,GAG5B,SAASe,IACP,OAAO,EAGT,SAASY,IACP,GAAKH,EAAMrL,SAAX,CAGA,IAAIyM,EAAOpC,GAASP,EACpBoD,EAAKT,EAAMnE,EAAUmE,KAGvB,SAASU,IACP1C,GAAW,EACXwB,GAAkB,GAClBE,GAAU,GAGZ,SAASH,EAASpc,GAGhB,GAFAud,IAEK9B,EAAMrL,SAAX,CAGA,IAAIyM,EAAOpC,GAASP,EAChBuC,EAAUnD,EAAS,UAAWtZ,GAC9B0c,EAAUpD,EAAS,UAAWtZ,GAE9Bwd,EAAaC,GADS7F,EAAsBoC,EAASyC,EAASC,GACbD,EAASC,GAC1Dc,IAAgB/C,GAASnc,EAAE6c,iBAAqBV,GAAS+C,IAAevD,GAC1EqD,EAAKT,EAAMW,GACFlf,EAAE+c,cACX7R,IAEAqS,KAIJ,SAASyB,EAAMT,EAAM1N,GACnB,IAAI9F,EAASqP,EAAUmE,GACnBpC,GAASnc,EAAE6c,gBAAkBhM,IAAW8K,GAC1C5Q,EAAOqU,YAAYxD,GAEjByD,GAAmBxO,GACrBsM,EAAM4B,KAAK,SAAUR,EAAM5C,EAASA,GAEpCwB,EAAM4B,KAAK,OAAQR,EAAM1N,EAAQ8K,EAASO,GAE5CoD,KAGF,SAASpU,IACP,GAAKiS,EAAMrL,SAAX,CAGA,IAAIyM,EAAOpC,GAASP,EAChB7Q,EAASqP,EAAUmE,GACnBxT,GACFA,EAAOqU,YAAYb,GAErBpB,EAAM4B,KAAK5C,EAAQ,SAAW,SAAUoC,EAAMxT,EAAQ4Q,GACtD2D,MAGF,SAAS/B,EAAQgC,GACf,GAAKpC,EAAMrL,SAAX,CAGA,IAAI0N,EAAUtd,UAAUC,OAAS,EAAIod,EAASvf,EAAE8c,cAC5CyB,EAAOpC,GAASP,EAChB7Q,EAASqP,EAAUmE,GACnBkB,EAAUJ,GAAmBtU,IACjB,IAAZ0U,GAAqBD,IACnBrD,EACEpR,GACFA,EAAOqU,YAAYjD,GAGrBR,EAAQvF,aAAamI,EAAMtC,IAG3BwD,GAAWD,EACbrC,EAAM4B,KAAK,SAAUR,EAAM5C,EAASA,GAEpCwB,EAAM4B,KAAK,OAAQR,EAAMxT,EAAQ4Q,EAASO,GAE5CoD,MAGF,SAASA,KACP,IAAIf,EAAOpC,GAASP,EACpBqD,IACAS,KACInB,GACF3G,EAAQ+H,GAAGpB,EAAM,cAEfnC,GACFwD,aAAaxD,GAEfe,EAAMrL,UAAW,EACb0K,GACFW,EAAM4B,KAAK,MAAOR,EAAM/B,EAAiBb,GAE3CwB,EAAM4B,KAAK,UAAWR,GACtB5C,EAAUC,EAAQO,EAAQF,EAAkBC,EAAkBE,EAAeI,EAAkB,KAGjG,SAAS6C,GAAoBxO,EAAQvP,GACnC,IAAIsZ,EAQJ,OANEA,OADQ,IAANtZ,EACQA,EACDoa,EACCQ,EAEAxB,EAAOyB,GAASP,GAErB/K,IAAW8K,GAAWf,IAAYqB,EAG3C,SAASkD,GAAgBU,EAAqB1B,EAASC,GAErD,IADA,IAAIvN,EAASgP,EACNhP,IAAWiP,KAChBjP,EAASuJ,EAAUvJ,GAErB,OAAOA,EAEP,SAASiP,IAEP,IAAkB,IADFlD,EAAY/L,GAE1B,OAAO,EAGT,IAAIkP,EAAYC,GAAkBnP,EAAQgP,GACtCI,EAAYC,GAAarP,EAAQkP,EAAW5B,EAASC,GAEzD,QADciB,GAAmBxO,EAAQoP,IAIlCjgB,EAAE4Q,QAAQgL,EAAO/K,EAAQ8K,EAASsE,IAI7C,SAASrB,GAAMld,GACb,GAAKga,EAAL,CAGAha,EAAE6I,iBAEF,IAAI4T,EAAUnD,EAAS,UAAWtZ,GAC9B0c,EAAUpD,EAAS,UAAWtZ,GAC9B8X,EAAI2E,EAAUtC,EACdpC,EAAI2E,EAAUtC,EAElBJ,EAAQyE,MAAMlH,KAAOO,EAAI,KACzBkC,EAAQyE,MAAM/I,IAAMqC,EAAI,KAExB,IAAI8E,EAAOpC,GAASP,EAChBiE,EAAsBvG,EAAsBoC,EAASyC,EAASC,GAC9Dc,EAAaC,GAAeU,EAAqB1B,EAASC,GAC1DgC,EAAyB,OAAflB,GAAuBA,IAAe1C,GAChD4D,GAA0B,OAAflB,KAoCO1C,GAAmB6D,EAAM,OAlC7C7D,EAAkB0C,EAiCGkB,GAAWC,EAAM,SA9BxC,IAAItV,EAASqP,EAAUmE,GACvB,GAAIW,IAAevD,IAAWQ,GAAUnc,EAAE6c,eAA1C,CAMA,IAAIoD,EACAF,EAAYC,GAAkBd,EAAYW,GAC9C,GAAkB,OAAdE,EACFE,EAAYC,GAAahB,EAAYa,EAAW5B,EAASC,OACpD,KAAwB,IAApBpe,EAAE8c,eAA2BX,EAOtC,YAHIA,GAASpR,GACXA,EAAOqU,YAAYb,IAJrB0B,EAAYhE,EACZiD,EAAavD,GAQE,OAAdsE,GAAsBG,GACvBH,IAAc1B,GACd0B,IAAcvF,EAAO6D,MAErBrC,EAAkB+D,EAClBf,EAAW9I,aAAamI,EAAM0B,GAC9B9C,EAAM4B,KAAK,SAAUR,EAAMW,EAAYvD,SAzBnC5Q,GACFA,EAAOqU,YAAYb,GA0BvB,SAAS8B,EAAO/Z,GAAQ6W,EAAM4B,KAAKzY,EAAMiY,EAAM/B,EAAiBb,IAKlE,SAAS8B,GAAW9R,GAClBiM,EAAQ+H,GAAGhU,EAAI,WAGjB,SAAS+R,GAAU/R,GACbwR,EAAMrL,UAAY8F,EAAQhQ,IAAI+D,EAAI,WAGxC,SAASgT,KACP,IAAIjD,EAAJ,CAGA,IAAI3C,EAAO6C,EAAM5C,yBACjB0C,EAAUE,EAAMkD,WAAU,IAClBqB,MAAMnG,MAAQD,EAAahB,GAAQ,KAC3C2C,EAAQyE,MAAMvb,OAASsV,EAAcnB,GAAQ,KAC7CnB,EAAQ+H,GAAGjE,EAAS,cACpB9D,EAAQhQ,IAAI8T,EAAS,aACrB1b,EAAEkd,gBAAgBoD,YAAY5E,GAC9B3D,EAAOD,EAAiB,MAAO,YAAa8G,IAC5ChH,EAAQhQ,IAAI5H,EAAEkd,gBAAiB,mBAC/BC,EAAM4B,KAAK,SAAUrD,EAASE,EAAO,WAGvC,SAAS8D,KACHhE,IACF9D,EAAQ+H,GAAG3f,EAAEkd,gBAAiB,mBAC9BnF,EAAOD,EAAiB,SAAU,YAAa8G,IAC/CxE,EAAUsB,GAAS0D,YAAY1D,GAC/BA,EAAU,MAId,SAASsE,GAAmBd,EAAYrO,GAEtC,IADA,IAAIkP,EAAYlP,EACTkP,IAAcb,GAAc9E,EAAU2F,KAAeb,GAC1Da,EAAY3F,EAAU2F,GAExB,OAAIA,IAAcjI,EACT,KAEFiI,EAGT,SAASG,GAAchB,EAAYrO,EAAQ2I,EAAGC,GAC5C,IAAI8G,EAA6B,eAAhBvgB,EAAEgd,UAEnB,OADgBnM,IAAWqO,EAiB3B,WACE,IAAInG,EAAOlI,EAAOmI,wBAClB,GAAIuH,EACF,OAAOC,EAAQhH,EAAIT,EAAKE,KAAOc,EAAahB,GAAQ,GAEtD,OAAOyH,EAAQ/G,EAAIV,EAAK3B,IAAM8C,EAAcnB,GAAQ,GAtBd0H,GAGxC,WACE,IACIlhB,EACAoM,EACAoN,EAHAsD,EAAM6C,EAAW9a,SAASjC,OAI9B,IAAK5C,EAAI,EAAGA,EAAI8c,EAAK9c,IAAK,CAGxB,GAFAoM,EAAKuT,EAAW9a,SAAS7E,GACzBwZ,EAAOpN,EAAGqN,wBACNuH,GAAexH,EAAKE,KAAOF,EAAKiB,MAAQ,EAAKR,EAAK,OAAO7N,EAC7D,IAAK4U,GAAexH,EAAK3B,IAAM2B,EAAKnU,OAAS,EAAK6U,EAAK,OAAO9N,EAEhE,OAAO,KAd0C+U,GAyBnD,SAASF,EAASG,GAChB,OAAOA,EAAQjG,EAAO7J,GAAUA,GAIpC,SAASgO,GAAQN,EAAM9M,GACrB,MAAyB,kBAAXzR,EAAE0Q,KAAqB1Q,EAAE0Q,KAAO1Q,EAAE0Q,KAAK6N,EAAM9M,O,8CCxe/D,IAAImP,EAAO,EAAQ,GACfC,EAAW,EAAQ,GAEvBvhB,EAAOD,QAAU,SAAkByhB,EAAOva,GACxC,IAAIwa,EAAOxa,GAAW,GAClBya,EAAM,GA6CV,YA5CczS,IAAVuS,IAAuBA,EAAQ,IACnCA,EAAM7U,GAAK,SAAU3F,EAAM2R,GAMzB,OALK+I,EAAI1a,GAGP0a,EAAI1a,GAAMuB,KAAKoQ,GAFf+I,EAAI1a,GAAQ,CAAC2R,GAIR6I,GAETA,EAAMG,KAAO,SAAU3a,EAAM2R,GAG3B,OAFAA,EAAGiJ,OAAQ,EACXJ,EAAM7U,GAAG3F,EAAM2R,GACR6I,GAETA,EAAMK,IAAM,SAAU7a,EAAM2R,GAC1B,IAAIrY,EAAIsC,UAAUC,OAClB,GAAU,IAANvC,SACKohB,EAAI1a,QACN,GAAU,IAAN1G,EACTohB,EAAM,OACD,CACL,IAAII,EAAKJ,EAAI1a,GACb,IAAK8a,EAAM,OAAON,EAClBM,EAAGC,OAAOD,EAAGxD,QAAQ3F,GAAK,GAE5B,OAAO6I,GAETA,EAAM/B,KAAO,WACX,IAAI3c,EAAOwe,EAAK1e,WAChB,OAAO4e,EAAMQ,gBAAgBlf,EAAKmf,SAAShf,MAAMf,KAAMY,IAEzD0e,EAAMQ,gBAAkB,SAAUhb,GAChC,IAAI8a,GAAMJ,EAAI1a,IAAS,IAAIkb,MAAM,GACjC,OAAO,WACL,IAAIpf,EAAOwe,EAAK1e,WACZuf,EAAMjgB,MAAQsf,EAClB,GAAa,UAATxa,IAAoC,IAAhBya,EAAKW,SAAqBN,EAAGjf,OAAU,MAAsB,IAAhBC,EAAKD,OAAeC,EAAK,GAAKA,EAKnG,OAJAgf,EAAGO,SAAQ,SAAkBC,GACvBb,EAAKc,MAAShB,EAASe,EAAQxf,EAAMqf,GAAeG,EAAOrf,MAAMkf,EAAKrf,GACtEwf,EAAOV,OAASJ,EAAMK,IAAI7a,EAAMsb,MAE/Bd,IAGJA,I,cCpDTxhB,EAAOD,QAAU,SAAeyiB,EAAG9gB,GAAK,OAAOqB,MAAMlB,UAAUqgB,MAAM9hB,KAAKoiB,EAAG9gB,K,6BCE7E,IAAI+gB,EAAQ,EAAQ,IAEpBziB,EAAOD,QAAU,SAAmB4Y,EAAI7V,EAAMqf,GACvCxJ,GACL8J,GAAM,WACJ9J,EAAG1V,MAAMkf,GAAO,KAAMrf,GAAQ,S,iBCPlC,kBAEE4f,EAFF,qBAES,SAAU/J,GAAMgK,EAAahK,IAE7B,SAAUA,GAAMnO,WAAWmO,EAAI,IAGxC3Y,EAAOD,QAAU2iB,I,gDCPjB,iCAC6B,oBAAT/Y,MAAwBA,MAChCtH,OACRY,EAAQd,SAASN,UAAUoB,MAiB/B,SAAS2f,EAAQ5e,EAAI6e,GACnB3gB,KAAK4gB,IAAM9e,EACX9B,KAAK6gB,SAAWF,EAflB9iB,EAAQyK,WAAa,WACnB,OAAO,IAAIoY,EAAQ3f,EAAM7C,KAAKoK,WAAYwY,EAAOpgB,WAAY0d,eAE/DvgB,EAAQkjB,YAAc,WACpB,OAAO,IAAIL,EAAQ3f,EAAM7C,KAAK6iB,YAAaD,EAAOpgB,WAAYsgB,gBAEhEnjB,EAAQugB,aACRvgB,EAAQmjB,cAAgB,SAASC,GAC3BA,GACFA,EAAQC,SAQZR,EAAQ/gB,UAAUwhB,MAAQT,EAAQ/gB,UAAUyhB,IAAM,aAClDV,EAAQ/gB,UAAUuhB,MAAQ,WACxBlhB,KAAK6gB,SAAS3iB,KAAK4iB,EAAO9gB,KAAK4gB,MAIjC/iB,EAAQwjB,OAAS,SAAStE,EAAMuE,GAC9BlD,aAAarB,EAAKwE,gBAClBxE,EAAKyE,aAAeF,GAGtBzjB,EAAQ4jB,SAAW,SAAS1E,GAC1BqB,aAAarB,EAAKwE,gBAClBxE,EAAKyE,cAAgB,GAGvB3jB,EAAQ6jB,aAAe7jB,EAAQ8jB,OAAS,SAAS5E,GAC/CqB,aAAarB,EAAKwE,gBAElB,IAAID,EAAQvE,EAAKyE,aACbF,GAAS,IACXvE,EAAKwE,eAAiBjZ,YAAW,WAC3ByU,EAAK6E,YACP7E,EAAK6E,eACNN,KAKP,EAAQ,IAIRzjB,EAAQ4iB,aAAgC,oBAAThZ,MAAwBA,KAAKgZ,mBAClB,IAAX/J,GAA0BA,EAAO+J,cACxCzgB,MAAQA,KAAKygB,aACrC5iB,EAAQgkB,eAAkC,oBAATpa,MAAwBA,KAAKoa,qBAClB,IAAXnL,GAA0BA,EAAOmL,gBACxC7hB,MAAQA,KAAK6hB,iB,kCC9DvC,6BACI,aAEA,IAAInL,EAAO+J,aAAX,CAIA,IAIIqB,EA6HIxa,EAZAya,EArBAC,EACAC,EAjGJC,EAAa,EACbC,EAAgB,GAChBC,GAAwB,EACxB/L,EAAMK,EAAO7H,SAoJbwT,EAAW5jB,OAAO6jB,gBAAkB7jB,OAAO6jB,eAAe5L,GAC9D2L,EAAWA,GAAYA,EAAS/Z,WAAa+Z,EAAW3L,EAGf,qBAArC,GAAG6L,SAASrkB,KAAKwY,EAAO8L,SApFxBV,EAAoB,SAASvS,GACzBiT,EAAQC,UAAS,WAAcC,EAAanT,QAIpD,WAGI,GAAImH,EAAOiM,cAAgBjM,EAAOkM,cAAe,CAC7C,IAAIC,GAA4B,EAC5BC,EAAepM,EAAOqM,UAM1B,OALArM,EAAOqM,UAAY,WACfF,GAA4B,GAEhCnM,EAAOiM,YAAY,GAAI,KACvBjM,EAAOqM,UAAYD,EACZD,GAwEJG,GAIAtM,EAAOuM,iBA9CVlB,EAAU,IAAIkB,gBACVC,MAAMH,UAAY,SAAS3b,GAE/Bsb,EADatb,EAAML,OAIvB+a,EAAoB,SAASvS,GACzBwS,EAAQoB,MAAMR,YAAYpT,KA2CvB8G,GAAO,uBAAwBA,EAAI+M,cAAc,WAtCpD9b,EAAO+O,EAAIC,gBACfwL,EAAoB,SAASvS,GAGzB,IAAI8T,EAAShN,EAAI+M,cAAc,UAC/BC,EAAOC,mBAAqB,WACxBZ,EAAanT,GACb8T,EAAOC,mBAAqB,KAC5Bhc,EAAKsW,YAAYyF,GACjBA,EAAS,MAEb/b,EAAKwX,YAAYuE,KAKrBvB,EAAoB,SAASvS,GACzBjH,WAAWoa,EAAc,EAAGnT,KAlD5ByS,EAAgB,gBAAkBuB,KAAKC,SAAW,IAClDvB,EAAkB,SAAS7a,GACvBA,EAAM+H,SAAWuH,GACK,iBAAftP,EAAML,MACyB,IAAtCK,EAAML,KAAKqV,QAAQ4F,IACnBU,GAActb,EAAML,KAAKiZ,MAAMgC,EAAcrhB,UAIjD+V,EAAOtI,iBACPsI,EAAOtI,iBAAiB,UAAW6T,GAAiB,GAEpDvL,EAAO+M,YAAY,YAAaxB,GAGpCH,EAAoB,SAASvS,GACzBmH,EAAOiM,YAAYX,EAAgBzS,EAAQ,OAgEnD8S,EAAS5B,aA1KT,SAAsBiD,GAEI,mBAAbA,IACTA,EAAW,IAAIzjB,SAAS,GAAKyjB,IAI/B,IADA,IAAI9iB,EAAO,IAAIC,MAAMH,UAAUC,OAAS,GAC/B5C,EAAI,EAAGA,EAAI6C,EAAKD,OAAQ5C,IAC7B6C,EAAK7C,GAAK2C,UAAU3C,EAAI,GAG5B,IAAI4lB,EAAO,CAAED,SAAUA,EAAU9iB,KAAMA,GAGvC,OAFAuhB,EAAcD,GAAcyB,EAC5B7B,EAAkBI,GACXA,KA6JTG,EAASR,eAAiBA,EA1J1B,SAASA,EAAetS,UACb4S,EAAc5S,GAyBzB,SAASmT,EAAanT,GAGlB,GAAI6S,EAGA9Z,WAAWoa,EAAc,EAAGnT,OACzB,CACH,IAAIoU,EAAOxB,EAAc5S,GACzB,GAAIoU,EAAM,CACNvB,GAAwB,EACxB,KAjCZ,SAAauB,GACT,IAAID,EAAWC,EAAKD,SAChB9iB,EAAO+iB,EAAK/iB,KAChB,OAAQA,EAAKD,QACb,KAAK,EACD+iB,IACA,MACJ,KAAK,EACDA,EAAS9iB,EAAK,IACd,MACJ,KAAK,EACD8iB,EAAS9iB,EAAK,GAAIA,EAAK,IACvB,MACJ,KAAK,EACD8iB,EAAS9iB,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAChC,MACJ,QACI8iB,EAAS3iB,WAnDrB,EAmDsCH,IAiBlBgjB,CAAID,GACN,QACE9B,EAAetS,GACf6S,GAAwB,MAvE5C,CAyLkB,oBAAT3a,UAAyC,IAAXiP,EAAyB1W,KAAO0W,EAASjP,Q,qCCxLhF,IAOIoc,EACAC,EARAtB,EAAU1kB,EAAOD,QAAU,GAU/B,SAASkmB,IACL,MAAM,IAAIC,MAAM,mCAEpB,SAASC,IACL,MAAM,IAAID,MAAM,qCAsBpB,SAASE,EAAWC,GAChB,GAAIN,IAAqBvb,WAErB,OAAOA,WAAW6b,EAAK,GAG3B,IAAKN,IAAqBE,IAAqBF,IAAqBvb,WAEhE,OADAub,EAAmBvb,WACZA,WAAW6b,EAAK,GAE3B,IAEI,OAAON,EAAiBM,EAAK,GAC/B,MAAMjkB,GACJ,IAEI,OAAO2jB,EAAiB3lB,KAAK,KAAMimB,EAAK,GAC1C,MAAMjkB,GAEJ,OAAO2jB,EAAiB3lB,KAAK8B,KAAMmkB,EAAK,MAvCnD,WACG,IAEQN,EADsB,mBAAfvb,WACYA,WAEAyb,EAEzB,MAAO7jB,GACL2jB,EAAmBE,EAEvB,IAEQD,EADwB,mBAAjB1F,aACcA,aAEA6F,EAE3B,MAAO/jB,GACL4jB,EAAqBG,GAjB7B,GAwEA,IAEIG,EAFAC,EAAQ,GACRC,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaF,IAGlBE,GAAW,EACPF,EAAazjB,OACb0jB,EAAQD,EAAaK,OAAOJ,GAE5BE,GAAc,EAEdF,EAAM1jB,QACN+jB,KAIR,SAASA,IACL,IAAIJ,EAAJ,CAGA,IAAIrD,EAAUiD,EAAWM,GACzBF,GAAW,EAGX,IADA,IAAIzJ,EAAMwJ,EAAM1jB,OACVka,GAAK,CAGP,IAFAuJ,EAAeC,EACfA,EAAQ,KACCE,EAAa1J,GACduJ,GACAA,EAAaG,GAAYX,MAGjCW,GAAc,EACd1J,EAAMwJ,EAAM1jB,OAEhByjB,EAAe,KACfE,GAAW,EAnEf,SAAyBK,GACrB,GAAIb,IAAuB1F,aAEvB,OAAOA,aAAauG,GAGxB,IAAKb,IAAuBG,IAAwBH,IAAuB1F,aAEvE,OADA0F,EAAqB1F,aACdA,aAAauG,GAExB,IAEWb,EAAmBa,GAC5B,MAAOzkB,GACL,IAEI,OAAO4jB,EAAmB5lB,KAAK,KAAMymB,GACvC,MAAOzkB,GAGL,OAAO4jB,EAAmB5lB,KAAK8B,KAAM2kB,KAgD7CC,CAAgB3D,IAiBpB,SAAS4D,EAAKV,EAAKW,GACf9kB,KAAKmkB,IAAMA,EACXnkB,KAAK8kB,MAAQA,EAYjB,SAASxgB,KA5BTke,EAAQC,SAAW,SAAU0B,GACzB,IAAIvjB,EAAO,IAAIC,MAAMH,UAAUC,OAAS,GACxC,GAAID,UAAUC,OAAS,EACnB,IAAK,IAAI5C,EAAI,EAAGA,EAAI2C,UAAUC,OAAQ5C,IAClC6C,EAAK7C,EAAI,GAAK2C,UAAU3C,GAGhCsmB,EAAMhe,KAAK,IAAIwe,EAAKV,EAAKvjB,IACJ,IAAjByjB,EAAM1jB,QAAiB2jB,GACvBJ,EAAWQ,IASnBG,EAAKllB,UAAUikB,IAAM,WACjB5jB,KAAKmkB,IAAIpjB,MAAM,KAAMf,KAAK8kB,QAE9BtC,EAAQuC,MAAQ,UAChBvC,EAAQwC,SAAU,EAClBxC,EAAQyC,IAAM,GACdzC,EAAQ0C,KAAO,GACf1C,EAAQ2C,QAAU,GAClB3C,EAAQ4C,SAAW,GAInB5C,EAAQ/X,GAAKnG,EACbke,EAAQtf,YAAcoB,EACtBke,EAAQ/C,KAAOnb,EACfke,EAAQ7C,IAAMrb,EACdke,EAAQnf,eAAiBiB,EACzBke,EAAQ6C,mBAAqB/gB,EAC7Bke,EAAQjF,KAAOjZ,EACfke,EAAQ8C,gBAAkBhhB,EAC1Bke,EAAQ+C,oBAAsBjhB,EAE9Bke,EAAQgD,UAAY,SAAUlnB,GAAQ,MAAO,IAE7CkkB,EAAQiD,QAAU,SAAUnnB,GACxB,MAAM,IAAI0lB,MAAM,qCAGpBxB,EAAQkD,IAAM,WAAc,MAAO,KACnClD,EAAQmD,MAAQ,SAAUC,GACtB,MAAM,IAAI5B,MAAM,mCAEpBxB,EAAQqD,MAAQ,WAAa,OAAO,I,8BCvLpC,YAEA,IAAIC,EAAc,EAAQ,IACtBC,EAAW,EAAQ,IACnB1P,EAAMK,EAAO7H,SACbmX,EAeJ,SAAuB7b,EAAIrF,EAAM2R,EAAIwP,GACnC,OAAO9b,EAAGiE,iBAAiBtJ,EAAM2R,EAAIwP,IAfnCC,EAsBJ,SAA0B/b,EAAIrF,EAAM2R,EAAIwP,GACtC,OAAO9b,EAAGgc,oBAAoBrhB,EAAM2R,EAAIwP,IAtBtCG,EAAY,GA4EhB,SAASC,EAAQlc,EAAIrF,EAAM2R,GACzB,IAAI1Y,EAQN,SAAeoM,EAAIrF,EAAM2R,GACvB,IAAI1Y,EAAGgf,EACP,IAAKhf,EAAI,EAAGA,EAAIqoB,EAAUzlB,OAAQ5C,IAEhC,IADAgf,EAAOqJ,EAAUroB,IACRuoB,UAAYnc,GAAM4S,EAAKjY,OAASA,GAAQiY,EAAKtG,KAAOA,EAC3D,OAAO1Y,EAbHyF,CAAK2G,EAAIrF,EAAM2R,GACvB,GAAI1Y,EAAG,CACL,IAAIwoB,EAAUH,EAAUroB,GAAGwoB,QAE3B,OADAH,EAAUvG,OAAO9hB,EAAG,GACbwoB,GA/EN7P,EAAOtI,mBACV4X,EAcF,SAAuB7b,EAAIrF,EAAM2R,GAC/B,OAAOtM,EAAGsZ,YAAY,KAAO3e,EA+C/B,SAAeqF,EAAIrF,EAAM2R,GACvB,IAAI8P,EAAUF,EAAOlc,EAAIrF,EAAM2R,IAZjC,SAAyBtM,EAAIrF,EAAM2R,GACjC,OAAO,SAAkB+P,GACvB,IAAItmB,EAAIsmB,GAAiB9P,EAAOtP,MAChClH,EAAEmP,OAASnP,EAAEmP,QAAUnP,EAAEumB,WACzBvmB,EAAE6I,eAAiB7I,EAAE6I,gBAAkB,WAA6B7I,EAAEwmB,aAAc,GACpFxmB,EAAEymB,gBAAkBzmB,EAAEymB,iBAAmB,WAA8BzmB,EAAE0mB,cAAe,GACxF1mB,EAAEiX,MAAQjX,EAAEiX,OAASjX,EAAEwI,QACvB+N,EAAGvY,KAAKiM,EAAIjK,IAKwB2mB,CAAe1c,EAAIrF,EAAM2R,GAO/D,OANA2P,EAAU/f,KAAK,CACbkgB,QAASA,EACTD,QAASnc,EACTrF,KAAMA,EACN2R,GAAIA,IAEC8P,EAvD4BO,CAAK3c,EAAIrF,EAAM2R,KAdlDyP,EAqBF,SAA0B/b,EAAIrF,EAAM2R,GAClC,IAAIsQ,EAAWV,EAAOlc,EAAIrF,EAAM2R,GAChC,GAAIsQ,EACF,OAAO5c,EAAG6c,YAAY,KAAOliB,EAAMiiB,KArBvCjpB,EAAOD,QAAU,CACfuI,IAAK4f,EACLtc,OAAQwc,EACRe,UAsBF,SAAyB9c,EAAIrF,EAAMoiB,GACjC,IAAIhnB,GAAgC,IAA5B6lB,EAAS3J,QAAQtX,GAiBhB,IAAIghB,EAAYhhB,EAAM,CAAEqiB,OAAQD,IAXzC,WACE,IAAIhnB,EACAmW,EAAI+Q,aACNlnB,EAAImW,EAAI+Q,YAAY,UAClBC,UAAUviB,GAAM,GAAM,GACfuR,EAAIiR,oBACbpnB,EAAImW,EAAIiR,qBAEV,OAAOpnB,EAdmDqnB,GACxDpd,EAAGqd,cACLrd,EAAGqd,cAActnB,GAEjBiK,EAAGsd,UAAU,KAAO3iB,EAAM5E,O,8CC3C9B,IAAIwnB,EAAoBhR,EAAOiR,YAmB/B7pB,EAAOD,QAjBP,WACE,IACE,IAAIgC,EAAI,IAAI6nB,EAAkB,MAAO,CAAEP,OAAQ,CAAES,IAAK,SACtD,MAAQ,QAAU/nB,EAAEiF,MAAQ,QAAUjF,EAAEsnB,OAAOS,IAC/C,MAAO1nB,IAET,OAAO,EAWQ2nB,GAAcH,EAG/B,mBAAsB7Y,SAASuY,YAAc,SAAsBtiB,EAAMgjB,GACvE,IAAI5nB,EAAI2O,SAASuY,YAAY,eAM7B,OALIU,EACF5nB,EAAE6nB,gBAAgBjjB,EAAMgjB,EAAOE,QAASF,EAAOG,WAAYH,EAAOX,QAElEjnB,EAAE6nB,gBAAgBjjB,GAAM,GAAO,OAAO,GAEjC5E,GAIT,SAAsB4E,EAAMgjB,GAC1B,IAAI5nB,EAAI2O,SAASyY,oBAWjB,OAVApnB,EAAE4E,KAAOA,EACLgjB,GACF5nB,EAAE8nB,QAAUE,QAAQJ,EAAOE,SAC3B9nB,EAAE+nB,WAAaC,QAAQJ,EAAOG,YAC9B/nB,EAAEinB,OAASW,EAAOX,SAElBjnB,EAAE8nB,SAAU,EACZ9nB,EAAE+nB,YAAa,EACf/nB,EAAEinB,YAAS,GAENjnB,K,+CC9CT,YAEA,IAAI6lB,EAAW,GACXoC,EAAY,GACZC,EAAM,MAEV,IAAKD,KAAazR,EACZ0R,EAAIC,KAAKF,IACXpC,EAAS1f,KAAK8hB,EAAUnI,MAAM,IAIlCliB,EAAOD,QAAUkoB,I,8CCVjB,IAAIuC,EAAQ,GAIZ,SAASC,EAAapQ,GACpB,IAAIqQ,EAASF,EAAMnQ,GAMnB,OALIqQ,EACFA,EAAOC,UAAY,EAEnBH,EAAMnQ,GAAaqQ,EAAS,IAAIE,OARxB,YAQuCvQ,EAPzC,YAO0D,KAE3DqQ,EAgBT1qB,EAAOD,QAAU,CACfuI,IAdF,SAAmB+D,EAAIgO,GACrB,IAAIwQ,EAAUxe,EAAGgO,UACZwQ,EAAQhoB,OAED4nB,EAAYpQ,GAAWkQ,KAAKM,KACtCxe,EAAGgO,WAAa,IAAMA,GAFtBhO,EAAGgO,UAAYA,GAYjBgG,GANF,SAAkBhU,EAAIgO,GACpBhO,EAAGgO,UAAYhO,EAAGgO,UAAUhP,QAAQof,EAAYpQ,GAAY,KAAK5C,U,6BCtBnE,IAF0BqT,EAEtBC,EAAW,EAAQ,GACnBC,EAAyB,EAAQ,IACjCC,EAAS,EAAQ,IACjBC,EAAW,EAAQ,IACnBC,GANsBL,EAMgB,EAAQ,MANW,iBAAPA,GAAoB,YAAaA,EAAMA,EAAY,QAAIA,EAQ7G,SAASM,EAAaC,EAAUpkB,QACX,IAAZA,IAAqBA,EAAU,IAEpC,IAAI0C,EAAOzH,KACPmQ,EAAW,EAAGiZ,GAAY,EAE9BppB,KAAKkQ,OAASnL,EAAQmL,SAAW,EAEjClQ,KAAKoQ,kBAAoBrL,EAAQqL,oBAAqB,EAEtD,IAAI2H,EAAQ,GACRsR,EAAUL,EAASM,cAAcvR,GACjCwR,EAAaN,IACb5Y,GAAO,EAEXlQ,OAAOiO,iBAAiB,YAAaib,GAAS,GAC9ClpB,OAAOiO,iBAAiB,YAAaib,GAAS,GAE1CG,MAAMzkB,EAAQoL,YACdA,EAAWpL,EAAQoL,UAGvBnQ,KAAK6M,WAAagc,EAASvoB,QAAQyE,EAAQ8H,YAC3C7M,KAAKypB,SAAWZ,EAASvoB,QAAQyE,EAAQ0kB,UAAU,GAEnDzpB,KAAK2O,QAAU,SAAS+a,GACpBvpB,OAAOgmB,oBAAoB,YAAakD,GAAS,GACjDlpB,OAAOgmB,oBAAoB,YAAakD,GAAS,GACjDlpB,OAAOgmB,oBAAoB,YAAawD,GAAQ,GAChDxpB,OAAOgmB,oBAAoB,aAAcwD,GAAQ,GACjDxpB,OAAOgmB,oBAAoB,UAAWyD,GAAM,GAC5CzpB,OAAOgmB,oBAAoB,WAAYyD,GAAM,GAC7CzpB,OAAOgmB,oBAAoB,YAAayD,GAAM,GAC9CzpB,OAAOgmB,oBAAoB,aAAc0D,GAAY,GAErD1pB,OAAOgmB,oBAAoB,YAAa2D,GAAQ,GAChD3pB,OAAOgmB,oBAAoB,YAAa2D,GAAQ,GAEhD3pB,OAAOgmB,oBAAoB,SAAU4D,GAAW,GAChDZ,EAAW,GACRO,GACDM,KAINhqB,KAAKoG,IAAM,WAEP,IADA,IAAIkgB,EAAU,GAAIzL,EAAMna,UAAUC,OAC1Bka,KAAQyL,EAASzL,GAAQna,UAAWma,GAG5C,OADAkO,EAAOkB,YAAYlpB,WAAM,EAAQ,CAAEooB,GAAW1E,OAAQ6B,IAC/CtmB,MAGXA,KAAK0J,OAAS,WAEV,IADA,IAAI4c,EAAU,GAAIzL,EAAMna,UAAUC,OAC1Bka,KAAQyL,EAASzL,GAAQna,UAAWma,GAE5C,OAAOkO,EAAOmB,eAAenpB,WAAM,EAAQ,CAAEooB,GAAW1E,OAAQ6B,KAGpE,IAAsB6D,EAMZC,EANNC,EAAY,KAEgC,mBAA7C5rB,OAAOkB,UAAU4iB,SAASrkB,KAAKirB,KAC9BA,EAAW,CAACA,IAGNiB,EASRjB,EAREA,EAAW,GACXiB,EAAKjK,SAAQ,SAASmG,GACfA,IAAYnmB,OACXkqB,EAAYlqB,OAEZsH,EAAKrB,IAAIkgB,MAKrB7nB,OAAO6rB,iBAAiBtqB,KAAM,CAC1BqQ,KAAM,CACFzR,IAAK,WAAY,OAAOyR,IAE5BF,SAAU,CACNvR,IAAK,WAAY,OAAOuR,IAE5B4H,MAAO,CACHnZ,IAAK,WAAY,OAAOmZ,IAE5BqR,UAAW,CACPxqB,IAAK,WAAY,OAAOwqB,MAIhC,IAA2BmB,EAAhB5B,EAAU,KAsBrB,SAASoB,EAAU7pB,GAEf,IAAI,IAAInC,EAAE,EAAGA,EAAEorB,EAASxoB,OAAQ5C,IAC5B,GAAGorB,EAASprB,KAAOmC,EAAEmP,OAAO,CACxB+Z,GAAY,EACZ,MAILA,GACCN,EAAuB0B,uBAAsB,WAAa,OAAOpB,GAAY,KAIrF,SAASO,IACLtZ,GAAO,EAGX,SAASuZ,IACLvZ,GAAO,EACP2Z,IAEJ,SAASA,IACPlB,EAAuB2B,qBAAqBF,GAC5CzB,EAAuB2B,qBAAqBN,GAE9C,SAASN,IACLxZ,GAAO,EAyBX,SAASqa,IAGL,IAFA,IAAIC,EAAa,KAET5sB,EAAE,EAAGA,EAAEorB,EAASxoB,OAAQ5C,IACzBkhB,EAAOlH,EAAOoR,EAASprB,MACtB4sB,EAAaxB,EAASprB,IAI9B,OAAO4sB,EAIX,SAASb,EAAO1iB,GAEZ,GAAIK,EAAKoF,eAENzF,EAAkB,WAArB,CAEA,IAAIiI,EAASjI,EAAMiI,OAAQqB,EAAO7B,SAAS6B,KAExCiY,IAAY1J,EAAOlH,EAAO4Q,KACrBlhB,EAAK2I,oBACLuY,EAAU,OAIftZ,GAAUA,EAAOwJ,aAAenI,EAE/BrB,EAASqb,KAETrb,EArDR,SAAmBA,GACf,IAAIA,EACA,OAAO,KAGX,GAAGsZ,IAAYtZ,EACX,OAAOA,EAGX,GAAG0Z,EAAO6B,WAAWzB,EAAU9Z,GAC3B,OAAOA,EAGX,KAAMA,EAASA,EAAOwJ,YAClB,GAAGkQ,EAAO6B,WAAWzB,EAAU9Z,GAC3B,OAAOA,EAIf,OAAO,KAkCMwb,CAAUxb,MAGfA,EAASqb,KAKdrb,GAAUA,IAAWsZ,IACpBA,EAAUtZ,GAGXgb,IACCvB,EAAuB2B,qBAAqBN,GAC5CA,EAAuBrB,EAAuB0B,sBAAsBM,IAIpEnC,IAIJG,EAAuB2B,qBAAqBF,GAC5CA,EAAiBzB,EAAuB0B,sBAAsBO,KAGlE,SAASD,IACLje,EAAWwd,GAEXvB,EAAuB2B,qBAAqBN,GAC5CA,EAAuBrB,EAAuB0B,sBAAsBM,GAGxE,SAASC,IAEDpC,IAIJ9b,EAAW8b,GAEXG,EAAuB2B,qBAAqBF,GAC5CA,EAAiBzB,EAAuB0B,sBAAsBO,IAKlE,SAASle,EAAW1C,GAChB,IAAuC6gB,EAASC,EAA5C1T,EAAOyR,EAASkC,cAAc/gB,GAG9B6gB,EADDjT,EAAMC,EAAIT,EAAKE,KAAOhQ,EAAKyI,OAChBqT,KAAK4H,MACX5H,KAAK6H,KAAK,GAAIrT,EAAMC,EAAIT,EAAKE,MAAQhQ,EAAKyI,OAAS,GAAKzI,EAAK0I,UAE5D4H,EAAMC,EAAIT,EAAKkB,MAAQhR,EAAKyI,OACvBqT,KAAK8H,KACX9H,KAAK+H,IAAI,GAAIvT,EAAMC,EAAIT,EAAKkB,OAAShR,EAAKyI,OAAS,GAAKzI,EAAK0I,UAGvD,EAIV8a,EADDlT,EAAME,EAAIV,EAAK3B,IAAMnO,EAAKyI,OACfqT,KAAK4H,MACX5H,KAAK6H,KAAK,GAAIrT,EAAME,EAAIV,EAAK3B,KAAOnO,EAAKyI,OAAS,GAAKzI,EAAK0I,UAE3D4H,EAAME,EAAIV,EAAKoB,OAASlR,EAAKyI,OACxBqT,KAAK8H,KACX9H,KAAK+H,IAAI,GAAIvT,EAAME,EAAIV,EAAKoB,QAAUlR,EAAKyI,OAAS,GAAKzI,EAAK0I,UAGxD,EAGX1I,EAAKgiB,YAOJF,EAAWgC,SAASphB,EAAI,CACpB4P,MAAOhC,EAAMgC,MAAQiR,EACrBhR,MAAOjC,EAAMiC,MAAQiR,EACrBtO,QAAS5E,EAAMC,EAAIgT,EACnBpO,QAAS7E,EAAME,EAAIgT,IAI3B3iB,YAAW,WAEJ2iB,GAWX,SAAiB9gB,EAAIqhB,GACdrhB,IAAOhK,OACNA,OAAOsrB,SAASthB,EAAGuhB,YAAavhB,EAAGwhB,YAAcH,GAEjDrhB,EAAG4L,WAAayV,EAdZI,CAAQzhB,EAAI8gB,GAGbD,GAeX,SAAiB7gB,EAAIqhB,GACdrhB,IAAOhK,OACNA,OAAOsrB,SAASthB,EAAGuhB,YAAcF,EAAQrhB,EAAGwhB,aAE5CxhB,EAAG0hB,YAAcL,EAlBbM,CAAQ3hB,EAAI6gB,MAvMxB7qB,OAAOiO,iBAAiB,YAAaub,GAAQ,GAC7CxpB,OAAOiO,iBAAiB,aAAcub,GAAQ,GAC9CxpB,OAAOiO,iBAAiB,UAAWwb,GAAM,GACzCzpB,OAAOiO,iBAAiB,WAAYwb,GAAM,GAQ1CzpB,OAAOiO,iBAAiB,YAAawb,GAAM,GAE3CzpB,OAAOiO,iBAAiB,YAAa0b,GAAQ,GAC7C3pB,OAAOiO,iBAAiB,YAAa0b,GAAQ,GAE7C3pB,OAAOiO,iBAAiB,aAAcyb,GAAY,GAElD1pB,OAAOiO,iBAAiB,SAAU2b,GAAW,GAiNjD,SAAS9K,EAAOlH,EAAO5N,EAAIoN,GACvB,OAAIA,EAGQQ,EAAME,EAAIV,EAAK3B,KAAOmC,EAAME,EAAIV,EAAKoB,QACrCZ,EAAMC,EAAIT,EAAKE,MAAQM,EAAMC,EAAIT,EAAKkB,MAHvCuQ,EAAS+C,YAAYhU,EAAO5N,GAY3CrM,EAAOD,QAlBP,SAA6ByoB,EAASvhB,GAClC,OAAO,IAAImkB,EAAa5C,EAASvhB,K,6BCtUrCtG,OAAOC,eAAeb,EAAS,aAAc,CAC3CmB,OAAO,IAET,IAAIgtB,EAAS,CAAC,SAAU,MAAO,KAAM,KAETnuB,EAAQ2sB,sBAAwB,WAE1D,IAAK,IAAIzsB,EAAI,EAAGkuB,EAAQD,EAAOrrB,OAAQ5C,EAAIkuB,IAAU9rB,OAAOqqB,wBAAyBzsB,EACnFoC,OAAOqqB,sBAAwBrqB,OAAO6rB,EAAOjuB,GAAK,yBAIlD,IACMmuB,EAgBR,OAlBK/rB,OAAOqqB,wBAEJ0B,EAAW,EAEf/rB,OAAOqqB,sBAAwB,SAAU9G,GACvC,IAAIyI,GAAM,IAAIC,MAAOC,UACjBC,EAAM/I,KAAK6H,IAAI,EAAG,GAAKe,EAAMD,GAC7BK,EAAQpsB,OAAOmI,YAAW,WAC5B,OAAOob,EAASyI,EAAMG,KACrBA,GAIH,OAFAJ,EAAWC,EAAMG,EAEVC,IAKNpsB,OAAOqqB,sBAAsBjrB,KAAKY,QAxBiB,GA2BjCtC,EAAQ4sB,qBAAuB,WAExD,IAAK,IAAI1sB,EAAI,EAAGkuB,EAAQD,EAAOrrB,OAAQ5C,EAAIkuB,IAAU9rB,OAAOsqB,uBAAwB1sB,EAClFoC,OAAOsqB,qBAAuBtqB,OAAO6rB,EAAOjuB,GAAK,yBAA2BoC,OAAO6rB,EAAOjuB,GAAK,+BASjG,OANKoC,OAAOsqB,uBACVtqB,OAAOsqB,qBAAuB,SAAU8B,GACtCpsB,OAAOie,aAAamO,KAIjBpsB,OAAOsqB,qBAAqBlrB,KAAKY,QAZgB,I,6BC9B1D,SAASqsB,EAAiB5D,GAAM,OAAQA,GAAqB,iBAAPA,GAAoB,YAAaA,EAAMA,EAAY,QAAIA,EAF7GnqB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAItD,IAAIytB,EAAYD,EAAgB,EAAQ,KACpC1R,EAAU0R,EAAgB,EAAQ,KAClCE,EAAYF,EAAgB,EAAQ,KAEpCG,EAA4B,mBAAX7tB,QAAoD,iBAApBA,OAAO8tB,SAAwB,SAAUC,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAX/tB,QAAyB+tB,EAAIC,cAAgBhuB,OAAS,gBAAkB+tB,GAQtOE,EAAc,SAAUC,GAC1B,OAAgB,MAATA,GAAmF,iBAAhD,IAAVA,EAAwB,YAAcL,EAAQK,KAA2C,IAAnBA,EAAM1T,UAA2C,WAAzBqT,EAAQK,EAAMrO,QAAwD,WAAjCgO,EAAQK,EAAMC,gBAGnL,SAASC,EAAOC,GACZ,GAAuB,iBAAbA,EACN,IACI,OAAOte,SAASyF,cAAc6Y,GACjC,MAAMjtB,GACH,MAAMA,OAER,GAAGwsB,EAAUS,GACf,OAAOA,EAgBf,SAASC,EAAejE,EAAU7C,GAE9B,GADAA,EAAU+G,EAAe/G,GAAS,IAC9ByG,EAAYzG,GAAY,OAAQ,EACpC,IAAI,IAAIvoB,EAAE,EAAGA,EAAEorB,EAASxoB,OAAQ5C,IAC5B,GAAGorB,EAASprB,KAAOuoB,EACf,OAAOvoB,EAGf,OAAQ,EAGZ,SAAS6sB,EAAWzB,EAAU7C,GAC1B,OAAQ,IAAM8G,EAAejE,EAAU7C,GAG3C,SAASgH,EAAUC,GAEf,IAAIA,EAAO,MAAO,GAElB,IACI,MAAkB,iBAARA,EACCd,EAAU5d,SAASG,iBAAiBue,IACtCzS,EAAQyS,GACNA,EAAIC,IAAIH,QAEU,IAAfE,EAAI5sB,OACH,CAAC0sB,EAAeE,IAGpBd,EAAUc,EAAKF,GAG7B,MAAMntB,GACH,MAAM,IAAI8jB,MAAM9jB,IAcxB,SAASutB,EAAatE,EAAUuE,GAE5B,IAAI,IAAI3vB,EAAE,EAAGA,EAAE2vB,EAAM/sB,OAAQ5C,IACrB6sB,EAAWzB,EAAUuE,EAAM3vB,KACzBorB,EAAS9iB,KAAKqnB,EAAM3vB,IAG9B,OAAO2vB,EAyBX,SAASL,EAAe/G,EAASqH,GAC7B,GAAsB,iBAAZrH,EACN,IACI,OAAOzX,SAASyF,cAAcgS,GACjC,MAAMpmB,GACH,MAAMA,EAKd,IAAI6sB,EAAYzG,KAAaqH,EACzB,MAAM,IAAIC,UAAWtH,EAAU,0BAEnC,OAAOA,EAGXzoB,EAAQuvB,eAAiBA,EACzBvvB,EAAQ+sB,WAAaA,EACrB/sB,EAAQyvB,UAAYA,EACpBzvB,EAAQgwB,mBA5DR,WAEI,IADA,IAAIC,EAAQ,GAAIjT,EAAMna,UAAUC,OACxBka,KAAQiT,EAAOjT,GAAQna,UAAWma,GAE1C,OAAOiT,EAAMC,QAAO,SAAUvmB,EAAMwmB,GAChC,OAAOA,EAAKrtB,OAAS6G,EAAOA,EAAKid,OAAO6I,EAAUU,MACnD,KAuDPnwB,EAAQosB,YA1CR,SAAqBd,GAEjB,IADA,IAAIuE,EAAQ,GAAI7S,EAAMna,UAAUC,OAAS,EACjCka,KAAQ,GAAI6S,EAAO7S,GAAQna,UAAWma,EAAM,GAGpD,OAAO4S,EAAatE,EADpBuE,EAAQA,EAAMF,IAAIH,KAuCtBxvB,EAAQqsB,eAnCR,SAAwBf,GAEpB,IADA,IAAI8E,EAAW,GAAIpT,EAAMna,UAAUC,OAAS,EACpCka,KAAQ,GAAIoT,EAAUpT,GAAQna,UAAWma,EAAM,GAEvD,OAAOoT,EAAST,IAAIH,GAAgBU,QAAO,SAAUvmB,EAAMtH,GAEvD,IAAIguB,EAAQd,EAAejE,EAAUjpB,GAErC,OAAc,IAAXguB,EACU1mB,EAAKid,OAAO0E,EAAStJ,OAAOqO,EAAO,IACzC1mB,IACR,KAyBP3J,EAAQwvB,eAAiBA,EACzBxvB,EAAQqvB,OAASA,EACjBrvB,EAAQswB,UAnHR,SAAmBhB,GACf,MAAuB,iBAAbA,EACCtsB,MAAMlB,UAAUqgB,MAAMjf,MACzB8N,SAASG,iBAAiBme,IAEzBrS,EAAQqS,GACNA,EAASK,IAAIN,GACf,WAAYC,EACVV,EAAUU,GAAUK,IAAIN,QAD7B,I,gBCzCVpvB,EAAOD,QAAiC,mBAAfgD,MAAMutB,KAC7BvtB,MAAMutB,KACN,EAAQ,K,cCAO,IACXC,EASAC,EACAC,EAIAC,EAiBAC,EAiBAC,EAjDN5wB,EAAOD,SACDwwB,EAAa,SAAS5X,GACxB,MAAqB,mBAAPA,GAQZ6X,EAAiB/K,KAAKoL,IAAI,EAAG,IAAM,EACnCJ,EAAW,SAAUvvB,GACvB,IAAI6b,EARU,SAAU7b,GACxB,IAAI4vB,EAASC,OAAO7vB,GACpB,OAAIwqB,MAAMoF,GAAkB,EACb,IAAXA,GAAiBE,SAASF,IACtBA,EAAS,EAAI,GAAK,GAAKrL,KAAK4H,MAAM5H,KAAKwL,IAAIH,IADHA,EAKtCI,CAAUhwB,GACpB,OAAOukB,KAAK+H,IAAI/H,KAAK6H,IAAIvQ,EAAK,GAAIyT,IAEhCE,EAAe,SAASxvB,GAC1B,GAAY,MAATA,EAAe,CAChB,GAAG,CAAC,SAAS,SAAS,UAAU,UAAUod,eAAepd,IAAU,EACjE,OAAOF,OAAO8tB,SACT,GACc,oBAAX9tB,QACP,aAAcA,QACdA,OAAO8tB,YAAY5tB,EAEpB,OAAOF,OAAO8tB,SAGX,GAAI,eAAgB5tB,EACvB,MAAO,eAITyvB,EAAY,SAASQ,EAAGC,GAE1B,GAAS,MAALD,GAAkB,MAALC,EAAW,CAE1B,IAAI3uB,EAAO0uB,EAAEC,GAGb,GAAW,MAAR3uB,EACD,OAGF,IAAK8tB,EAAW9tB,GACd,MAAM,IAAIqtB,UAAUrtB,EAAO,sBAE7B,OAAOA,IAGPmuB,EAAe,SAAS9B,GAG1B,IAAIuC,EAASvC,EAAStb,OAKtB,OAFW4W,QAAQiH,EAAOC,OAMnBD,GAIF,SAAcE,GACnB,aAGA,IAKIC,EAkBAC,EAAGC,EAvBHC,EAAIzvB,KAGJ0vB,EAAQhvB,UAAUC,OAAS,EAAID,UAAU,QAAK,EAGlD,QAAqB,IAAVgvB,EAAuB,CAGhC,IAAKrB,EAAWqB,GACd,MAAM,IAAI9B,UACR,qEAMAltB,UAAUC,OAAS,IACrB2uB,EAAI5uB,UAAU,IASlB,IAAIivB,EAAgBlB,EAAUY,EAAOb,EAAaa,IAGlD,QAAsB,IAAlBM,EAA0B,CAQ5BJ,EAAIlB,EAAWoB,GAAKhxB,OAAO,IAAIgxB,GAAO,GAGtC,IAaIne,EAAMse,EAbNhD,EAAW+C,EAAczxB,KAAKmxB,GAGlC,GAAgB,MAAZzC,EACF,MAAM,IAAIgB,UACR,wDASJ,IAJA4B,EAAI,IAIS,CAOX,KAHAle,EAAOod,EAAa9B,IAUlB,OAHA2C,EAAE5uB,OAAS6uB,EAGJD,EAITK,EAAYte,EAAKtS,MAafuwB,EAAEC,GADAE,EACKA,EAAMxxB,KAAKoxB,EAAGM,EAAWJ,GAGzBI,EAGTJ,SAIG,CAGL,IAAIK,EAAYpxB,OAAO4wB,GAGvB,GAAa,MAATA,EACF,MAAM,IAAIzB,UACR,oEAMJ,IAYIkC,EAZAjV,EAAM0T,EAASsB,EAAUlvB,QAa7B,IANA4uB,EAAIlB,EAAWoB,GAAKhxB,OAAO,IAAIgxB,EAAE5U,IAAQ,IAAIha,MAAMga,GAGnD2U,EAAI,EAGGA,EAAI3U,GACTiV,EAASD,EAAUL,GAEjBD,EAAEC,GADAE,EACKA,EAAMxxB,KAAKoxB,EAAGQ,EAAQN,GAGtBM,EAETN,IAIFD,EAAE5uB,OAASka,EAGb,OAAO0U,K,cC5MX,IAAIzU,EAAUja,MAAMia,QAMhBiV,EAAMtxB,OAAOkB,UAAU4iB,SAmB3BzkB,EAAOD,QAAUid,GAAW,SAAUlU,GACpC,QAAUA,GAAO,kBAAoBmpB,EAAI7xB,KAAK0I,K,6BC/BhD,WAAI+lB,EAA4B,mBAAX7tB,QAAoD,iBAApBA,OAAO8tB,SAAwB,SAAUC,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAX/tB,QAAyB+tB,EAAIC,cAAgBhuB,OAAS,gBAAkB+tB,GAQ3N,sBACb,OAAgB,MAATG,GAAmF,iBAAhD,IAAVA,EAAwB,YAAcL,EAAQK,KAA2C,IAAnBA,EAAM1T,UAA2C,WAAzBqT,EAAQK,EAAMrO,QAAwD,WAAjCgO,EAAQK,EAAMC,iB,6BCPnLxuB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IAItD,IAF0B4pB,EAEtBoH,GAFsBpH,EAEU,EAAQ,MAFiB,iBAAPA,GAAoB,YAAaA,EAAMA,EAAY,QAAIA,EAyB7G,SAASsC,EAAc/gB,GACnB,GAAIA,IAAOhK,OACP,OAvBR,WACI,IAAI8vB,EAAQ,CACRra,IAAK,CAAE5W,MAAO,EAAGL,YAAY,GAC7B8Y,KAAM,CAAEzY,MAAO,EAAGL,YAAY,GAC9B8Z,MAAO,CAAEzZ,MAAOmB,OAAO+vB,WAAYvxB,YAAY,GAC/Cga,OAAQ,CAAE3Z,MAAOmB,OAAO6V,YAAarX,YAAY,GACjD6Z,MAAO,CAAExZ,MAAOmB,OAAO+vB,WAAYvxB,YAAY,GAC/CyE,OAAQ,CAAEpE,MAAOmB,OAAO6V,YAAarX,YAAY,GACjDqZ,EAAG,CAAEhZ,MAAO,EAAGL,YAAY,GAC3BsZ,EAAG,CAAEjZ,MAAO,EAAGL,YAAY,IAG/B,GAAIF,OAAOY,OACP,OAAOZ,OAAOY,OAAO,GAAI4wB,GAEzB,IAAI1Y,EAAO,GAEX,OADA9Y,OAAO6rB,iBAAiB/S,EAAM0Y,GACvB1Y,EAMA4Y,GAEP,IACI,IAAI5Y,EAAOpN,EAAGqN,wBAKd,YAJezK,IAAXwK,EAAKS,IACLT,EAAKS,EAAIT,EAAKE,KACdF,EAAKU,EAAIV,EAAK3B,KAEX2B,EACT,MAAOrX,GACL,MAAM,IAAI0tB,UAAU,uCAAyCzjB,IAUzEtM,EAAQyrB,cAAgB0G,EACxBnyB,EAAQqtB,cAAgBA,EACxBrtB,EAAQkuB,YAPR,SAAqBhU,EAAO5N,GACxB,IAAIoN,EAAO2T,EAAc/gB,GACzB,OAAO4N,EAAME,EAAIV,EAAK3B,KAAOmC,EAAME,EAAIV,EAAKoB,QAAUZ,EAAMC,EAAIT,EAAKE,MAAQM,EAAMC,EAAIT,EAAKkB,Q,6BC9ChG,IAAIoQ,EAAW,EAAQ,GAwFvB/qB,EAAOD,QAtFP,SAAuB4B,EAAQsF,GAY3BA,EAAUA,GAAW,GAErB,IAAIqrB,EAAcvH,EAASvoB,QAAQyE,EAAQqrB,aAAa,GAQxD,OAAO,SAAiBhpB,GAOpB,GALAA,EAAQA,GAASjH,OAAOiH,MACxB3H,EAAO4P,OAASjI,EAAMiI,QAAUjI,EAAMqf,YAAcrf,EAAMipB,eAC1D5wB,EAAO6mB,QAAUtmB,KACjBP,EAAOqF,KAAOsC,EAAMtC,KAEfsrB,EAAYhpB,GAAjB,CAOA,GAAIA,EAAMuS,cACNla,EAAOuY,EAAI5Q,EAAMuS,cAAc,GAAGgD,QAClCld,EAAOwY,EAAI7Q,EAAMuS,cAAc,GAAGiD,QAClCnd,EAAOsa,MAAQ3S,EAAMuS,cAAc,GAAGI,MACtCta,EAAOua,MAAQ5S,EAAMuS,cAAc,GAAGK,MACtCva,EAAO6wB,QAAUlpB,EAAMuS,cAAc,GAAG2W,QACxC7wB,EAAO8wB,QAAUnpB,EAAMuS,cAAc,GAAG4W,YACrC,CAOH,GAAoB,OAAhBnpB,EAAM2S,OAAoC,OAAlB3S,EAAMuV,QAAkB,CAChD,IAAI6T,EAAWppB,EAAMiI,QAAUjI,EAAMiI,OAAO4d,eAAiBpe,SACzDwH,EAAMma,EAASla,gBACf5F,EAAO8f,EAAS9f,KAEpBjR,EAAOsa,MAAQ3S,EAAMuV,SAAWtG,GAAOA,EAAIwV,YAAcnb,GAAQA,EAAKmb,YAAc,IAAMxV,GAAOA,EAAIoa,YAAc/f,GAAQA,EAAK+f,YAAc,GAC9IhxB,EAAOua,MAAQ5S,EAAMwV,SAAWvG,GAAOA,EAAIN,WAAarF,GAAQA,EAAKqF,WAAa,IAAMM,GAAOA,EAAIqa,WAAahgB,GAAQA,EAAKggB,WAAa,QAE1IjxB,EAAOsa,MAAQ3S,EAAM2S,MACrBta,EAAOua,MAAQ5S,EAAM4S,MAQzBva,EAAOuY,EAAI5Q,EAAMuV,QACjBld,EAAOwY,EAAI7Q,EAAMwV,QAEjBnd,EAAO6wB,QAAUlpB,EAAMkpB,QACvB7wB,EAAO8wB,QAAUnpB,EAAMmpB,QAG3B9wB,EAAOkd,QAAUld,EAAOuY,EACxBvY,EAAOmd,QAAUnd,EAAOwY,M,6BC7EhC,IAGQ0Y,EAHJC,OAAe,EACS,mBAAjBnyB,OAAOY,QAEVsxB,EAAO,aADbC,EAES,SAAUjxB,EAAWkxB,GAC1B,GAAIlxB,IAAclB,OAAOkB,IAA4B,OAAdA,EACrC,MAAMiuB,UAAU,uCAElB+C,EAAKhxB,UAAYA,GAAa,GAC9B,IAAIwvB,EAAS,IAAIwB,EAUjB,OATAA,EAAKhxB,UAAY,UARN,IASPkxB,GACFpyB,OAAO6rB,iBAAiB6E,EAAQ0B,GAIhB,OAAdlxB,IACFwvB,EAAO2B,UAAY,MAEd3B,IAIXyB,EAAenyB,OAAOY,OAGxB,IAAI0xB,EAAiBH,EAEjBI,EAAkB,CAAC,SAAU,SAAU,UAAW,UAAW,UAAW,UAAW,UAAW,YAAa,YAAa,UAAW,UAAW,QAAS,QAAS,SAAU,gBAAiB,UAAW,UAAW,WAAY,QAAS,IAAK,KA4F/O,SAASC,EAAeC,EAAiBC,GACrCA,EAAWA,GAAY,GAEvB,IADA,IAAI3uB,EAAWuuB,EAAeG,GACrBnzB,EAAI,EAAGA,EAAIizB,EAAgBrwB,OAAQ5C,SACHgP,IAAjCokB,EAASH,EAAgBjzB,MAAmByE,EAASwuB,EAAgBjzB,IAAMozB,EAASH,EAAgBjzB,KAG5G,OAAOyE,EAGX,SAAS4uB,EAAWlxB,EAAG6G,GACnBsqB,QAAQC,IAAI,QAASvqB,GACrB7G,EAAE6G,KAAOA,GAAQ,GACjB7G,EAAEqxB,WAAa,YAOnBzzB,EAAOD,QA9GP,SAA0ByoB,GAEtB,IAAI4K,EAAkB,CAClBZ,QAAS,EACTC,QAAS,EACT5T,QAAS,EACTC,QAAS,EACTE,SAAS,EACT0U,UAAU,EACVC,QAAQ,EACR5U,SAAS,EACTxF,OAAQ,EACRD,QAAS,EACTsa,cAAe,KACfC,OAAQ,MAOZ,SAAS7H,EAAO5pB,GACZ,IAAK,IAAInC,EAAI,EAAGA,EAAIizB,EAAgBrwB,OAAQ5C,IACxCmzB,EAAgBF,EAAgBjzB,IAAMmC,EAAE8wB,EAAgBjzB,IA6DhE,YAnEgBgP,IAAZuZ,GACAA,EAAQlY,iBAAiB,YAAa0b,GAkEnC,CACHnb,QANJ,WACQ2X,GAASA,EAAQH,oBAAoB,YAAa2D,GAAQ,GAC9DoH,EAAkB,MAKlB3F,SA1DIqG,WACO,SAAYtL,EAAS6K,EAAUpqB,GAClC,IAAIyY,EAAM,IAAIoS,WAAW,YAAaX,EAAeC,EAAiBC,IAKtE,OAFAC,EAAW5R,EAAKzY,GAETuf,EAAQkB,cAAchI,IAEM,mBAAzB3Q,SAASuY,YAChB,SAAYd,EAAS6K,EAAUpqB,GAClC,IAAIvE,EAAWyuB,EAAeC,EAAiBC,GAC3C3R,EAAM3Q,SAASuY,YAAY,eAqB/B,OAnBA5H,EAAIqS,eAAe,aAAa,GAChC,EACA1xB,OACA,EACAqC,EAAS8tB,QACT9tB,EAAS+tB,QACT/tB,EAASma,QACTna,EAASoa,QACTpa,EAASsa,QACTta,EAASivB,OACTjvB,EAASgvB,SACThvB,EAASqa,QACTra,EAAS6U,OACT7U,EAASkvB,eAITN,EAAW5R,EAAKzY,GAETuf,EAAQkB,cAAchI,IAEY,mBAA/B3Q,SAASyY,kBAChB,SAAYhB,EAAS6K,EAAUpqB,GAClC,IAAIyY,EAAM3Q,SAASyY,oBACf9kB,EAAWyuB,EAAeC,EAAiBC,GAC/C,IAAK,IAAI7yB,KAAQkE,EACbgd,EAAIlhB,GAAQkE,EAASlE,GAMzB,OAFA8yB,EAAW5R,EAAKzY,GAETuf,EAAQkB,cAAchI,SAX9B,K,qPCzFX,gBAAOje,MAAMC,eACfD,MAAMC,YAAc,IAGtB,SAAUmB,GACR,IAAImvB,EAAmB3xB,OAAO2xB,kBAAoB3xB,OAAO4xB,uBAIpDD,KACHA,EAAmB,cAEFnyB,UAAUqyB,QAAU,aAErCF,EAAiBnyB,UAAUsyB,WAAa,cAQ1C1wB,MAAMC,YAAYoM,WAAalM,QAAQwwB,MAAMtwB,OAAO,CAEhDuwB,MAAO,KACPC,SAAU,KACVC,MAAO,KACPC,QAAS,KACTC,aAAc,KACdC,cAAe,KACfC,SAAU,KACVC,WAAY,KACZ7sB,WAAY,KACZ8sB,aAAc,KACdC,eAAgB,KAChBC,aAAc,KACdC,aAAa,EAEbC,MAAO,KACPC,IAAK,KACLC,KAAM,KACNC,aAAc,KACdC,WAAY,KACZC,YAAa,KAEbC,UAAW,KACXC,SAAU,KAEVC,gBAAgB,EAChBC,WAAY,KACZC,UAAW,KAKXlxB,KAAM,SAASC,GACbxC,KAAKwM,OACLxM,KAAKyC,YAAYD,EAAU,CACzBkxB,WAAW,IAGb1zB,KAAKkzB,aAAevwB,IACpB3C,KAAKmzB,WAAaxwB,IAClB3C,KAAKozB,YAAczwB,IACnB3C,KAAKqzB,UAAY1wB,IAEjB3C,KAAKwzB,WAAa,GAClBxzB,KAAKyzB,UAAY,GAGjBzzB,KAAKszB,SAAW,IAAIxB,EAAiBnvB,EAAE6D,OAAM,SAASmtB,GACpD,IAAK,IAAI51B,EAAI,EAAGA,EAAI41B,EAAUhzB,OAAQ5C,IACpCiC,KAAKqzB,UAAYrzB,KAAKqzB,UAAUjtB,IAAIutB,EAAU51B,GAAG61B,cAElD5zB,OAEH,IAAMsL,EAAa3I,EAAE,8EAA8EqB,SAAStC,QAAQkP,MAEpH5Q,KAAKmyB,MAAQxvB,EAAE,sBAAsBqB,SAASsH,GAC9CtL,KAAKoyB,SAAWzvB,EAAE,yBAAyBqB,SAAShE,KAAKmyB,OACzDnyB,KAAKqyB,MAAQ1vB,EAAE,sBAAsBqB,SAAShE,KAAKoyB,UACnDpyB,KAAKsyB,QAAU3vB,EAAE,wBAAwBqB,SAASsH,GAClDtL,KAAK6yB,aAAelwB,EAAE,6BAA6BqB,SAASsH,GAE5DtL,KAAKuyB,aAAe5vB,EAAE,8BAA8BqB,SAAShE,KAAKsyB,SAClEtyB,KAAKwyB,cAAgB7vB,EAAE,+BAA+BqB,SAAShE,KAAKsyB,SAEpEtyB,KAAK4yB,eAAiBjwB,EAAE,gCAAgCqB,SAAShE,KAAKuyB,cAEtEvyB,KAAK6F,WAAalD,EAAE,iDAAiDoR,KAAKxS,MAAMtC,EAAE,eAAgB,WAAW+E,SAAShE,KAAKuyB,cAC3HvyB,KAAK0yB,WAAa/vB,EAAE,4CAA4CoR,KAAKxS,MAAMtC,EAAE,eAAgB,WAAW+E,SAAShE,KAAKwyB,eACtHxyB,KAAKyyB,SAAW9vB,EAAE,mDAAmDoR,KAAKxS,MAAMtC,EAAE,eAAgB,SAAS+E,SAAShE,KAAKwyB,eACzHxyB,KAAK2yB,aAAehwB,EAAE,gCAAgCqB,SAAShE,KAAKwyB,eAEpExyB,KAAK6zB,aAAavoB,GAClB,IACMwoB,EAAW,CACf5oB,OAFavI,EAAE,WAAWiE,OAM5BrF,MAAMoG,kBAAkB,kCAAmCmsB,EAAUnxB,EAAE6D,OAAM,SAASoB,EAAUC,GAC3E,YAAfA,GACF7H,KAAK6yB,aAAarnB,SAAS,UAC3BxL,KAAK+zB,aAAansB,IAElB5H,KAAK2O,YAEN3O,QAQL+zB,aAAc,SAASC,GACrB,IAAMtQ,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAK+yB,MAAQ7yB,EAAE6yB,MACf/yB,KAAKgzB,IAAM9yB,EAAE8yB,IACbhzB,KAAKizB,KAAO/yB,EAAE+yB,KAEdjzB,KAAKuzB,gBAAiB,EACtBvzB,KAAKi0B,gBACDj0B,KAAKk0B,SACPl0B,KAAKm0B,eAGPn0B,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcJ,IASrBI,cAAe,SAASJ,GACtB,IAAM9tB,EAAOlG,KACPq0B,EAAQ3yB,QAAQ4yB,KAAK9wB,KAAK,QAE1BuvB,EAAQpwB,EAAEqxB,EAAS1sB,MACnB0rB,EAAMrwB,EAAEqxB,EAASO,IAAIC,OAAO,UAC5BvB,EAAOtwB,EAAEqxB,EAAS3qB,KAAKmrB,OAAO,eAG9BC,EAAYxB,EAAKuB,OAAO,QAAQE,KAAK,SAAS,GAC9CC,EAAa1B,EAAKuB,OAAO,SAE/BC,EAAUvqB,MAAK,WACb,IAAM0qB,EAAQjyB,EAAE3C,MACV60B,EAAMD,EAAMF,KAAK,QAElBxuB,EAAKutB,UAAU7zB,eAAei1B,KACjCR,EAAMnoB,OAAO0oB,GACb1uB,EAAKutB,UAAUoB,GAAOD,MAU1B,IAAME,EAAW9B,EAAIwB,OAAO,SACtBO,EAAY/B,EAAIwB,OAAO,eAEvBQ,EAAU,GAChBF,EAAS5qB,MAAK,WACZ,IACM2qB,EADQlyB,EAAE3C,MACE00B,KAAK,OAClBxuB,EAAKstB,WAAW5zB,eAAei1B,KAClCG,EAAQ3uB,KAAKwuB,GACb3uB,EAAKstB,WAAWqB,IAAO,MAc3BlyB,EAAEsyB,KAAKj1B,KAAKk1B,mBAAmBF,IAAUG,KAVxB,SAAXzR,IACJxd,EAAKyZ,IAAI,qBAAsB+D,GAC/Bxd,EAAKmI,QAAQ,gBAAiB,CAC5BgB,OAAQrP,KACR+yB,MAAOA,EACPC,IAAK+B,EACL9B,KAAM0B,IAIoCjR,IAG9C1jB,KAAK6F,WAAW4F,YAAY,UAC5BzL,KAAKyyB,SAAShnB,YAAY,YAC1BzL,KAAK0yB,WAAWjnB,YAAY,aAQ9BypB,mBAAoB,SAASE,GAC3B,IAAIC,EAAaD,EAAMz0B,OAEvB,GAAI00B,EAAa,EACf,IAAK,IAAIt3B,EAAI,EAAGA,EAAIq3B,EAAMz0B,OAAQ5C,IAAK,CACrC,IAAM82B,EAAMO,EAAMr3B,IAEb82B,EAAIzY,QAAQ,uBAAyB,GACvCyY,EAAIzY,QAAQ,8BAAgC,GAC5CyY,EAAIzY,QAAQ,iBAAmB,GAC/ByY,EAAIzY,QAAQ,oBAAsB,GAClCyY,EAAIzY,QAAQ,qBAAuB,GACnCyY,EAAIzY,QAAQ,kBAAoB,IAEjCzZ,EAAE2yB,UAAUT,EAAKlyB,EAAE6D,OAAM,SAASO,EAAMwuB,GACvB,YAAXA,EAGiB,MAFnBF,GAGEr1B,KAAKqO,QAAQ,qBAAsB,CACjCgB,OAAQrP,OAIZuB,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,oCAE/Ce,YAIPA,KAAKqO,QAAQ,qBAAsB,CACjCgB,OAAQrP,QAQdi0B,cAAe,WACbj0B,KAAK6F,WAAW2F,SAAS,UACzBxL,KAAK0yB,WAAWlnB,SAAS,YACzBxL,KAAKyyB,SAASjnB,SAAS,YAEvBxL,KAAKkD,YAAYlD,KAAK0yB,WAAY,WAAY,cAC9C1yB,KAAKkD,YAAYlD,KAAKyyB,SAAU,WAAY,aACvCzyB,KAAK8yB,cACR9yB,KAAKkD,YAAYlD,KAAK6F,WAAY,QAAS,eAC3C7F,KAAK8yB,aAAc,GAGrB9yB,KAAKyK,GAAG,OAAQzK,KAAKm0B,cACrBn0B,KAAKyK,GAAG,UAAWzK,KAAKw1B,iBAExBx1B,KAAKy1B,UAMPC,iBAAkB,WAChB11B,KAAK0yB,WAAWlnB,SAAS,YACzBxL,KAAKyyB,SAASjnB,SAAS,YAEvBxL,KAAKqD,eAAerD,KAAK0yB,WAAY,YACrC1yB,KAAKqD,eAAerD,KAAKyyB,SAAU,YAEnCzyB,KAAK2f,IAAI,OAAQ3f,KAAKm0B,cACtBn0B,KAAK2f,IAAI,UAAW3f,KAAKw1B,iBAEzBx1B,KAAK21B,WAMPxB,aAAc,SAASj0B,GACrB,IAAMgG,EAAOhG,GAAKA,EAAEmP,OAASnP,EAAEmP,OAASrP,KAGxC,GAAKkG,EAAKqtB,eAAV,CAIArtB,EAAKgtB,aAAehzB,GAAKA,EAAE6yB,MAAQ7yB,EAAE6yB,MAAQ7sB,EAAK6sB,MAAM6C,QACxD1vB,EAAKitB,WAAajzB,GAAKA,EAAE8yB,IAAM9yB,EAAE8yB,IAAM9sB,EAAK8sB,IAAI4C,QAChD1vB,EAAKktB,YAAclzB,GAAKA,EAAE+yB,KAAO/yB,EAAE+yB,KAAO/sB,EAAK+sB,KAAK2C,QAGpD1vB,EAAKmtB,UAAY1wB,IACjBuD,EAAKotB,SAAStB,QAAQtwB,QAAQkP,KAAK,GAAI,CAACilB,WAAW,EAAMC,SAAS,IAElE5vB,EAAKmsB,MAAMnmB,OAAOhG,EAAKgtB,cACvBxxB,QAAQkP,KAAK1E,OAAOhG,EAAKitB,YAGRjtB,EAAKmsB,MAAM7uB,KAAK,yBAEjCjC,MAAMuT,iBAaNnS,EAAEsyB,KAAK/uB,EAAKgvB,mBAAmBz2B,OAAOs3B,KAAK7vB,EAAKstB,cAAc2B,KAR7C,SAAXzR,IACJxd,EAAKyZ,IAAI,qBAAsB+D,GAG/Bpb,YAAW,WACTpC,EAAKotB,SAASrB,eACb,GAE8DvO,MASrE8R,gBAAiB,SAASt1B,GACxB,IAAMgG,EAAOhG,GAAKA,EAAEmP,OAASnP,EAAEmP,OAASrP,KAExCkG,EAAKgtB,aAAaxpB,SAClBxD,EAAKitB,WAAWzpB,SAChBxD,EAAKktB,YAAY1pB,SACjBxD,EAAKmtB,UAAU3pB,UAOjBssB,WAAY,WACVh2B,KAAKi2B,QASPC,UAAW,SAASh2B,GAKlB,GAJIA,GACFA,EAAE6I,kBAGA/I,KAAKyyB,SAAS5hB,SAAS,aAAgB7Q,KAAK2yB,aAAa9hB,SAAS,UAAtE,CAIA7Q,KAAK01B,mBAEL11B,KAAK2yB,aAAalnB,YAAY,UAC9B,IAAM1E,EAAO/G,KAAKsL,WAAW6qB,YAEvBC,EAAUp2B,KAAKsL,WAAW9H,KAAK,yBAC/B1B,IAAKs0B,EAAQz1B,QAASy1B,EAAQxvB,MAEpCrF,MAAMoG,kBAAkB,iCAAkCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACzF7H,KAAK2yB,aAAannB,SAAS,UAE3B,IAAM6qB,EAAgC,YAAfxuB,EAEvB,GAAIwuB,GAAiBzuB,EAASE,QAC5B9H,KAAKi0B,iBAEM,IAAPnyB,EACF9B,KAAKqO,QAAQ,WAAY,CACvBgB,OAAQrP,KACR8R,MAAOlK,EAASkK,SAGlB9R,KAAKqO,QAAQ,YAAa,CACxBgB,OAAQrP,KACR8R,MAAOlK,EAASkK,QAGlBvQ,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,wBAA2B,CAACX,KAAMsJ,EAASkK,MAAMxT,SAGlG0B,KAAKi2B,YACA,GAAII,GAAiBzuB,EAASosB,SACnC,GAAIh0B,KAAKk0B,QAAS,CAChB,IAAMxQ,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAKi0B,gBACLj0B,KAAKw1B,kBACLx1B,KAAKm0B,aAAaj0B,GAClBF,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcxsB,EAASosB,UAE5BtyB,QAAQ40B,MAAMt2B,KAAKsL,iBAEnBtL,KAAKi0B,qBAGPj0B,KAAKi0B,gBAEL1yB,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,iCAE/Ce,SAOLgS,UAAW,SAASlQ,GAClB9B,KAAK01B,mBACL11B,KAAKkS,OACLlS,KAAKi0B,gBAELj0B,KAAK6yB,aAAapnB,YAAY,UAE9B,IACM1E,EAAO,CAAC,QAAWjF,EAAI,OADda,EAAE,WAAWiE,OAG5BrF,MAAMoG,kBAAkB,iCAAkCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACzF7H,KAAK6yB,aAAarnB,SAAS,UAE3B,IAAM6qB,EAAgC,YAAfxuB,EAEvB,GAAIwuB,GAAiBzuB,EAASE,QAAS,CACrC,IAAM4b,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAKw1B,kBACLx1B,KAAKm0B,aAAaj0B,GAClBF,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcxsB,EAASosB,eACnBqC,GAAiBzuB,EAAS2uB,OACnCh1B,MAAMwG,GAAGC,aAAaJ,EAAS2uB,OAE/Bv2B,KAAKi2B,SAEL10B,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,gCAE9Ce,KAAKi2B,UAENj2B,QAGLw2B,YAAa,SAASt2B,GAIpB,GAHAA,EAAE6I,iBACmB/I,KAAKy2B,qBAER,CAChBz2B,KAAK01B,mBAEL,IAAM3uB,EAAO/G,KAAKsL,WAAW6qB,YAEvB3nB,EAAU7L,EAAE3C,KAAKsL,YAAY9H,KAAK,yBAAyBoD,MAEjErF,MAAMoG,kBAAkB,mCAAoCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACrD,YAAfA,GAEFD,EAASE,SAE5BvG,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,mBAE/C0D,EAAE,gBAAkB6L,GAAS9E,SAE7B1J,KAAKi0B,gBACLj0B,KAAKi2B,SAEL10B,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,4BAE9Ce,KAAKi2B,UAENj2B,SAIPy2B,mBAAoB,WAClB,OAAOC,QAAQ,qEAOjBT,KAAM,WACCj2B,KAAK22B,WACR32B,KAAKwM,QAOTmC,QAAS,WAEP3O,KAAKwM,KAAKmC,UAEV3O,KAAK01B,mBACL11B,KAAKw1B,kBAELx1B,KAAK42B,OAAOltB,SACZ1J,KAAKsL,WAAW5B,SAEhB1J,KAAKqO,QAAQ,aAGjB,CAME7D,YAAa,WAKX,OAJKxK,KAAK62B,YACR72B,KAAK62B,UAAY,IAAIt1B,MAAMC,YAAYoM,YAGlC5N,KAAK62B,aAxgBpB,CA4gBGnqB,S,qPChhBC,gBAAOnL,MAAMC,eACfD,MAAMC,YAAc,IAGtB,SAAUmB,GACR,IAAImvB,EAAmB3xB,OAAO2xB,kBAAoB3xB,OAAO4xB,uBAIpDD,KACHA,EAAmB,cAEFnyB,UAAUqyB,QAAU,aAErCF,EAAiBnyB,UAAUsyB,WAAa,cAQ1C1wB,MAAMC,YAAY+I,iBAAmB7I,QAAQwwB,MAAMtwB,OAAO,CAEtDuwB,MAAO,KACPC,SAAU,KACVC,MAAO,KACPC,QAAS,KACTC,aAAc,KACdC,cAAe,KACfC,SAAU,KACVC,WAAY,KACZ7sB,WAAY,KACZ8sB,aAAc,KACdC,eAAgB,KAChBC,aAAc,KACdC,aAAa,EAEbC,MAAO,KACPC,IAAK,KACLC,KAAM,KACNC,aAAc,KACdC,WAAY,KACZC,YAAa,KAEbC,UAAW,KACXC,SAAU,KAEVC,gBAAgB,EAChBC,WAAY,KACZC,UAAW,KAKXlxB,KAAM,SAASC,GACbxC,KAAKwM,OACLxM,KAAKyC,YAAYD,EAAU,CACzBkxB,WAAW,IAGb1zB,KAAKkzB,aAAevwB,IACpB3C,KAAKmzB,WAAaxwB,IAClB3C,KAAKozB,YAAczwB,IACnB3C,KAAKqzB,UAAY1wB,IAEjB3C,KAAKwzB,WAAa,GAClBxzB,KAAKyzB,UAAY,GAGjBzzB,KAAKszB,SAAW,IAAIxB,EAAiBnvB,EAAE6D,OAAM,SAASmtB,GACpD,IAAK,IAAI51B,EAAI,EAAGA,EAAI41B,EAAUhzB,OAAQ5C,IACpCiC,KAAKqzB,UAAYrzB,KAAKqzB,UAAUjtB,IAAIutB,EAAU51B,GAAG61B,cAElD5zB,OAEH,IAAMsL,EAAa3I,EAAE,8EAA8EqB,SAAStC,QAAQkP,MAEpH5Q,KAAKmyB,MAAQxvB,EAAE,sBAAsBqB,SAASsH,GAC9CtL,KAAKoyB,SAAWzvB,EAAE,yBAAyBqB,SAAShE,KAAKmyB,OACzDnyB,KAAKqyB,MAAQ1vB,EAAE,sBAAsBqB,SAAShE,KAAKoyB,UACnDpyB,KAAKsyB,QAAU3vB,EAAE,wBAAwBqB,SAASsH,GAClDtL,KAAK6yB,aAAelwB,EAAE,6BAA6BqB,SAASsH,GAE5DtL,KAAKuyB,aAAe5vB,EAAE,8BAA8BqB,SAAShE,KAAKsyB,SAClEtyB,KAAKwyB,cAAgB7vB,EAAE,+BAA+BqB,SAAShE,KAAKsyB,SAEpEtyB,KAAK4yB,eAAiBjwB,EAAE,gCAAgCqB,SAAShE,KAAKuyB,cAEtEvyB,KAAK6F,WAAalD,EAAE,iDAAiDoR,KAAKxS,MAAMtC,EAAE,eAAgB,WAAW+E,SAAShE,KAAKuyB,cAC3HvyB,KAAK0yB,WAAa/vB,EAAE,4CAA4CoR,KAAKxS,MAAMtC,EAAE,eAAgB,WAAW+E,SAAShE,KAAKwyB,eACtHxyB,KAAKyyB,SAAW9vB,EAAE,mDAAmDoR,KAAKxS,MAAMtC,EAAE,eAAgB,SAAS+E,SAAShE,KAAKwyB,eACzHxyB,KAAK2yB,aAAehwB,EAAE,gCAAgCqB,SAAShE,KAAKwyB,eAEpExyB,KAAK6zB,aAAavoB,GAElBtL,KAAK6yB,aAAarnB,SAAS,UAM3BxL,KAAK+zB,aALY,CACfzsB,KAAM,GACNitB,GAAI,GACJlrB,IAAK,MAUT0qB,aAAc,SAASC,GACrB,IAAMtQ,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAK+yB,MAAQ7yB,EAAE6yB,MACf/yB,KAAKgzB,IAAM9yB,EAAE8yB,IACbhzB,KAAKizB,KAAO/yB,EAAE+yB,KAEdjzB,KAAKuzB,gBAAiB,EACtBvzB,KAAKi0B,gBACDj0B,KAAKk0B,SACPl0B,KAAKm0B,eAGPn0B,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcJ,IASrBI,cAAe,SAASJ,GACtB,IAAM9tB,EAAOlG,KACPq0B,EAAQ3yB,QAAQ4yB,KAAK9wB,KAAK,QAE1BuvB,EAAQpwB,EAAEqxB,EAAS1sB,MACnB0rB,EAAMrwB,EAAEqxB,EAASO,IAAIC,OAAO,UAC5BvB,EAAOtwB,EAAEqxB,EAAS3qB,KAAKmrB,OAAO,eAG9BC,EAAYxB,EAAKuB,OAAO,QAAQE,KAAK,SAAS,GAC9CC,EAAa1B,EAAKuB,OAAO,SAE/BC,EAAUvqB,MAAK,WACb,IAAM0qB,EAAQjyB,EAAE3C,MACV60B,EAAMD,EAAMF,KAAK,QAElBxuB,EAAKutB,UAAU7zB,eAAei1B,KACjCR,EAAMnoB,OAAO0oB,GACb1uB,EAAKutB,UAAUoB,GAAOD,MAU1B,IAAME,EAAW9B,EAAIwB,OAAO,SACtBO,EAAY/B,EAAIwB,OAAO,eAEvBQ,EAAU,GAChBF,EAAS5qB,MAAK,WACZ,IACM2qB,EADQlyB,EAAE3C,MACE00B,KAAK,OAClBxuB,EAAKstB,WAAW5zB,eAAei1B,KAClCG,EAAQ3uB,KAAKwuB,GACb3uB,EAAKstB,WAAWqB,IAAO,MAc3BlyB,EAAEsyB,KAAKj1B,KAAKk1B,mBAAmBF,IAAUG,KAVxB,SAAXzR,IACJxd,EAAKyZ,IAAI,qBAAsB+D,GAC/Bxd,EAAKmI,QAAQ,gBAAiB,CAC5BgB,OAAQrP,KACR+yB,MAAOA,EACPC,IAAK+B,EACL9B,KAAM0B,IAIoCjR,IAG9C1jB,KAAK6F,WAAW4F,YAAY,UAC5BzL,KAAKyyB,SAAShnB,YAAY,YAC1BzL,KAAK0yB,WAAWjnB,YAAY,aAQ9BypB,mBAAoB,SAASE,GAC3B,IAAIC,EAAaD,EAAMz0B,OAEvB,GAAI00B,EAAa,EACf,IAAK,IAAIt3B,EAAI,EAAGA,EAAIq3B,EAAMz0B,OAAQ5C,IAAK,CACrC,IAAM82B,EAAMO,EAAMr3B,IAGb82B,EAAIzY,QAAQ,uBAAyB,GACvCyY,EAAIzY,QAAQ,8BAAgC,GAC5CyY,EAAIzY,QAAQ,iBAAmB,GAC/ByY,EAAIzY,QAAQ,oBAAsB,GAClCyY,EAAIzY,QAAQ,qBAAuB,GACnCyY,EAAIzY,QAAQ,kBAAoB,IAEjCzZ,EAAE2yB,UAAUT,EAAKlyB,EAAE6D,OAAM,SAASO,EAAMwuB,GACvB,YAAXA,EAGiB,MAFnBF,GAGEr1B,KAAKqO,QAAQ,qBAAsB,CACjCgB,OAAQrP,OAIZuB,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,oCAE/Ce,YAIPA,KAAKqO,QAAQ,qBAAsB,CACjCgB,OAAQrP,QAQdi0B,cAAe,WACbj0B,KAAK6F,WAAW2F,SAAS,UACzBxL,KAAK0yB,WAAWlnB,SAAS,YACzBxL,KAAKyyB,SAASjnB,SAAS,YAEvBxL,KAAKkD,YAAYlD,KAAK0yB,WAAY,WAAY,cAC9C1yB,KAAKkD,YAAYlD,KAAKyyB,SAAU,WAAY,mBACvCzyB,KAAK8yB,cACR9yB,KAAKkD,YAAYlD,KAAK6F,WAAY,QAAS,qBAC3C7F,KAAK8yB,aAAc,GAGrB9yB,KAAKyK,GAAG,OAAQzK,KAAKm0B,cACrBn0B,KAAKyK,GAAG,UAAWzK,KAAKw1B,iBAExBx1B,KAAKy1B,UAMPC,iBAAkB,WAChB11B,KAAK0yB,WAAWlnB,SAAS,YACzBxL,KAAKyyB,SAASjnB,SAAS,YAEvBxL,KAAKqD,eAAerD,KAAK0yB,WAAY,YACrC1yB,KAAKqD,eAAerD,KAAKyyB,SAAU,YAEnCzyB,KAAK2f,IAAI,OAAQ3f,KAAKm0B,cACtBn0B,KAAK2f,IAAI,UAAW3f,KAAKw1B,iBAEzBx1B,KAAK21B,WAMPxB,aAAc,SAASj0B,GACrB,IAAMgG,EAAOhG,GAAKA,EAAEmP,OAASnP,EAAEmP,OAASrP,KAGxC,GAAKkG,EAAKqtB,eAAV,CAIArtB,EAAKgtB,aAAehzB,GAAKA,EAAE6yB,MAAQ7yB,EAAE6yB,MAAQ7sB,EAAK6sB,MAAM6C,QACxD1vB,EAAKitB,WAAajzB,GAAKA,EAAE8yB,IAAM9yB,EAAE8yB,IAAM9sB,EAAK8sB,IAAI4C,QAChD1vB,EAAKktB,YAAclzB,GAAKA,EAAE+yB,KAAO/yB,EAAE+yB,KAAO/sB,EAAK+sB,KAAK2C,QAGpD1vB,EAAKmtB,UAAY1wB,IACjBuD,EAAKotB,SAAStB,QAAQtwB,QAAQkP,KAAK,GAAI,CAACilB,WAAW,EAAMC,SAAS,IAElE5vB,EAAKmsB,MAAMnmB,OAAOhG,EAAKgtB,cACvBxxB,QAAQkP,KAAK1E,OAAOhG,EAAKitB,YAEzB5xB,MAAMuT,iBAaNnS,EAAEsyB,KAAK/uB,EAAKgvB,mBAAmBz2B,OAAOs3B,KAAK7vB,EAAKstB,cAAc2B,KAR7C,SAAXzR,IACJxd,EAAKyZ,IAAI,qBAAsB+D,GAG/Bpb,YAAW,WACTpC,EAAKotB,SAASrB,eACb,GAE8DvO,MASrE8R,gBAAiB,SAASt1B,GACxB,IAAMgG,EAAOhG,GAAKA,EAAEmP,OAASnP,EAAEmP,OAASrP,KAExCkG,EAAKgtB,aAAaxpB,SAClBxD,EAAKitB,WAAWzpB,SAChBxD,EAAKktB,YAAY1pB,SACjBxD,EAAKmtB,UAAU3pB,UAOjBssB,WAAY,WACVh2B,KAAKi2B,QASPa,gBAAiB,SAAS52B,GAKxB,GAJIA,GACFA,EAAE6I,kBAGA/I,KAAKyyB,SAAS5hB,SAAS,aAAgB7Q,KAAK2yB,aAAa9hB,SAAS,UAAtE,CAIA7Q,KAAK01B,mBAEL11B,KAAK2yB,aAAalnB,YAAY,UAC9B,IAAM1E,EAAO/G,KAAKsL,WAAW6qB,YAEvBC,EAAUp2B,KAAKsL,WAAW9H,KAAK,iCAC1B4yB,EAAQz1B,QAASy1B,EAAQxvB,MAEpCrF,MAAMoG,kBAAkB,6CAA8CZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACrG7H,KAAK2yB,aAAannB,SAAS,UAE3B,IAAM6qB,EAAgC,YAAfxuB,EAEvB,GAAIwuB,GAAiBzuB,EAASE,QAC5B9H,KAAKi0B,gBAELj0B,KAAKqO,QAAQ,kBAAmB,CAC9BgB,OAAQrP,KACR0K,YAAa9C,EAAS8C,cAGxBnJ,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,8BAAiC,CAACX,KAAMsJ,EAAS8C,YAAYpM,QAE5G0B,KAAKi2B,YACA,GAAII,GAAiBzuB,EAASosB,SACnC,GAAIh0B,KAAKk0B,QAAS,CAChB,IAAMxQ,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAKi0B,gBACLj0B,KAAKw1B,kBACLx1B,KAAKm0B,aAAaj0B,GAClBF,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcxsB,EAASosB,UAE5BtyB,QAAQ40B,MAAMt2B,KAAKsL,iBAEnBtL,KAAKi0B,qBAGPj0B,KAAKi0B,gBAEL1yB,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,iCAE/Ce,SAOLyM,gBAAiB,SAAS3K,GACxB9B,KAAK01B,mBACL11B,KAAKkS,OACLlS,KAAKi0B,gBAELj0B,KAAK6yB,aAAapnB,YAAY,UAE9B,IACM1E,EAAO,CACX,cAAiBjF,EACjB,OAHaa,EAAE,WAAWiE,OAM5BrF,MAAMoG,kBAAkB,6CAA8CZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACrG7H,KAAK6yB,aAAarnB,SAAS,UAE3B,IAAM6qB,EAAgC,YAAfxuB,EAEvB,GAAIwuB,GAAiBzuB,EAASE,QAAS,CACrC,IAAM4b,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAKw1B,kBACLx1B,KAAKm0B,aAAaj0B,GAClBF,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcxsB,EAASosB,eACnBqC,GAAiBzuB,EAAS2uB,OACnCh1B,MAAMwG,GAAGC,aAAaJ,EAAS2uB,OAE/Bv2B,KAAKi2B,SAEL10B,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,gCAE9Ce,KAAKi2B,UAENj2B,QAGL+2B,kBAAmB,SAAS72B,GAI1B,GAHAA,EAAE6I,iBACmB/I,KAAKg3B,2BAER,CAChBh3B,KAAK01B,mBAEL,IAAM3uB,EAAO/G,KAAKsL,WAAW6qB,YAEvB/rB,EAAgBzH,EAAE3C,KAAKsL,YAAY9H,KAAK,+BAA+BoD,MAE7ErF,MAAMoG,kBAAkB,+CAAgDZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACjE,YAAfA,GAEFD,EAASE,SAE5BvG,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,yBAE/C0D,EAAE,gCAAkCyH,GAAeV,SAEnD1J,KAAKi0B,gBACLj0B,KAAKi2B,SAEL10B,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,kCAE9Ce,KAAKi2B,UAENj2B,SAIPg3B,yBAA0B,WACxB,OAAON,QAAQ,+EAOjBT,KAAM,WACCj2B,KAAK22B,WACR32B,KAAKwM,QAOTmC,QAAS,WACP3O,KAAKwM,KAAKmC,UAEV3O,KAAK01B,mBACL11B,KAAKw1B,kBAELx1B,KAAK42B,OAAOltB,SACZ1J,KAAKsL,WAAW5B,SAEhB1J,KAAKqO,QAAQ,aAGjB,CAME7D,YAAa,WAKX,OAJKxK,KAAK62B,YACR72B,KAAK62B,UAAY,IAAIt1B,MAAMC,YAAY+I,kBAGlCvK,KAAK62B,aA3fpB,CA+fGnqB,S,wLCjgBGuqB,E,WAEJ,WAAYz0B,I,4FAAU,SACpB,IAAMiF,EAAOzH,KAEbA,KAAKk3B,qBAAsD,IAA7B10B,EAAS00B,gBACnC10B,EAAS00B,gBACT,GAGJl3B,KAAKm3B,iBAGLn3B,KAAKo3B,wBAELp3B,KAAKq3B,gCAA4E,IAAxC70B,EAAS60B,2BAC9C70B,EAAS60B,2BACT,GAEJr3B,KAAKq3B,2BAA2BlX,SAAQ,SAASmX,GAE/C30B,EAAE20B,GAAWpwB,QAAO,WAClBO,EAAK2vB,8B,gEAMT,IAAM3vB,EAAOzH,KAGP+G,EAAO,CACX,cAHoBpE,EAAE,kBAAkBiE,OAsB1C,OAhBArF,MAAMoG,kBAAkB,mDAAoDZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GAE3G,GADsC,YAAfA,GACFD,EAASE,QAAS,CACrC,IAAMyvB,EAAO3vB,EAAS4vB,iBACtB70B,EAAE,oBAAoBuH,MAAK,SAASgkB,GAClC,IAAMuJ,EAAK90B,EAAE3C,MACby3B,EAAGC,QACH,IAAM3S,EAAQwS,EAAKrJ,GAAL,MACR3e,EAASgoB,EAAKrJ,GAAL,MACfuJ,EAAGvrB,OAAO,8DAAgEzE,EAAKyvB,gBAAkB,mBAAqBhJ,EAAQ,+CAAiD3e,EAAS,KAAOwV,EAAQ,yFAA2FA,EAAQ,wBAA0BxV,EAAS,0BAG/UhO,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,oCAE/Ce,OAEI,O,8CAIP,IACM23B,EAAmB,kBADC33B,KAAKk3B,gBAAgB/tB,QAAQ,MAAO,KACG,mBAEjExG,EAAEg1B,GAAkBn0B,KAAK,qBAAqBkG,SAC9C/G,EAAEg1B,GAAkBn0B,KAAK,qBAAqB6F,IAAI,QAAS,OAC3D1G,EAAEg1B,GAAkBn0B,KAAK,qBAAqB6F,IAAI,QAAS,OAE3D,IAAMuuB,EAAe53B,KAAK63B,eAAe,uBAGnC9wB,EAAOpE,EAAE,kBAAkBiN,QAAQ,QAAQumB,YAE3C1uB,EAAOzH,KAEbuB,MAAMoG,kBAAkB,0DAA2DZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GAGlH,GAFsC,YAAfA,GAEFD,EAASE,QAAS,CACrC,IAAMyvB,EAAO3vB,EAASkwB,wBAEtB,GAAoB,IAAhBP,EAAK52B,OACP,OAAO,EAGTi3B,EAAa1tB,MAAK,SAASgkB,GACzB,IAAM6J,EAAUp1B,EAAE3C,MAAMwD,KAAK,UACvBw0B,EAAST,EAAKrJ,GAEpBzmB,EAAKwwB,qBAAqBF,EAASC,WAGrCz2B,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,oCAE/Ce,S,uCAG4B,IAAlBmY,EAAkB,uDAAN,KAIzB,OAHkB,OAAdA,IACFA,EAAY,oBAEPxV,EAAEwV,K,2CAGU4f,EAASC,GAC5BD,EAAQL,QAER,IAAIQ,EAAW,GACXC,GAAgB,EAGpB,IAFAJ,EAAQ7rB,OAAO,oBAAsB3K,MAAMtC,EAAE,eAAgB,QAAU,aAElElB,EAAI,EAAGA,EAAIi6B,EAAOr3B,OAAQ5C,IAAK,CAClC,IAAM+T,EAAQkmB,EAAOj6B,GACjBq6B,EAAe,GACbC,EAAWt6B,IAAOi6B,EAAOr3B,OAAS,EAElC,aAAcmR,IACd,aAAcA,IAChBsmB,EAAe,YAEjBF,GAAY,WAAaE,EAAe,WAAatmB,EAAK,MAAY,KAAOA,EAAK,MAAY,cAG3F,aAAcA,GAASqmB,GAAmBE,GAAYF,KACzDD,GAAY,cACZC,GAAgB,GAGd,aAAcrmB,IAChBomB,GAAY,oBAAsBpmB,EAAK,SAAe,KACtDqmB,GAAgB,GAIpBJ,EAAQ7rB,OAAOgsB,Q,gCAInB/3B,OAAO82B,uBAAyBA,G,qPCpI5B,gBAAO11B,MAAMC,eACfD,MAAMC,YAAc,IAGtB,SAAUmB,GACR,IAAImvB,EAAmB3xB,OAAO2xB,kBAAoB3xB,OAAO4xB,uBAIpDD,KACHA,EAAmB,cAEFnyB,UAAUqyB,QAAU,aAErCF,EAAiBnyB,UAAUsyB,WAAa,cAQ1C1wB,MAAMC,YAAYoJ,UAAYlJ,QAAQwwB,MAAMtwB,OAAO,CAE/CuwB,MAAO,KACPC,SAAU,KACVC,MAAO,KACPC,QAAS,KACTC,aAAc,KACdC,cAAe,KACfC,SAAU,KACVC,WAAY,KACZ7sB,WAAY,KACZ8sB,aAAc,KACdC,eAAgB,KAChBC,aAAc,KACdC,aAAa,EAEbC,MAAO,KACPC,IAAK,KACLC,KAAM,KACNC,aAAc,KACdC,WAAY,KACZC,YAAa,KAEbC,UAAW,KACXC,SAAU,KAEVC,gBAAgB,EAChBC,WAAY,KACZC,UAAW,KAKXlxB,KAAM,SAASC,GACbxC,KAAKwM,OACLxM,KAAKyC,YAAYD,EAAU,CACzBkxB,WAAW,IAGb1zB,KAAKkzB,aAAevwB,IACpB3C,KAAKmzB,WAAaxwB,IAClB3C,KAAKozB,YAAczwB,IACnB3C,KAAKqzB,UAAY1wB,IAEjB3C,KAAKwzB,WAAa,GAClBxzB,KAAKyzB,UAAY,GAGjBzzB,KAAKszB,SAAW,IAAIxB,EAAiBnvB,EAAE6D,OAAM,SAASmtB,GACpD,IAAK,IAAI51B,EAAI,EAAGA,EAAI41B,EAAUhzB,OAAQ5C,IACpCiC,KAAKqzB,UAAYrzB,KAAKqzB,UAAUjtB,IAAIutB,EAAU51B,GAAG61B,cAElD5zB,OAEH,IAAMsL,EAAa3I,EAAE,8EAA8EqB,SAAStC,QAAQkP,MAEpH5Q,KAAKmyB,MAAQxvB,EAAE,sBAAsBqB,SAASsH,GAC9CtL,KAAKoyB,SAAWzvB,EAAE,yBAAyBqB,SAAShE,KAAKmyB,OACzDnyB,KAAKqyB,MAAQ1vB,EAAE,sBAAsBqB,SAAShE,KAAKoyB,UACnDpyB,KAAKsyB,QAAU3vB,EAAE,wBAAwBqB,SAASsH,GAClDtL,KAAK6yB,aAAelwB,EAAE,6BAA6BqB,SAASsH,GAE5DtL,KAAKuyB,aAAe5vB,EAAE,8BAA8BqB,SAAShE,KAAKsyB,SAClEtyB,KAAKwyB,cAAgB7vB,EAAE,+BAA+BqB,SAAShE,KAAKsyB,SAEpEtyB,KAAK4yB,eAAiBjwB,EAAE,gCAAgCqB,SAAShE,KAAKuyB,cAEtEvyB,KAAK6F,WAAalD,EAAE,iDAAiDoR,KAAKxS,MAAMtC,EAAE,eAAgB,WAAW+E,SAAShE,KAAKuyB,cAC3HvyB,KAAK0yB,WAAa/vB,EAAE,4CAA4CoR,KAAKxS,MAAMtC,EAAE,eAAgB,WAAW+E,SAAShE,KAAKwyB,eACtHxyB,KAAKyyB,SAAW9vB,EAAE,mDAAmDoR,KAAKxS,MAAMtC,EAAE,eAAgB,SAAS+E,SAAShE,KAAKwyB,eACzHxyB,KAAK2yB,aAAehwB,EAAE,gCAAgCqB,SAAShE,KAAKwyB,eAEpExyB,KAAK6zB,aAAavoB,GAElBtL,KAAK6yB,aAAarnB,SAAS,UAM3BxL,KAAK+zB,aALY,CACfzsB,KAAM,GACNitB,GAAI,GACJlrB,IAAK,MAUT0qB,aAAc,SAASC,GACrB,IAAMtQ,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAK+yB,MAAQ7yB,EAAE6yB,MACf/yB,KAAKgzB,IAAM9yB,EAAE8yB,IACbhzB,KAAKizB,KAAO/yB,EAAE+yB,KAEdjzB,KAAKuzB,gBAAiB,EACtBvzB,KAAKi0B,gBACDj0B,KAAKk0B,SACPl0B,KAAKm0B,eAGPn0B,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcJ,IASrBI,cAAe,SAASJ,GACtB,IAAM9tB,EAAOlG,KACPq0B,EAAQ3yB,QAAQ4yB,KAAK9wB,KAAK,QAE1BuvB,EAAQpwB,EAAEqxB,EAAS1sB,MACnB0rB,EAAMrwB,EAAEqxB,EAASO,IAAIC,OAAO,UAC5BvB,EAAOtwB,EAAEqxB,EAAS3qB,KAAKmrB,OAAO,eAG9BC,EAAYxB,EAAKuB,OAAO,QAAQE,KAAK,SAAS,GAC9CC,EAAa1B,EAAKuB,OAAO,SAE/BC,EAAUvqB,MAAK,WACb,IAAM0qB,EAAQjyB,EAAE3C,MACV60B,EAAMD,EAAMF,KAAK,QAElBxuB,EAAKutB,UAAU7zB,eAAei1B,KACjCR,EAAMnoB,OAAO0oB,GACb1uB,EAAKutB,UAAUoB,GAAOD,MAU1B,IAAME,EAAW9B,EAAIwB,OAAO,SACtBO,EAAY/B,EAAIwB,OAAO,eAEvBQ,EAAU,GAChBF,EAAS5qB,MAAK,WACZ,IACM2qB,EADQlyB,EAAE3C,MACE00B,KAAK,OAClBxuB,EAAKstB,WAAW5zB,eAAei1B,KAClCG,EAAQ3uB,KAAKwuB,GACb3uB,EAAKstB,WAAWqB,IAAO,MAc3BlyB,EAAEsyB,KAAKj1B,KAAKk1B,mBAAmBF,IAAUG,KAVxB,SAAXzR,IACJxd,EAAKyZ,IAAI,qBAAsB+D,GAC/Bxd,EAAKmI,QAAQ,gBAAiB,CAC5BgB,OAAQrP,KACR+yB,MAAOA,EACPC,IAAK+B,EACL9B,KAAM0B,IAIoCjR,IAG9C1jB,KAAK6F,WAAW4F,YAAY,UAC5BzL,KAAKyyB,SAAShnB,YAAY,YAC1BzL,KAAK0yB,WAAWjnB,YAAY,aAQ9BypB,mBAAoB,SAASE,GAC3B,IAAIC,EAAaD,EAAMz0B,OAEvB,GAAI00B,EAAa,EACf,IAAK,IAAIt3B,EAAI,EAAGA,EAAIq3B,EAAMz0B,OAAQ5C,IAAK,CACrC,IAAM82B,EAAMO,EAAMr3B,IAEb82B,EAAIzY,QAAQ,uBAAyB,GACvCyY,EAAIzY,QAAQ,8BAAgC,GAC5CyY,EAAIzY,QAAQ,iBAAmB,GAC/ByY,EAAIzY,QAAQ,oBAAsB,GAClCyY,EAAIzY,QAAQ,qBAAuB,GACnCyY,EAAIzY,QAAQ,kBAAoB,IAEjCzZ,EAAE2yB,UAAUT,EAAKlyB,EAAE6D,OAAM,SAASO,EAAMwuB,GACvB,YAAXA,EAGiB,MAFnBF,GAGEr1B,KAAKqO,QAAQ,qBAAsB,CACjCgB,OAAQrP,OAIZuB,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,oCAE/Ce,YAIPA,KAAKqO,QAAQ,qBAAsB,CACjCgB,OAAQrP,QAQdi0B,cAAe,WACbj0B,KAAK6F,WAAW2F,SAAS,UACzBxL,KAAK0yB,WAAWlnB,SAAS,YACzBxL,KAAKyyB,SAASjnB,SAAS,YAEvBxL,KAAKkD,YAAYlD,KAAK0yB,WAAY,WAAY,cAC9C1yB,KAAKkD,YAAYlD,KAAKyyB,SAAU,WAAY,YACvCzyB,KAAK8yB,cACR9yB,KAAKkD,YAAYlD,KAAK6F,WAAY,QAAS,cAC3C7F,KAAK8yB,aAAc,GAGrB9yB,KAAKyK,GAAG,OAAQzK,KAAKm0B,cACrBn0B,KAAKyK,GAAG,UAAWzK,KAAKw1B,iBAExBx1B,KAAKy1B,UAMPC,iBAAkB,WAChB11B,KAAK0yB,WAAWlnB,SAAS,YACzBxL,KAAKyyB,SAASjnB,SAAS,YAEvBxL,KAAKqD,eAAerD,KAAK0yB,WAAY,YACrC1yB,KAAKqD,eAAerD,KAAKyyB,SAAU,YAEnCzyB,KAAK2f,IAAI,OAAQ3f,KAAKm0B,cACtBn0B,KAAK2f,IAAI,UAAW3f,KAAKw1B,iBAEzBx1B,KAAK21B,WAMPxB,aAAc,SAASj0B,GACrB,IAAMgG,EAAOhG,GAAKA,EAAEmP,OAASnP,EAAEmP,OAASrP,KAGxC,GAAKkG,EAAKqtB,eAAV,CAIArtB,EAAKgtB,aAAehzB,GAAKA,EAAE6yB,MAAQ7yB,EAAE6yB,MAAQ7sB,EAAK6sB,MAAM6C,QACxD1vB,EAAKitB,WAAajzB,GAAKA,EAAE8yB,IAAM9yB,EAAE8yB,IAAM9sB,EAAK8sB,IAAI4C,QAChD1vB,EAAKktB,YAAclzB,GAAKA,EAAE+yB,KAAO/yB,EAAE+yB,KAAO/sB,EAAK+sB,KAAK2C,QAGpD1vB,EAAKmtB,UAAY1wB,IACjBuD,EAAKotB,SAAStB,QAAQtwB,QAAQkP,KAAK,GAAI,CAACilB,WAAW,EAAMC,SAAS,IAElE5vB,EAAKmsB,MAAMnmB,OAAOhG,EAAKgtB,cACvBxxB,QAAQkP,KAAK1E,OAAOhG,EAAKitB,YAEzB5xB,MAAMuT,iBAaNnS,EAAEsyB,KAAK/uB,EAAKgvB,mBAAmBz2B,OAAOs3B,KAAK7vB,EAAKstB,cAAc2B,KAR7C,SAAXzR,IACJxd,EAAKyZ,IAAI,qBAAsB+D,GAG/Bpb,YAAW,WACTpC,EAAKotB,SAASrB,eACb,GAE8DvO,MASrE8R,gBAAiB,SAASt1B,GACxB,IAAMgG,EAAOhG,GAAKA,EAAEmP,OAASnP,EAAEmP,OAASrP,KAExCkG,EAAKgtB,aAAaxpB,SAClBxD,EAAKitB,WAAWzpB,SAChBxD,EAAKktB,YAAY1pB,SACjBxD,EAAKmtB,UAAU3pB,UAOjBssB,WAAY,WACVh2B,KAAKi2B,QASPqC,SAAU,SAASp4B,GAKjB,GAJIA,GACFA,EAAE6I,kBAGA/I,KAAKyyB,SAAS5hB,SAAS,aAAgB7Q,KAAK2yB,aAAa9hB,SAAS,UAAtE,CAIA7Q,KAAK01B,mBAEL11B,KAAK2yB,aAAalnB,YAAY,UAC9B,IAAM1E,EAAO/G,KAAKsL,WAAW6qB,YAEvBC,EAAUp2B,KAAKsL,WAAW9H,KAAK,0BAC1B4yB,EAAQz1B,QAASy1B,EAAQxvB,MAEpCrF,MAAMoG,kBAAkB,+BAAgCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACvF7H,KAAK2yB,aAAannB,SAAS,UAE3B,IAAM6qB,EAAgC,YAAfxuB,EAEvB,GAAIwuB,GAAiBzuB,EAASE,QAC5B9H,KAAKi0B,gBAELj0B,KAAKqO,QAAQ,WAAY,CACvBgB,OAAQrP,KACR6K,KAAMjD,EAASiD,OAGjBtJ,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,uBAA0B,CACvEX,KAAMsJ,EAASiD,KAAKvM,QAGtB0B,KAAKi2B,YACA,GAAII,GAAiBzuB,EAASosB,SACnC,GAAIh0B,KAAKk0B,QAAS,CAChB,IAAMxQ,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAKi0B,gBACLj0B,KAAKw1B,kBACLx1B,KAAKm0B,aAAaj0B,GAClBF,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcxsB,EAASosB,UAE5BtyB,QAAQ40B,MAAMt2B,KAAKsL,iBAEnBtL,KAAKi0B,qBAGPj0B,KAAKi0B,gBAEL1yB,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,iCAE/Ce,SAOLsM,SAAU,SAASxK,GACjB9B,KAAK01B,mBACL11B,KAAKkS,OACLlS,KAAKi0B,gBAELj0B,KAAK6yB,aAAapnB,YAAY,UAE9B,IACM1E,EAAO,CACX,OAAUjF,EACV,OAHaa,EAAE,WAAWiE,OAM5BrF,MAAMoG,kBAAkB,+BAAgCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACvF7H,KAAK6yB,aAAarnB,SAAS,UAE3B,IAAM6qB,EAAgC,YAAfxuB,EAEvB,GAAIwuB,GAAiBzuB,EAASE,QAAS,CACrC,IAAM4b,EAAW/gB,EAAE6D,OAAM,SAAStG,GAChCF,KAAKw1B,kBACLx1B,KAAKm0B,aAAaj0B,GAClBF,KAAK2f,IAAI,gBAAiB+D,KACzB1jB,MAEHA,KAAKyK,GAAG,gBAAiBiZ,GACzB1jB,KAAKo0B,cAAcxsB,EAASosB,eACnBqC,GAAiBzuB,EAAS2uB,OACnCh1B,MAAMwG,GAAGC,aAAaJ,EAAS2uB,OAE/Bv2B,KAAKi2B,SAEL10B,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,gCAE9Ce,KAAKi2B,UAENj2B,QAGLu4B,WAAY,SAASr4B,GAInB,GAHAA,EAAE6I,iBACmB/I,KAAKw4B,oBAER,CAChBx4B,KAAK01B,mBAEL,IAAM3uB,EAAO/G,KAAKsL,WAAW6qB,YAEvB9rB,EAAS1H,EAAE3C,KAAKsL,YAAY9H,KAAK,wBAAwBoD,MAE/DrF,MAAMoG,kBAAkB,iCAAkCZ,EAAMpE,EAAE6D,OAAM,SAASoB,EAAUC,GACnD,YAAfA,GAEFD,EAASE,SAE5BvG,MAAMwG,GAAGoD,cAAc5J,MAAMtC,EAAE,eAAgB,kBAE/C0D,EAAE,0BAA4B0H,GAAQX,SAEtC1J,KAAKi0B,gBACLj0B,KAAKi2B,SAEL10B,MAAMwG,GAAGC,aAAazG,MAAMtC,EAAE,eAAgB,2BAE9Ce,KAAKi2B,UAENj2B,SAIPw4B,kBAAmB,WACjB,OAAO9B,QAAQ,wEAOjBT,KAAM,WACCj2B,KAAK22B,WACR32B,KAAKwM,QAOTmC,QAAS,WACP3O,KAAKwM,KAAKmC,UAEV3O,KAAK01B,mBACL11B,KAAKw1B,kBAELx1B,KAAK42B,OAAOltB,SACZ1J,KAAKsL,WAAW5B,SAEhB1J,KAAKqO,QAAQ,aAGjB,CAME7D,YAAa,WAKX,OAJKxK,KAAK62B,YACR72B,KAAK62B,UAAY,IAAIt1B,MAAMC,YAAYoJ,WAGlC5K,KAAK62B,aA5fpB,CAggBGnqB,S","file":"/src/web/assets/cp/dist/js/sproutforms-cp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction getDef(f, d) {\n    if (typeof f === 'undefined') {\n        return typeof d === 'undefined' ? f : d;\n    }\n\n    return f;\n}\nfunction boolean(func, def) {\n\n    func = getDef(func, def);\n\n    if (typeof func === 'function') {\n        return function f() {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            return !!func.apply(this, args);\n        };\n    }\n\n    return !!func ? function () {\n        return true;\n    } : function () {\n        return false;\n    };\n}\n\nfunction integer(func, def) {\n\n    func = getDef(func, def);\n\n    if (typeof func === 'function') {\n        return function f() {\n            for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                args[_key2] = arguments[_key2];\n            }\n\n            var n = parseInt(func.apply(this, args), 10);\n            return n != n ? 0 : n;\n        };\n    }\n\n    func = parseInt(func, 10);\n\n    return func != func ? function () {\n        return 0;\n    } : function () {\n        return func;\n    };\n}\n\nfunction string(func, def) {\n\n    func = getDef(func, def);\n\n    if (typeof func === 'function') {\n        return function f() {\n            for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n            }\n\n            return '' + func.apply(this, args);\n        };\n    }\n\n    func = '' + func;\n\n    return function () {\n        return func;\n    };\n}\n\nexports.boolean = boolean;\nexports.integer = integer;\nexports.string = string;\n//# sourceMappingURL=bundle.js.map\n","/*\n * @link https://sprout.barrelstrengthdesign.com\n * @copyright Copyright (c) Barrel Strength Design LLC\n * @license https://craftcms.github.io/license\n */\n\n/* global Craft */\n/* global Garnish */\n/* global $ */\n\nif (typeof Craft.SproutForms === typeof undefined) {\n  Craft.SproutForms = {};\n}\n\n/**\n * Editable table class\n */\nCraft.SproutForms.EditableTable = Garnish.Base.extend(\n  {\n    initialized: false,\n\n    id: null,\n    baseName: null,\n    columns: null,\n    fieldRuleOptions: null,\n    sorter: null,\n    biggestId: -1,\n\n    $table: null,\n    $tbody: null,\n    $addRowBtn: null,\n\n    init: function(id, baseName, columns, settings, fieldRuleOptions) {\n      this.id = id;\n      this.baseName = baseName;\n      this.columns = columns;\n      this.fieldRuleOptions = fieldRuleOptions;\n      this.setSettings(settings, Craft.SproutForms.EditableTable.defaults);\n\n      this.$table = $('#' + id);\n      this.$tbody = this.$table.children('tbody');\n\n      this.sorter = new Craft.DataTableSorter(this.$table, {\n        helperClass: 'editabletablesorthelper',\n        copyDraggeeInputValuesToHelper: true\n      });\n\n      if (this.isVisible()) {\n        this.initialize(this.fieldRuleOptions);\n      } else {\n        this.addListener(Garnish.$win, 'resize', 'initializeIfVisible');\n      }\n    },\n\n    isVisible: function() {\n      return (this.$table.height() > 0);\n    },\n\n    initialize: function(fieldRuleOptions) {\n      if (this.initialized) {\n        return;\n      }\n\n      this.initialized = true;\n      this.removeListener(Garnish.$win, 'resize');\n\n      const $rows = this.$tbody.children();\n\n      for (let i = 0; i < $rows.length; i++) {\n        new Craft.SproutForms.EditableTable.Row(this, $rows[i], fieldRuleOptions);\n      }\n\n      this.$addRowBtn = this.$table.find('.buttons').children('.add');\n      this.addListener(this.$addRowBtn, 'activate', 'addRow');\n\n      if ($rows.length === 0) {\n        this.addRow();\n      }\n    },\n\n    initializeIfVisible: function() {\n      if (this.isVisible()) {\n        this.initialize();\n      }\n    },\n\n    addRow: function() {\n      const rowId = this.settings.rowIdPrefix + (this.biggestId + 1),\n        rowHtml = Craft.SproutForms.EditableTable.getRowHtml(rowId, this.columns, this.baseName, {}, this.fieldRuleOptions),\n        $tr = $(rowHtml).appendTo(this.$tbody);\n\n      new Craft.SproutForms.EditableTable.Row(this, $tr, this.fieldRuleOptions);\n\n      const $container = $tr.find('.sprout-selectother');\n\n      this.sorter.addItems($tr);\n\n      // Focus the first input in the row\n      $tr.find('input,textarea,select').first().focus();\n\n      this.settings.onAddRow($tr);\n      this.$addRowBtn = $tr.find('#add-rule');\n      this.addListener(this.$addRowBtn, 'activate', 'addRow');\n    }\n  },\n  {\n    textualColTypes: ['singleline', 'multiline', 'number'],\n    defaults: {\n      rowIdPrefix: '',\n      onAddRow: $.noop,\n      onDeleteRow: $.noop\n    },\n\n    getRowHtml: function(rowId, columns, baseName, values, fieldRuleOptions) {\n      let rowHtml = '<tr data-id=\"' + rowId + '\">';\n      let formFieldName = \"\";\n      let formFieldValue = \"\";\n      let conditionFieldName = \"\";\n      let conditionFieldValue = \"\";\n      for (let colId in columns) {\n        const col = columns[colId],\n          name = baseName + '[condition-' + rowId + '][' + colId + ']',\n          value = (typeof values[colId] !== 'undefined' ? values[colId] : ''),\n          textual = Craft.inArray(col.type, Craft.SproutForms.EditableTable.textualColTypes);\n        if (colId === '0') {\n          formFieldName = name;\n          formFieldValue = value !== '' ? value : col.options[0].value;\n        }\n\n        rowHtml += '<td class=\"' + (textual ? 'textual' : '') + ' ' + (typeof col['class'] !== 'undefined' ? col['class'] : '') + '\"' +\n          (typeof col['width'] !== 'undefined' ? ' width=\"' + col['width'] + '\"' : '') +\n          '>';\n\n        switch (col.type) {\n          case 'select': {\n            rowHtml += '<div class=\"select\"><select name=\"' + name + '\">';\n\n            let hasOptgroups = false;\n\n            let firstRow = 'selected';\n\n            for (let key in col.options) {\n              let option = col.options[key];\n\n              if (typeof option.optgroup !== 'undefined') {\n                if (hasOptgroups) {\n                  rowHtml += '</optgroup>';\n                } else {\n                  hasOptgroups = true;\n                }\n\n                rowHtml += '<optgroup label=\"' + option.optgroup + '\">';\n              } else {\n                let optionLabel = (typeof option.label !== 'undefined' ? option.label : option),\n                  optionValue = (typeof option.value !== 'undefined' ? option.value : key),\n                  optionDisabled = (typeof option.disabled !== 'undefined' ? option.disabled : false);\n\n                rowHtml += '<option ' + firstRow + ' value=\"' + optionValue + '\"' + (optionValue === value ? ' selected' : '') + (optionDisabled ? ' disabled' : '') + '>' + optionLabel + '</option>';\n              }\n\n              firstRow = '';\n            }\n\n            if (hasOptgroups) {\n              rowHtml += '</optgroup>';\n            }\n\n            rowHtml += '</select></div>';\n\n            break;\n          }\n\n          case 'selectCondition': {\n            conditionFieldName = name;\n            const colVal = typeof col.options[0] !== 'undefined' ? col.options[0].value : '';\n            conditionFieldValue = value !== '' ? value : colVal;\n\n            rowHtml += '<div class=\"select\"><select data-check-value-html=\"true\" name=\"' + name + '\">';\n            col.options = fieldRuleOptions[formFieldValue]['conditionsAsOptions'];\n            let hasOptgroups = false;\n\n            let firstRow = 'selected';\n\n            for (let key in col.options) {\n              let option = col.options[key];\n\n              if (typeof option.optgroup !== 'undefined') {\n                if (hasOptgroups) {\n                  rowHtml += '</optgroup>';\n                } else {\n                  hasOptgroups = true;\n                }\n\n                rowHtml += '<optgroup label=\"' + option.optgroup + '\">';\n              } else {\n                let optionLabel = (typeof option.label !== 'undefined' ? option.label : option),\n                  optionValue = (typeof option.value !== 'undefined' ? option.value : key),\n                  optionDisabled = (typeof option.disabled !== 'undefined' ? option.disabled : false);\n\n                rowHtml += '<option ' + firstRow + ' value=\"' + optionValue + '\"' + (optionValue === value ? ' selected' : '') + (optionDisabled ? ' disabled' : '') + '>' + optionLabel + '</option>';\n              }\n\n              firstRow = '';\n            }\n\n            if (hasOptgroups) {\n              rowHtml += '</optgroup>';\n            }\n\n            rowHtml += '</select></div>';\n\n            break;\n          }\n\n          case 'checkbox': {\n            rowHtml += '<input type=\"hidden\" name=\"' + name + '\">' +\n              '<input type=\"checkbox\" name=\"' + name + '\" value=\"1\"' + (value ? ' checked' : '') + '>';\n\n            break;\n          }\n\n          default: {\n            rowHtml += '<input class=\"text fullwidth\" type=\"text\" name=\"' + name + '\" value=\"' + value + '\">';\n\n          }\n        }\n\n        rowHtml += '</td>';\n      }\n\n      rowHtml += '<td class=\"thin action\"><div class=\"buttons\"> <div id=\"add-rule\" class=\"btn add icon small\" tabindex=\"0\">OR</div> </div></td>' +\n        '<td class=\"thin action\"><a class=\"delete icon\" title=\"' + Craft.t('sprout-seo', 'Delete') + '\"></a></td>' +\n        '</tr>';\n\n      return rowHtml;\n    }\n\n  });\n\n/**\n * Editable table row class\n */\nCraft.SproutForms.EditableTable.Row = Garnish.Base.extend(\n  {\n    table: null,\n    id: null,\n    niceTexts: null,\n\n    $tr: null,\n    $tds: null,\n    $textareas: null,\n    $deleteBtn: null,\n    fieldRuleOptions: null,\n\n    init: function(table, tr, fieldRuleOptions) {\n      this.table = table;\n      this.$tr = $(tr);\n      this.$tds = this.$tr.children();\n      this.fieldRuleOptions = fieldRuleOptions;\n\n      // Get the row ID, sans prefix\n      const id = parseInt(this.$tr.attr('data-id').substr(this.table.settings.rowIdPrefix.length));\n\n      if (id > this.table.biggestId) {\n        this.table.biggestId = id;\n      }\n\n      this.$textareas = $();\n      this.niceTexts = [];\n      const textareasByColId = {};\n      const that = this;\n\n      let i = 0;\n\n      for (let colId in this.table.columns) {\n        let col = this.table.columns[colId];\n\n        if (Craft.inArray(col.type, Craft.SproutForms.EditableTable.textualColTypes)) {\n          const $textarea = $('textarea', this.$tds[i]);\n          this.$textareas = this.$textareas.add($textarea);\n\n          this.addListener($textarea, 'focus', 'onTextareaFocus');\n          this.addListener($textarea, 'mousedown', 'ignoreNextTextareaFocus');\n\n          this.niceTexts.push(new Garnish.NiceText($textarea, {\n            onHeightChange: $.proxy(this, 'onTextareaHeightChange')\n          }));\n\n          if (col.type === 'singleline' || col.type === 'number') {\n            this.addListener($textarea, 'keypress', {type: col.type}, 'validateKeypress');\n            this.addListener($textarea, 'textchange', {type: col.type}, 'validateValue');\n          }\n\n          textareasByColId[colId] = $textarea;\n        }\n\n        i++;\n      }\n\n      this.initSproutFields();\n\n      // Now that all of the text cells have been nice-ified, let's normalize the heights\n      this.onTextareaHeightChange();\n\n      // Now look for any autopopulate columns\n      for (let colId in this.table.columns) {\n        let col = this.table.columns[colId];\n\n        if (col.autopopulate && typeof textareasByColId[col.autopopulate] !== 'undefined' && !textareasByColId[colId].val()) {\n          new Craft.HandleGenerator(textareasByColId[colId], textareasByColId[col.autopopulate]);\n        }\n      }\n\n      /* We already generate the depending dropdowns when load */\n      const needCheck = this.$tr.find(\"td:eq(1)\").find(\"select\").data(\"check-value-html\");\n      const $formFieldInput = this.$tr.find(\"td:eq(0)\").find(\"select\");\n      const $conditionalInput = this.$tr.find(\"td:eq(1)\").find(\"select\");\n\n      $formFieldInput.change({row: this}, function(event) {\n        let conditionSelectHtml = '';\n        conditionSelectHtml += '<div class=\"select\"><select data-check-value-html=\"true\" name=\"' + name + '\">';\n        const col = {};\n        col['options'] = that.fieldRuleOptions[$formFieldInput.val()]['conditionsAsOptions'];\n        const value = $conditionalInput.val();\n        let hasOptgroups = false;\n\n        let firstRow = 'selected';\n\n        for (let key in col.options) {\n          const option = col.options[key];\n\n          if (typeof option.optgroup !== 'undefined') {\n            if (hasOptgroups) {\n              conditionSelectHtml += '</optgroup>';\n            } else {\n              hasOptgroups = true;\n            }\n\n            conditionSelectHtml += '<optgroup label=\"' + option.optgroup + '\">';\n          } else {\n            const optionLabel = (typeof option.label !== 'undefined' ? option.label : option),\n              optionValue = (typeof option.value !== 'undefined' ? option.value : key),\n              optionDisabled = (typeof option.disabled !== 'undefined' ? option.disabled : false);\n\n            conditionSelectHtml += '<option ' + firstRow + ' value=\"' + optionValue + '\"' + (optionValue === value ? ' selected' : '') + (optionDisabled ? ' disabled' : '') + '>' + optionLabel + '</option>';\n          }\n\n          firstRow = '';\n        }\n\n        if (hasOptgroups) {\n          conditionSelectHtml += '</optgroup>';\n        }\n\n        conditionSelectHtml += '</select></div>';\n        $conditionalInput.html(conditionSelectHtml);\n        that.addValueInputHtml(that);\n      });\n\n      $conditionalInput.change({row: this}, function(event) {\n        that.addValueInputHtml(that);\n      });\n\n      if (needCheck === true) {\n        this.addValueInputHtml();\n      }\n\n      const $deleteBtn = this.$tr.children().last().find('.delete');\n      this.addListener($deleteBtn, 'click', 'deleteRow');\n    },\n\n    addValueInputHtml(self = null) {\n      const that = (self == null) ? this : self;\n      // last element could be an input or select\n      const lastElement = this.$tr.find(\"td:eq(2)\").find(\"input\").length === 0 ? this.$tr.find(\"td:eq(2)\").find(\"select\") : this.$tr.find(\"td:eq(2)\").find(\"input\");\n      const data = {\n        'formFieldHandle': this.$tr.find(\"td:eq(0)\").find(\"select\").val(),\n        'condition': this.$tr.find(\"td:eq(1)\").find(\"select\").val(),\n        'inputName': lastElement.attr(\"name\"),\n        'inputValue': lastElement.val(),\n        'formId': $(\"#formId\").val()\n      };\n\n      Craft.postActionRequest('sprout-forms/rules/get-condition-value-input-html', data, $.proxy(function(response, textStatus) {\n        const statusSuccess = (textStatus === 'success');\n        if (statusSuccess && response.success) {\n          that.$tr.find('td:eq(2)').html(response.html);\n        } else {\n          Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to get the input html'));\n        }\n      }, this));\n    },\n\n    initSproutFields: function() {\n      Craft.SproutFields.initFields(this.$tr);\n    },\n\n    onTextareaFocus: function(ev) {\n      this.onTextareaHeightChange();\n\n      const $textarea = $(ev.currentTarget);\n\n      if ($textarea.data('ignoreNextFocus')) {\n        $textarea.data('ignoreNextFocus', false);\n        return;\n      }\n\n      setTimeout(function() {\n        const val = $textarea.val();\n\n        // Does the browser support setSelectionRange()?\n        if (typeof $textarea[0].setSelectionRange !== 'undefined') {\n          // Select the whole value\n          const length = val.length * 2;\n          $textarea[0].setSelectionRange(0, length);\n        } else {\n          // Refresh the value to get the cursor positioned at the end\n          $textarea.val(val);\n        }\n      }, 0);\n    },\n\n    ignoreNextTextareaFocus: function(ev) {\n      $.data(ev.currentTarget, 'ignoreNextFocus', true);\n    },\n\n    validateKeypress: function(ev) {\n      const keyCode = ev.keyCode ? ev.keyCode : ev.charCode;\n\n      if (!Garnish.isCtrlKeyPressed(ev) && (\n        (keyCode === Garnish.RETURN_KEY) ||\n        (ev.data.type === 'number' && !Craft.inArray(keyCode, Craft.SproutForms.EditableTable.Row.numericKeyCodes))\n      )) {\n        ev.preventDefault();\n      }\n    },\n\n    validateValue: function(ev) {\n      let safeValue;\n\n      if (ev.data.type === 'number') {\n        // Only grab the number at the beginning of the value (if any)\n        const match = ev.currentTarget.value.match(/^\\s*(-?[\\d.]*)/);\n\n        if (match !== null) {\n          safeValue = match[1];\n        } else {\n          safeValue = '';\n        }\n      } else {\n        // Just strip any newlines\n        safeValue = ev.currentTarget.value.replace(/[\\r\\n]/g, '');\n      }\n\n      if (safeValue !== ev.currentTarget.value) {\n        ev.currentTarget.value = safeValue;\n      }\n    },\n\n    onTextareaHeightChange: function() {\n      // Keep all the textareas' heights in sync\n      let tallestTextareaHeight = -1;\n\n      for (let i = 0; i < this.niceTexts.length; i++) {\n        if (this.niceTexts[i].height > tallestTextareaHeight) {\n          tallestTextareaHeight = this.niceTexts[i].height;\n        }\n      }\n\n      this.$textareas.css('min-height', tallestTextareaHeight);\n\n      // If the <td> is still taller, go with that insted\n      const tdHeight = this.$textareas.first().parent().height();\n\n      if (tdHeight > tallestTextareaHeight) {\n        this.$textareas.css('min-height', tdHeight);\n      }\n    },\n\n    deleteRow: function() {\n      this.table.sorter.removeItems(this.$tr);\n      this.$tr.remove();\n      if (this.table.$table.find('tr').length === 1) {\n        let $andDiv = this.table.$table.prev('.rules-table-and');\n        if ($andDiv.length === 1) {\n          $andDiv.remove();\n        }\n        this.table.$table.remove();\n      }\n\n      // onDeleteRow callback\n      this.table.settings.onDeleteRow(this.$tr);\n    }\n  },\n  {\n    numericKeyCodes: [9 /* (tab) */, 8 /* (delete) */, 37, 38, 39, 40 /* (arrows) */, 45, 91 /* (minus) */, 46, 190 /* period */, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57 /* (0-9) */]\n  });\n","/*\n * @link https://sprout.barrelstrengthdesign.com\n * @copyright Copyright (c) Barrel Strength Design LLC\n * @license https://craftcms.github.io/license\n */\n\n/* global Craft */\n/* global Garnish */\n\nif (typeof Craft.SproutForms === typeof undefined) {\n  Craft.SproutForms = {};\n}\n\n(function($) {\n  Craft.SproutForms.FormSettings = Garnish.Base.extend({\n\n    options: null,\n    modal: null,\n    ruleModal: null,\n    $lightswitches: null,\n\n    /**\n     * The constructor.\n     */\n    init: function() {\n      // init method\n      this.initButtons();\n    },\n\n    /**\n     * Adds edit buttons to existing integrations.\n     */\n    initButtons: function() {\n      const that = this;\n\n      // Add listeners to all the items that start with sproutform-field-\n      $(\"a[id^='sproutform-integration']\").each(function(i, el) {\n        const integrationId = $(el).data('integrationid');\n\n        if (integrationId) {\n          that.addListener($(\"#sproutform-integration-\" + integrationId), 'activate', 'editIntegration');\n        }\n      });\n\n      // Add listeners to all Ms\n      $(\"a[id^='sproutform-rules']\").each(function(i, el) {\n        const ruleId = $(el).data('ruleId');\n\n        if (ruleId) {\n          that.addListener($(\"#sproutform-rules-\" + ruleId), 'activate', 'editRule');\n        }\n      });\n\n      this.$lightswitches = $('.sproutforms-integration-row .lightswitch');\n\n      this.addListener(this.$lightswitches, 'click', 'onEnableIntegration');\n\n      this.$ruleEnabledLightswitches = $('.sproutforms-rules-row .lightswitch');\n\n      this.addListener(this.$ruleEnabledLightswitches, 'click', 'onEnableRule');\n\n      this.modal = Craft.SproutForms.IntegrationModal.getInstance();\n\n      this.modal.on('saveIntegration', $.proxy(function(e) {\n        const integration = e.integration;\n        // Let's update the name if the integration is updated\n        this.resetIntegration(integration);\n      }, this));\n\n      this.ruleModal = Craft.SproutForms.RuleModal.getInstance();\n\n      this.ruleModal.on('saveRule', $.proxy(function(e) {\n        const rule = e.rule;\n        // Let's update the name if the conditional is updated\n        this.resetConditional(rule);\n      }, this));\n\n      this.addListener($(\"#integrationsOptions\"), 'change', 'createDefaultIntegration');\n      this.addListener($(\"#ruleOptions\"), 'change', 'createDefaultRule');\n    },\n\n    onEnableIntegration: function(ev) {\n      const lightswitch = ev.currentTarget;\n      const integrationId = lightswitch.id;\n      let enabled = $(lightswitch).attr('aria-checked');\n      enabled = enabled === 'true' ? 1 : 0;\n      const formId = $(\"#formId\").val();\n\n      const data = {integrationId: integrationId, enabled: enabled, formId: formId};\n\n      Craft.postActionRequest('sprout-forms/integrations/enable-integration', data, $.proxy(function(response, textStatus) {\n        if (textStatus === 'success' && response.success) {\n          Craft.cp.displayNotice(Craft.t('sprout-forms', 'Integration updated.'));\n        } else {\n          Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to update integration'));\n        }\n      }, this));\n\n    },\n\n    onEnableRule: function(ev) {\n      const lightswitch = ev.currentTarget;\n      const ruleId = lightswitch.id;\n      let enabled = $(lightswitch).attr('aria-checked');\n      enabled = enabled === 'true' ? 1 : 0;\n      const formId = $(\"#formId\").val();\n\n      const data = {ruleId: ruleId, enabled: enabled, formId: formId};\n\n      Craft.postActionRequest('sprout-forms/rules/enable-rule', data, $.proxy(function(response, textStatus) {\n        if (textStatus === 'success' && response.success) {\n          Craft.cp.displayNotice(Craft.t('sprout-forms', 'Conditional updated.'));\n        } else {\n          Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to update conditional'));\n        }\n      }, this));\n\n    },\n\n    /**\n     * Renames | update icon |\n     * of an existing integration after edit it\n     *\n     * @param integration\n     */\n    resetIntegration: function(integration) {\n      const $integrationDiv = $(\"#sproutform-integration-\" + integration.id);\n\n      const $container = $(\"#integration-enabled-\" + integration.id);\n\n      const currentValue = integration.enabled === '1' ? true : false;\n      const settingsValue = $container.attr('aria-checked') === 'true' ? true : false;\n      if (currentValue !== settingsValue) {\n        $container.attr('aria-checked', \"\" + currentValue);\n        if (currentValue) {\n          $container.addClass(\"on\");\n        } else {\n          $container.removeClass(\"on\");\n        }\n      }\n      $integrationDiv.html(integration.name);\n    },\n\n    /**\n     * Renames | update icon |\n     * of an existing conditional after edit it\n     *\n     * @param conditional\n     */\n    resetConditional: function(conditional) {\n      const $conditionalDiv = $(\"#sproutform-rules-\" + conditional.id);\n\n      const $container = $(\"#condition-enabled-\" + conditional.id);\n      const $behaviorContainer = $(\"#sproutform-rules-behavior-\" + conditional.id);\n      const currentValue = conditional.enabled === '1' ? true : false;\n      const settingsValue = $container.attr('aria-checked') === 'true' ? true : false;\n      if (currentValue !== settingsValue) {\n        $container.attr('aria-checked', \"\" + currentValue);\n        if (currentValue) {\n          $container.addClass(\"on\");\n        } else {\n          $container.removeClass(\"on\");\n        }\n      }\n      $behaviorContainer.html(conditional.behavior);\n      $conditionalDiv.html(conditional.name);\n    },\n\n    createDefaultIntegration: function(type) {\n\n      const that = this;\n      const integrationTableBody = $('#sproutforms-integrations-table tbody');\n      const currentIntegration = $(\"#integrationsOptions\").val();\n      const formId = $(\"#formId\").val();\n\n      if (currentIntegration === '') {\n        return;\n      }\n\n      const data = {\n        type: currentIntegration,\n        formId: formId,\n        sendRule: '*'\n      };\n\n      Craft.postActionRequest('sprout-forms/integrations/save-integration', data, $.proxy(function(response, textStatus) {\n        if (textStatus === 'success') {\n          const integration = response.integration;\n\n          integrationTableBody.append('<tr class=\"field sproutforms-integration-row\" id =\"sproutforms-integration-row-' + integration.id + '\">' +\n            '<td class=\"heading\">' +\n            '<a href=\"#\" id =\"sproutform-integration-' + integration.id + '\" data-integrationid=\"' + integration.id + '\">' + integration.name + '</a>' +\n            '</td>' +\n            '<td>' +\n            '<div class=\"lightswitch small\" tabindex=\"0\" data-value=\"1\" role=\"checkbox\" aria-checked=\"false\" id =\"integration-enabled-' + integration.id + '\">' +\n            '<div class=\"lightswitch-container\">' +\n            '<div class=\"label on\"></div>' +\n            '<div class=\"handle\"></div>' +\n            '<div class=\"label off\"></div>' +\n            '</div>' +\n            '<input type=\"hidden\" name=\"\" value=\"\">' +\n            '</div>' +\n            '</td>' +\n            '</tr>');\n\n          that.addListener($(\"#sproutform-integration-\" + integration.id), 'activate', 'editIntegration');\n\n          $('#integrationsOptions').val('');\n          const $container = $(\"#integration-enabled-\" + integration.id);\n          $container.lightswitch();\n          that.addListener($container, 'click', 'onEnableIntegration');\n        } else {\n          // something went wrong\n        }\n      }, this));\n\n    },\n\n    createDefaultRule: function(type) {\n      const that = this;\n      const ruleTableBody = $(\"#sproutforms-rules-table tbody\");\n      const currentRule = $(\"#ruleOptions\").val();\n      const formId = $(\"#formId\").val();\n\n      if (currentRule === '') {\n        return;\n      }\n\n      const data = {\n        type: currentRule,\n        formId: formId\n      };\n\n      Craft.postActionRequest('sprout-forms/rules/save-rule', data, $.proxy(function(response, textStatus) {\n        if (textStatus === 'success') {\n          const rule = response.rule;\n          ruleTableBody.append('<tr id =\"sproutforms-rules-row-' + rule.id + '\" class=\"field sproutforms-rules-row\">' +\n            '<td>' +\n            '<a href=\"#\" id =\"sproutform-rules-' + rule.id + '\" data-rule-id=\"' + rule.id + '\">' + rule.name + '</a>' +\n            '</td>' +\n            '<td>' +\n            '<div id =\"sproutform-rules-behavior-' + rule.id + '\">' + rule.behavior + '</div>' +\n            '</td>' +\n            '<td>' +\n            '<div class=\"lightswitch small\" tabindex=\"0\" data-value=\"1\" role=\"checkbox\" aria-checked=\"false\" id =\"condition-enabled-' + rule.id + '\">' +\n            '<div class=\"lightswitch-container\">' +\n            '<div class=\"label on\"></div>' +\n            '<div class=\"handle\"></div>' +\n            '<div class=\"label off\"></div>' +\n            '</div>' +\n            '<input type=\"hidden\" name=\"\" value=\"\">' +\n            '</div>' +\n            '</td>' +\n            '</tr>');\n\n          that.addListener($(\"#sproutform-rules-\" + rule.id), 'activate', 'editRule');\n\n          $('#ruleOptions').val('');\n          const $container = $(\"#condition-enabled-\" + rule.id);\n          $container.lightswitch();\n          that.addListener($container, 'click', 'onEnableRule');\n        } else {\n          // something went wrong\n        }\n      }, this));\n\n    },\n\n    editRule: function(currentOption) {\n\n      const option = currentOption.currentTarget;\n      const ruleId = $(option).data('ruleId');\n      // Make our field available to our parent function\n      //this.$field = $(option);\n      this.base($(option));\n\n      this.ruleModal.editRule(ruleId);\n    },\n\n    editIntegration: function(currentOption) {\n      const option = currentOption.currentTarget;\n\n      const integrationId = $(option).data('integrationid');\n      // Make our field available to our parent function\n      //this.$field = $(option);\n      this.base($(option));\n\n      this.modal.editIntegration(integrationId);\n    },\n\n  });\n\n})(jQuery);","/*\n * @link https://sprout.barrelstrengthdesign.com\n * @copyright Copyright (c) Barrel Strength Design LLC\n * @license https://craftcms.github.io/license\n */\n\n/* global Craft */\n/* global dragula */\n\n// import autoScroll from 'dom-autoscroller/dist/dom-autoscroller.min';\nlet dragula = require('dragula');\nlet autoScroll = require('dom-autoscroller');\n\n(function($) {\n\n  /**\n   * Handles the buttons for creating new groups and fields inside a the drag and drop UI\n   */\n  class SproutFormsFieldLayoutEditor {\n\n    constructor(formId) {\n\n      if (window.sproutforms === undefined) {\n        window.sproutforms = {};\n      }\n\n      this.formId = formId;\n      this.$formPage = $('body.sprout-forms');\n      this.$formPageManagerBtn = $('#formPageManagerBtn');\n      this.$addFormPageBtn = $('#addFormPageBtn');\n      this.$saveFormButton = $('#save-form-button');\n\n      this.$revisionSpinner = $('#revision-spinner');\n      this.$revisionStatus = $('#revision-status');\n\n      this.selectedTab = Craft.cp.$selectedTab;\n      this.selectedTabId = this.selectedTab ? this.selectedTab.parent().data('id') : null;\n\n      this.formPageManagerTabs = [];\n      this.fieldModal = Craft.SproutForms.FieldModal.getInstance();\n\n      // Initialize once\n      this.initGlobalButtons();\n      this.resizeContainers();\n\n      // Initialize whenever we rebuild the layout\n      this.initFieldLayout();\n      this.initDragula();\n    }\n\n    initGlobalButtons() {\n      const self = this;\n\n      this.$formPageManagerBtn.on('click', function() {\n        self.showFormPageManager();\n      });\n\n      this.$addFormPageBtn.on('click', function() {\n        self.addFormPage();\n      });\n\n      this.$formPage.on('refreshFieldLayout', function() {\n        self.refreshFieldLayout()\n      });\n\n      Garnish.$win.on('scroll', function() {\n        self.resizeContainers()\n      });\n\n      window.addEventListener('resize', function() {\n        self.resizeContainers()\n      });\n\n      this.fieldModal.on('saveField', function(event) {\n        $('body.sprout-forms').trigger('refreshFieldLayout');\n      });\n    }\n\n    initFieldLayout() {\n      let self = this;\n      // Add listeners to all the items that start with sproutform-field-\n      let $formFields = $(\"a[id^='sproutform-field-']\");\n      for (let formField of $formFields) {\n        let fieldId = $(formField).data('fieldid');\n        if (fieldId) {\n          let $field = $(\"#sproutform-field-\" + fieldId);\n          $field.on('activate', function(event) {\n            self.showEditFieldModal(event);\n          });\n        }\n      }\n    }\n\n    initDragula() {\n      const self = this;\n\n      if (window.sproutforms.formBuilder !== undefined) {\n        window.sproutforms.formBuilder.destroy();\n      }\n\n      this.fieldsLayout = document.getElementById('right-copy');\n      this.tabContainers = document.querySelectorAll('.sprout-tab-container');\n\n      // Create an array of all our target containers\n      let dragAndDropContainers = [...[this.fieldsLayout], ...this.tabContainers];\n\n      window.sproutforms.formBuilder = dragula(dragAndDropContainers, {\n        copy: function(el, source) {\n          return source === self.fieldsLayout;\n        },\n        accepts: function(el, target) {\n          return target !== self.fieldsLayout;\n        },\n        invalid: function(el, handle) {\n          // do not move any item with donotdrag class.\n          return el.classList.contains('donotdrag');\n        }\n      }).on('drag', function(el) {\n\n        $(el).addClass('drag-active');\n\n      }).on('drop', function(el, target, source) {\n\n        $(el).removeClass('drag-active');\n        $(target).find('.drag-active').removeClass('drag-active');\n        $(source).find('.drag-active').removeClass('drag-active');\n\n        self.$revisionStatus.addClass('invisible');\n        self.$revisionSpinner.removeClass('hidden');\n\n        // Reorder fields\n        if ($(target).attr('id') === $(source).attr('id')) {\n          // No need to save stuff as reordered fields are re-saved based on the order\n          // in the hidden field when the form is saved\n          self.$revisionStatus.addClass('checkmark-icon unsaved').fadeIn('slow');\n        }\n\n        if (target && source === self.fieldsLayout) {\n          // get the tab name by the first div fields\n          const tab = $(el).closest(\".sproutforms-tab-fields\");\n          const tabName = tab.data('tabname');\n          const tabId = tab.data('tabid');\n          const fieldType = $(el).data('type');\n\n          self.createDefaultField(fieldType, tabId, tabName, el);\n        }\n\n        // Don't change the status.\n        // If things are saved, a new field is also saved.\n        // If things are not saved, a re-ordered field still requires that things get saved\n        setTimeout(function() {\n          self.$revisionSpinner.addClass('hidden');\n          self.$revisionStatus.removeClass('invisible');\n        }, 500);\n\n      }).on('over', function(el, container) {\n\n        $(el).addClass('drag-active');\n        $(container).addClass('container-active');\n\n      }).on('out', function(el, container) {\n\n        $(el).removeClass('drag-active');\n        $(container).removeClass('container-active');\n\n      });\n\n      // Adds auto-scroll to main container when dragging\n      // dom-autoscroller: https://www.npmjs.com/package/dom-autoscroller\n      autoScroll([...document.querySelectorAll('.sproutforms-tab-fields')], {\n          margin: 20,\n          maxSpeed: 10,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            // Only scroll when the pointer is down, and there is a child being dragged.\n            return this.down && window.sproutforms.formBuilder.dragging;\n          }\n        }\n      );\n    }\n\n    resizeContainers() {\n      let globalHeader = $('#global-header');\n      let tabsContainer = $('#tabs');\n      let contentContainer = $('#content-container');\n\n      let body = $('body');\n      let globalHeaderHeight = 0;\n\n      if (Garnish.$bod.hasClass('fixed-header')) {\n        body.addClass('sproutforms-editor-adjust-fixed-header');\n      } else {\n        globalHeaderHeight = globalHeader.outerHeight(true);\n        body.removeClass('sproutforms-editor-adjust-fixed-header');\n      }\n\n      let headerContainerHeight = $('#header-container').outerHeight(true);\n      let tabHeight = tabsContainer.outerHeight();\n\n      /** 44 = padding at top and bottom of content-pane\n       *  48 = footer spacing between content pane footer  and browser */\n      let bottomPaddingAdjustment = 44 + 48;\n      if (Garnish.$bod.hasClass('fixed-header')) {\n        bottomPaddingAdjustment = 44 + 48;\n      }\n      let headerFooterHeight = globalHeaderHeight + headerContainerHeight + tabHeight + bottomPaddingAdjustment;\n\n      // Height required to allow scrolling while dragging a field\n      $('.sproutforms-tab-fields').height($(window).height() - headerFooterHeight);\n      $('#details-container').height(contentContainer.height());\n    }\n\n    createDefaultField(type, tabId, tabName, el) {\n      let self = this;\n\n      self.newTabName = tabName;\n      self.newFieldElement = el;\n\n      $(el).removeClass('source-field');\n      $(el).addClass('target-field');\n      $(el).find('.source-field-header').remove();\n      $(el).find('.body').removeClass('hidden');\n      // try to check position of the field\n      let nextDiv = $(el).next('.target-field');\n      let nextId = nextDiv.attr('id');\n      if (typeof nextId === 'undefined' || nextId === null) {\n        nextDiv = null;\n      } else {\n        // Last field\n        const nextDivId = nextId.split('-');\n        nextId = nextDivId[1];\n      }\n\n      const defaultName = $(el).data('defaultname') ? $(el).data('defaultname') : Craft.t('sprout-forms', 'Untitled Field');\n\n      // Add the Field Header\n      $(el).prepend($([\n        '<div class=\"active-field-header\">',\n        '<h2>', defaultName, '</h2>',\n        '</div>'\n      ].join('')));\n\n      const formId = $(\"#formId\").val();\n      const data = {\n        'type': type,\n        'formId': formId,\n        'tabId': tabId,\n        'nextId': nextId\n      };\n\n      Craft.postActionRequest('sprout-forms/fields/create-field', data, function(response, textStatus) {\n        if (textStatus === 'success') {\n          self.initFieldOnDrop(response.field, self.newTabName, self.newFieldElement);\n        }\n      });\n    }\n\n    initFieldOnDrop(defaultField, tabName, el) {\n      let self = this;\n\n      if (defaultField !== null && defaultField.hasOwnProperty('id')) {\n        $(el).attr('id', 'sproutfield-' + defaultField.id);\n\n        // Add the Settings buttons\n        $(el).prepend($([\n          '<ul class=\"settings\">',\n          '<li><a id=\"sproutform-field-', defaultField.id, '\" data-fieldid=\"', defaultField.id, '\" href=\"#\" tabindex=\"0\" ><i class=\"fa fa-pencil fa-2x\" title=\"', Craft.t('sprout-forms', 'Edit'), '\"></i></a></li>',\n          '</ul>'\n        ].join('')));\n\n        // Add fieldLayout input\n        $(el).append($([\n            '<input type=\"hidden\" name=\"fieldLayout[', tabName, '][]\" value=\"', defaultField.id, '\" class=\"id-input\">'\n          ].join('')\n        ));\n\n        $(\"#sproutform-field-\" + defaultField.id).on('activate', function(event) {\n          self.showEditFieldModal(event);\n        });\n      } else {\n        Craft.cp.displayError(Craft.t('sprout-forms', 'Something went wrong when creating the field :('));\n\n        $(el).remove();\n      }\n    }\n\n    showEditFieldModal(event) {\n      const option = event.currentTarget;\n      const fieldId = $(option).data('fieldid');\n      this.fieldModal.editField(fieldId);\n    }\n\n    showFormPageManager() {\n      let self = this;\n\n      if (!window.sproutforms.formPageManager) {\n        let $tabs = Craft.cp.$tabs ?? [];\n        this.buildFormPageManagerElements($tabs);\n\n        window.sproutforms.formPageManager = new Garnish.HUD(this.$formPageManagerBtn, this.$formPageManagerForm, {\n          hudClass: 'hud formpagemanagerhud',\n          onShow: function() {\n            self.$formPageManagerBtn.addClass('active');\n          },\n          onHide: function() {\n            self.$formPageManagerBtn.removeClass('active');\n          }\n        });\n\n        this.initFormPageManagerAdminTable();\n\n      } else {\n        window.sproutforms.formPageManager.show();\n      }\n    }\n\n    buildFormPageManagerElements($tabs) {\n      let self = this;\n\n      this.$formPageManagerForm = null;\n      this.$formPageManagerNoTabs = null;\n      this.$formPageManagerTable = null;\n\n      this.$formPageManagerForm = $(\n        '<form method=\"post\" accept-charset=\"UTF-8\">' +\n        '<input type=\"hidden\" name=\"action\" value=\"sprout-forms/forms/save-form-page\"/>' +\n        '</form>'\n      );\n      this.$formPageManagerForm.appendTo(Garnish.$bod);\n\n      this.$formPageManagerNoTabs = $('<p id=\"notabs\"' + ($tabs.length ? ' class=\"hidden\"' : '') + '>' + Craft.t('sprout-forms', 'You dont have any tabs yet.') + '</p>');\n      this.$formPageManagerNoTabs.appendTo(this.$formPageManagerForm);\n\n      this.$formPageManagerTable = $('<table class=\"data' + (!$tabs.length ? ' hidden' : '') + '\"/>');\n      this.$formPageManagerTable.appendTo(this.$formPageManagerForm);\n\n      let $tbody = $('<tbody/>').appendTo(this.$formPageManagerTable);\n\n      for (let formTab of $tabs) {\n        let tabId = formTab.getAttribute('data-id');\n        let $row = self.getFormManagerTableRow(tabId, formTab, $tabs.length);\n        let $renameBtn = $row.find('> td.formpagemanagerhud-col-rename');\n\n        $renameBtn.on('click', function(event) {\n          self.renameFormPage(event);\n        });\n\n        self.formPageManagerTabs[tabId] = $row;\n        $row.appendTo($tbody);\n      }\n    }\n\n    initFormPageManagerAdminTable() {\n      let self = this;\n\n      window.sproutforms.formPageManager.adminTable = new Craft.AdminTable({\n        tableSelector: self.$formPageManagerTable,\n        noObjectsSelector: self.$formPageManagerNoTabs,\n        sortable: true,\n        reorderAction: 'sprout-forms/forms/reorder-form-tabs',\n        reorderSuccessMessage: Craft.t('sprout-forms', 'Items reordered.'),\n        reorderFailMessage: Craft.t('sprout-forms', 'Couldnt reorder items.'),\n        deleteAction: 'sprout-forms/forms/delete-form-tab',\n        confirmDeleteMessage: Craft.t('sprout-forms', \"Are you sure you want to delete this tab, all of it's fields, and all of it's data?\"),\n        onReorderItems: function(ids) {\n          self.currentTabName = Craft.cp.$selectedTab.text();\n          self.refreshFieldLayout();\n        },\n        onDeleteItem: function(id) {\n          self.currentTabName = Craft.cp.$selectedTab.text();\n          self.refreshFieldLayout();\n        }\n      });\n    }\n\n    addFormPage() {\n      let self = this;\n\n      self.newTabName = prompt(Craft.t('sprout-forms', 'Page Name'));\n\n      if (self.newTabName === null) {\n        return;\n      }\n\n      let data = {\n        formId: self.formId,\n        name: self.newTabName\n      };\n\n      self.$revisionStatus.addClass('invisible');\n      self.$revisionSpinner.removeClass('hidden');\n\n      Craft.postActionRequest('sprout-forms/forms/add-form-tab', data, function(response) {\n        self.$revisionSpinner.addClass('hidden');\n        self.$revisionStatus.removeClass('invisible');\n        self.$revisionStatus.addClass('checkmark-icon');\n\n        if (response.success) {\n          self.currentTabName = 'last';\n          self.refreshFieldLayout();\n        } else {\n          Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to add page.'));\n        }\n      });\n    }\n\n    renameFormPage(event) {\n      let self = this;\n\n      let $row = $(event.currentTarget).parent();\n      let oldName = $row.find('.formpagemanagerhud-col-page-name').text();\n      this.newTabName = prompt(Craft.t('sprout-forms', 'Test'), oldName);\n      let tabId = $row.data('id');\n\n      if (this.newTabName === null) {\n        return;\n      }\n\n      let data = {\n        tabId: tabId,\n        newName: this.newTabName\n      };\n\n      Craft.postActionRequest('sprout-forms/forms/rename-form-tab', data, function(response) {\n        if (response.success) {\n          self.currentTabName = self.newTabName;\n          self.refreshFieldLayout();\n          Craft.cp.displayNotice(Craft.t('sprout-forms', 'Page renamed.'));\n        } else {\n          Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to rename page.'));\n        }\n      });\n\n      if (this.newTabName && this.newTabName !== oldName) {\n        // Tab in field layout\n        $('li[data-id=\"' + tabId + '\"] a').text(this.newTabName);\n\n        // Tab row in Page Manager modal\n        $row.find('.formpagemanagerhud-col-page-name').text(this.newTabName);\n      }\n\n      Craft.cp.initTabs();\n    }\n\n    getFormManagerTableRow(tabId, formTab, totalTabs) {\n\n      let tabName = formTab.querySelector('a').innerText;\n\n      return $(\n        '<tr data-id=\"' + tabId + '\" data-name=\"' + Craft.escapeHtml(tabName) + '\">' +\n        '<td class=\"formpagemanagerhud-col-page-name\">' + tabName + '</td>' +\n        '<td class=\"formpagemanagerhud-col-rename thin\"><a class=\"edit icon\" title=\"' + Craft.t('sprout-forms', 'Rename') + '\" role=\"button\"></a></td>' +\n        (totalTabs > 1 ? '<td class=\"formpagemanagerhud-col-move thin\"><a class=\"move icon\" title=\"' + Craft.t('sprout-forms', 'Reorder') + '\" role=\"button\"></a></td>' : '') +\n        (totalTabs > 1 ? '<td class=\"thin\"><a class=\"delete icon\" title=\"' + Craft.t('app', 'Delete') + '\" role=\"button\"></a></td>' : '') +\n        '</tr>'\n      );\n    }\n\n    refreshFieldLayout() {\n      let self = this;\n      this.$newTabs = null;\n\n      let data = {\n        formId: this.formId\n      };\n\n      self.$revisionStatus.addClass('invisible');\n      self.$revisionSpinner.removeClass('hidden');\n\n      Craft.postActionRequest('sprout-forms/forms/get-updated-layout-html', data, function(response) {\n        if (response.success) {\n          let $tabs = $('#tabs');\n          if ($tabs.length) {\n            $tabs.replaceWith(response.tabsHtml);\n          } else {\n            $(response.tabsHtml).insertBefore($('#content'))\n          }\n\n          $('#sproutforms-fieldlayout-container').html(response.contentHtml);\n\n          // Grab content again because it may have changed\n          Craft.initUiElements($('#content'));\n          Craft.appendHeadHtml(response.headHtml);\n          Craft.appendFootHtml(response.bodyHtml);\n\n          Craft.cp.initTabs();\n          self.initFieldLayout();\n          self.initDragula();\n\n          // Update Page Manager Modal to reflect new ID targets\n          if (window.sproutforms.formPageManager) {\n            self.buildFormPageManagerElements(Craft.cp.$tabs);\n            window.sproutforms.formPageManager.updateBody(self.$formPageManagerForm);\n            self.initFormPageManagerAdminTable();\n          }\n\n          let $targetActiveTab = self.getCurrentTabByName();\n\n          // If we have a targetActiveTab, select it, defaults to first tab if nothing found\n          if ($targetActiveTab !== null) {\n            $targetActiveTab.find('a').trigger('click');\n          }\n\n          self.$revisionSpinner.addClass('hidden');\n          self.$revisionStatus.addClass('checkmark-icon');\n          self.$revisionStatus.removeClass('invisible unsaved');\n\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    getCurrentTabByName() {\n      let self = this;\n\n      if (typeof self.currentTabName === undefined) {\n        return null;\n      }\n\n      if (self.currentTabName === 'last') {\n        let $lastTab = $(Craft.cp.$tabs[Craft.cp.$tabs.length - 1]);\n        self.currentTabName = $lastTab.text().trim();\n      }\n\n      for (let tab of Craft.cp.$tabs) {\n        let $tab = $(tab);\n        let tabName = $tab.find('a').attr('title');\n        if (tabName === self.currentTabName) {\n          return $tab;\n        }\n      }\n\n      return null;\n    }\n\n    /**\n     * Determine if a given HTML element exists within the current viewport\n     *\n     * @returns {boolean}\n     */\n    isInViewport($element) {\n      let topOfElement = $element.offset().top;\n      let bottomOfElement = $element.offset().top + $element.outerHeight();\n      let bottomOfScreen = $(window).scrollTop() + $(window).innerHeight();\n      let topOfScreen = $(window).scrollTop();\n\n      return (bottomOfScreen > topOfElement) && (topOfScreen < bottomOfElement);\n    }\n  }\n\n  window.SproutFormsFieldLayoutEditor = SproutFormsFieldLayoutEditor;\n\n})(jQuery);\n\n","'use strict';\n\nvar emitter = require('contra/emitter');\nvar crossvent = require('crossvent');\nvar classes = require('./classes');\nvar doc = document;\nvar documentElement = doc.documentElement;\n\nfunction dragula (initialContainers, options) {\n  var len = arguments.length;\n  if (len === 1 && Array.isArray(initialContainers) === false) {\n    options = initialContainers;\n    initialContainers = [];\n  }\n  var _mirror; // mirror image\n  var _source; // source container\n  var _item; // item being dragged\n  var _offsetX; // reference x\n  var _offsetY; // reference y\n  var _moveX; // reference move x\n  var _moveY; // reference move y\n  var _initialSibling; // reference sibling when grabbed\n  var _currentSibling; // reference sibling now\n  var _copy; // item used for copying\n  var _renderTimer; // timer for setTimeout renderMirrorImage\n  var _lastDropTarget = null; // last container item was over\n  var _grabbed; // holds mousedown context until first mousemove\n\n  var o = options || {};\n  if (o.moves === void 0) { o.moves = always; }\n  if (o.accepts === void 0) { o.accepts = always; }\n  if (o.invalid === void 0) { o.invalid = invalidTarget; }\n  if (o.containers === void 0) { o.containers = initialContainers || []; }\n  if (o.isContainer === void 0) { o.isContainer = never; }\n  if (o.copy === void 0) { o.copy = false; }\n  if (o.copySortSource === void 0) { o.copySortSource = false; }\n  if (o.revertOnSpill === void 0) { o.revertOnSpill = false; }\n  if (o.removeOnSpill === void 0) { o.removeOnSpill = false; }\n  if (o.direction === void 0) { o.direction = 'vertical'; }\n  if (o.ignoreInputTextSelection === void 0) { o.ignoreInputTextSelection = true; }\n  if (o.mirrorContainer === void 0) { o.mirrorContainer = doc.body; }\n\n  var drake = emitter({\n    containers: o.containers,\n    start: manualStart,\n    end: end,\n    cancel: cancel,\n    remove: remove,\n    destroy: destroy,\n    canMove: canMove,\n    dragging: false\n  });\n\n  if (o.removeOnSpill === true) {\n    drake.on('over', spillOver).on('out', spillOut);\n  }\n\n  events();\n\n  return drake;\n\n  function isContainer (el) {\n    return drake.containers.indexOf(el) !== -1 || o.isContainer(el);\n  }\n\n  function events (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousedown', grab);\n    touchy(documentElement, op, 'mouseup', release);\n  }\n\n  function eventualMovements (remove) {\n    var op = remove ? 'remove' : 'add';\n    touchy(documentElement, op, 'mousemove', startBecauseMouseMoved);\n  }\n\n  function movements (remove) {\n    var op = remove ? 'remove' : 'add';\n    crossvent[op](documentElement, 'selectstart', preventGrabbed); // IE8\n    crossvent[op](documentElement, 'click', preventGrabbed);\n  }\n\n  function destroy () {\n    events(true);\n    release({});\n  }\n\n  function preventGrabbed (e) {\n    if (_grabbed) {\n      e.preventDefault();\n    }\n  }\n\n  function grab (e) {\n    _moveX = e.clientX;\n    _moveY = e.clientY;\n\n    var ignore = whichMouseButton(e) !== 1 || e.metaKey || e.ctrlKey;\n    if (ignore) {\n      return; // we only care about honest-to-god left clicks and touch events\n    }\n    var item = e.target;\n    var context = canStart(item);\n    if (!context) {\n      return;\n    }\n    _grabbed = context;\n    eventualMovements();\n    if (e.type === 'mousedown') {\n      if (isInput(item)) { // see also: https://github.com/bevacqua/dragula/issues/208\n        item.focus(); // fixes https://github.com/bevacqua/dragula/issues/176\n      } else {\n        e.preventDefault(); // fixes https://github.com/bevacqua/dragula/issues/155\n      }\n    }\n  }\n\n  function startBecauseMouseMoved (e) {\n    if (!_grabbed) {\n      return;\n    }\n    if (whichMouseButton(e) === 0) {\n      release({});\n      return; // when text is selected on an input and then dragged, mouseup doesn't fire. this is our only hope\n    }\n    // truthy check fixes #239, equality fixes #207\n    if (e.clientX !== void 0 && e.clientX === _moveX && e.clientY !== void 0 && e.clientY === _moveY) {\n      return;\n    }\n    if (o.ignoreInputTextSelection) {\n      var clientX = getCoord('clientX', e);\n      var clientY = getCoord('clientY', e);\n      var elementBehindCursor = doc.elementFromPoint(clientX, clientY);\n      if (isInput(elementBehindCursor)) {\n        return;\n      }\n    }\n\n    var grabbed = _grabbed; // call to end() unsets _grabbed\n    eventualMovements(true);\n    movements();\n    end();\n    start(grabbed);\n\n    var offset = getOffset(_item);\n    _offsetX = getCoord('pageX', e) - offset.left;\n    _offsetY = getCoord('pageY', e) - offset.top;\n\n    classes.add(_copy || _item, 'gu-transit');\n    renderMirrorImage();\n    drag(e);\n  }\n\n  function canStart (item) {\n    if (drake.dragging && _mirror) {\n      return;\n    }\n    if (isContainer(item)) {\n      return; // don't drag container itself\n    }\n    var handle = item;\n    while (getParent(item) && isContainer(getParent(item)) === false) {\n      if (o.invalid(item, handle)) {\n        return;\n      }\n      item = getParent(item); // drag target should be a top element\n      if (!item) {\n        return;\n      }\n    }\n    var source = getParent(item);\n    if (!source) {\n      return;\n    }\n    if (o.invalid(item, handle)) {\n      return;\n    }\n\n    var movable = o.moves(item, source, handle, nextEl(item));\n    if (!movable) {\n      return;\n    }\n\n    return {\n      item: item,\n      source: source\n    };\n  }\n\n  function canMove (item) {\n    return !!canStart(item);\n  }\n\n  function manualStart (item) {\n    var context = canStart(item);\n    if (context) {\n      start(context);\n    }\n  }\n\n  function start (context) {\n    if (isCopy(context.item, context.source)) {\n      _copy = context.item.cloneNode(true);\n      drake.emit('cloned', _copy, context.item, 'copy');\n    }\n\n    _source = context.source;\n    _item = context.item;\n    _initialSibling = _currentSibling = nextEl(context.item);\n\n    drake.dragging = true;\n    drake.emit('drag', _item, _source);\n  }\n\n  function invalidTarget () {\n    return false;\n  }\n\n  function end () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    drop(item, getParent(item));\n  }\n\n  function ungrab () {\n    _grabbed = false;\n    eventualMovements(true);\n    movements(true);\n  }\n\n  function release (e) {\n    ungrab();\n\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    if (dropTarget && ((_copy && o.copySortSource) || (!_copy || dropTarget !== _source))) {\n      drop(item, dropTarget);\n    } else if (o.removeOnSpill) {\n      remove();\n    } else {\n      cancel();\n    }\n  }\n\n  function drop (item, target) {\n    var parent = getParent(item);\n    if (_copy && o.copySortSource && target === _source) {\n      parent.removeChild(_item);\n    }\n    if (isInitialPlacement(target)) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, target, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function remove () {\n    if (!drake.dragging) {\n      return;\n    }\n    var item = _copy || _item;\n    var parent = getParent(item);\n    if (parent) {\n      parent.removeChild(item);\n    }\n    drake.emit(_copy ? 'cancel' : 'remove', item, parent, _source);\n    cleanup();\n  }\n\n  function cancel (revert) {\n    if (!drake.dragging) {\n      return;\n    }\n    var reverts = arguments.length > 0 ? revert : o.revertOnSpill;\n    var item = _copy || _item;\n    var parent = getParent(item);\n    var initial = isInitialPlacement(parent);\n    if (initial === false && reverts) {\n      if (_copy) {\n        if (parent) {\n          parent.removeChild(_copy);\n        }\n      } else {\n        _source.insertBefore(item, _initialSibling);\n      }\n    }\n    if (initial || reverts) {\n      drake.emit('cancel', item, _source, _source);\n    } else {\n      drake.emit('drop', item, parent, _source, _currentSibling);\n    }\n    cleanup();\n  }\n\n  function cleanup () {\n    var item = _copy || _item;\n    ungrab();\n    removeMirrorImage();\n    if (item) {\n      classes.rm(item, 'gu-transit');\n    }\n    if (_renderTimer) {\n      clearTimeout(_renderTimer);\n    }\n    drake.dragging = false;\n    if (_lastDropTarget) {\n      drake.emit('out', item, _lastDropTarget, _source);\n    }\n    drake.emit('dragend', item);\n    _source = _item = _copy = _initialSibling = _currentSibling = _renderTimer = _lastDropTarget = null;\n  }\n\n  function isInitialPlacement (target, s) {\n    var sibling;\n    if (s !== void 0) {\n      sibling = s;\n    } else if (_mirror) {\n      sibling = _currentSibling;\n    } else {\n      sibling = nextEl(_copy || _item);\n    }\n    return target === _source && sibling === _initialSibling;\n  }\n\n  function findDropTarget (elementBehindCursor, clientX, clientY) {\n    var target = elementBehindCursor;\n    while (target && !accepted()) {\n      target = getParent(target);\n    }\n    return target;\n\n    function accepted () {\n      var droppable = isContainer(target);\n      if (droppable === false) {\n        return false;\n      }\n\n      var immediate = getImmediateChild(target, elementBehindCursor);\n      var reference = getReference(target, immediate, clientX, clientY);\n      var initial = isInitialPlacement(target, reference);\n      if (initial) {\n        return true; // should always be able to drop it right back where it was\n      }\n      return o.accepts(_item, target, _source, reference);\n    }\n  }\n\n  function drag (e) {\n    if (!_mirror) {\n      return;\n    }\n    e.preventDefault();\n\n    var clientX = getCoord('clientX', e);\n    var clientY = getCoord('clientY', e);\n    var x = clientX - _offsetX;\n    var y = clientY - _offsetY;\n\n    _mirror.style.left = x + 'px';\n    _mirror.style.top = y + 'px';\n\n    var item = _copy || _item;\n    var elementBehindCursor = getElementBehindPoint(_mirror, clientX, clientY);\n    var dropTarget = findDropTarget(elementBehindCursor, clientX, clientY);\n    var changed = dropTarget !== null && dropTarget !== _lastDropTarget;\n    if (changed || dropTarget === null) {\n      out();\n      _lastDropTarget = dropTarget;\n      over();\n    }\n    var parent = getParent(item);\n    if (dropTarget === _source && _copy && !o.copySortSource) {\n      if (parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    var reference;\n    var immediate = getImmediateChild(dropTarget, elementBehindCursor);\n    if (immediate !== null) {\n      reference = getReference(dropTarget, immediate, clientX, clientY);\n    } else if (o.revertOnSpill === true && !_copy) {\n      reference = _initialSibling;\n      dropTarget = _source;\n    } else {\n      if (_copy && parent) {\n        parent.removeChild(item);\n      }\n      return;\n    }\n    if (\n      (reference === null && changed) ||\n      reference !== item &&\n      reference !== nextEl(item)\n    ) {\n      _currentSibling = reference;\n      dropTarget.insertBefore(item, reference);\n      drake.emit('shadow', item, dropTarget, _source);\n    }\n    function moved (type) { drake.emit(type, item, _lastDropTarget, _source); }\n    function over () { if (changed) { moved('over'); } }\n    function out () { if (_lastDropTarget) { moved('out'); } }\n  }\n\n  function spillOver (el) {\n    classes.rm(el, 'gu-hide');\n  }\n\n  function spillOut (el) {\n    if (drake.dragging) { classes.add(el, 'gu-hide'); }\n  }\n\n  function renderMirrorImage () {\n    if (_mirror) {\n      return;\n    }\n    var rect = _item.getBoundingClientRect();\n    _mirror = _item.cloneNode(true);\n    _mirror.style.width = getRectWidth(rect) + 'px';\n    _mirror.style.height = getRectHeight(rect) + 'px';\n    classes.rm(_mirror, 'gu-transit');\n    classes.add(_mirror, 'gu-mirror');\n    o.mirrorContainer.appendChild(_mirror);\n    touchy(documentElement, 'add', 'mousemove', drag);\n    classes.add(o.mirrorContainer, 'gu-unselectable');\n    drake.emit('cloned', _mirror, _item, 'mirror');\n  }\n\n  function removeMirrorImage () {\n    if (_mirror) {\n      classes.rm(o.mirrorContainer, 'gu-unselectable');\n      touchy(documentElement, 'remove', 'mousemove', drag);\n      getParent(_mirror).removeChild(_mirror);\n      _mirror = null;\n    }\n  }\n\n  function getImmediateChild (dropTarget, target) {\n    var immediate = target;\n    while (immediate !== dropTarget && getParent(immediate) !== dropTarget) {\n      immediate = getParent(immediate);\n    }\n    if (immediate === documentElement) {\n      return null;\n    }\n    return immediate;\n  }\n\n  function getReference (dropTarget, target, x, y) {\n    var horizontal = o.direction === 'horizontal';\n    var reference = target !== dropTarget ? inside() : outside();\n    return reference;\n\n    function outside () { // slower, but able to figure out any position\n      var len = dropTarget.children.length;\n      var i;\n      var el;\n      var rect;\n      for (i = 0; i < len; i++) {\n        el = dropTarget.children[i];\n        rect = el.getBoundingClientRect();\n        if (horizontal && (rect.left + rect.width / 2) > x) { return el; }\n        if (!horizontal && (rect.top + rect.height / 2) > y) { return el; }\n      }\n      return null;\n    }\n\n    function inside () { // faster, but only available if dropped inside a child element\n      var rect = target.getBoundingClientRect();\n      if (horizontal) {\n        return resolve(x > rect.left + getRectWidth(rect) / 2);\n      }\n      return resolve(y > rect.top + getRectHeight(rect) / 2);\n    }\n\n    function resolve (after) {\n      return after ? nextEl(target) : target;\n    }\n  }\n\n  function isCopy (item, container) {\n    return typeof o.copy === 'boolean' ? o.copy : o.copy(item, container);\n  }\n}\n\nfunction touchy (el, op, type, fn) {\n  var touch = {\n    mouseup: 'touchend',\n    mousedown: 'touchstart',\n    mousemove: 'touchmove'\n  };\n  var pointers = {\n    mouseup: 'pointerup',\n    mousedown: 'pointerdown',\n    mousemove: 'pointermove'\n  };\n  var microsoft = {\n    mouseup: 'MSPointerUp',\n    mousedown: 'MSPointerDown',\n    mousemove: 'MSPointerMove'\n  };\n  if (global.navigator.pointerEnabled) {\n    crossvent[op](el, pointers[type], fn);\n  } else if (global.navigator.msPointerEnabled) {\n    crossvent[op](el, microsoft[type], fn);\n  } else {\n    crossvent[op](el, touch[type], fn);\n    crossvent[op](el, type, fn);\n  }\n}\n\nfunction whichMouseButton (e) {\n  if (e.touches !== void 0) { return e.touches.length; }\n  if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\n  if (e.buttons !== void 0) { return e.buttons; }\n  var button = e.button;\n  if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\n    return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\n  }\n}\n\nfunction getOffset (el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    left: rect.left + getScroll('scrollLeft', 'pageXOffset'),\n    top: rect.top + getScroll('scrollTop', 'pageYOffset')\n  };\n}\n\nfunction getScroll (scrollProp, offsetProp) {\n  if (typeof global[offsetProp] !== 'undefined') {\n    return global[offsetProp];\n  }\n  if (documentElement.clientHeight) {\n    return documentElement[scrollProp];\n  }\n  return doc.body[scrollProp];\n}\n\nfunction getElementBehindPoint (point, x, y) {\n  var p = point || {};\n  var state = p.className;\n  var el;\n  p.className += ' gu-hide';\n  el = doc.elementFromPoint(x, y);\n  p.className = state;\n  return el;\n}\n\nfunction never () { return false; }\nfunction always () { return true; }\nfunction getRectWidth (rect) { return rect.width || (rect.right - rect.left); }\nfunction getRectHeight (rect) { return rect.height || (rect.bottom - rect.top); }\nfunction getParent (el) { return el.parentNode === doc ? null : el.parentNode; }\nfunction isInput (el) { return el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT' || isEditable(el); }\nfunction isEditable (el) {\n  if (!el) { return false; } // no parents were editable\n  if (el.contentEditable === 'false') { return false; } // stop the lookup\n  if (el.contentEditable === 'true') { return true; } // found a contentEditable element in the chain\n  return isEditable(getParent(el)); // contentEditable is set to 'inherit'\n}\n\nfunction nextEl (el) {\n  return el.nextElementSibling || manually();\n  function manually () {\n    var sibling = el;\n    do {\n      sibling = sibling.nextSibling;\n    } while (sibling && sibling.nodeType !== 1);\n    return sibling;\n  }\n}\n\nfunction getEventHost (e) {\n  // on touchend event, we have to use `e.changedTouches`\n  // see http://stackoverflow.com/questions/7192563/touchend-event-properties\n  // see https://github.com/bevacqua/dragula/issues/34\n  if (e.targetTouches && e.targetTouches.length) {\n    return e.targetTouches[0];\n  }\n  if (e.changedTouches && e.changedTouches.length) {\n    return e.changedTouches[0];\n  }\n  return e;\n}\n\nfunction getCoord (coord, e) {\n  var host = getEventHost(e);\n  var missMap = {\n    pageX: 'clientX', // IE8\n    pageY: 'clientY' // IE8\n  };\n  if (coord in missMap && !(coord in host) && missMap[coord] in host) {\n    coord = missMap[coord];\n  }\n  return host[coord];\n}\n\nmodule.exports = dragula;\n","'use strict';\n\nvar atoa = require('atoa');\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter (thing, options) {\n  var opts = options || {};\n  var evt = {};\n  if (thing === undefined) { thing = {}; }\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n    return thing;\n  };\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n    thing.on(type, fn);\n    return thing;\n  };\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n      if (!et) { return thing; }\n      et.splice(et.indexOf(fn), 1);\n    }\n    return thing;\n  };\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n      et.forEach(function emitter (listen) {\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n        if (listen._once) { thing.off(type, listen); }\n      });\n      return thing;\n    };\n  };\n  return thing;\n};\n","module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\n","'use strict';\n\nvar ticky = require('ticky');\n\nmodule.exports = function debounce (fn, args, ctx) {\n  if (!fn) { return; }\n  ticky(function run () {\n    fn.apply(ctx || null, args || []);\n  });\n};\n","var si = typeof setImmediate === 'function', tick;\nif (si) {\n  tick = function (fn) { setImmediate(fn); };\n} else {\n  tick = function (fn) { setTimeout(fn, 0); };\n}\n\nmodule.exports = tick;","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar customEvent = require('custom-event');\nvar eventmap = require('./eventmap');\nvar doc = global.document;\nvar addEvent = addEventEasy;\nvar removeEvent = removeEventEasy;\nvar hardCache = [];\n\nif (!global.addEventListener) {\n  addEvent = addEventHard;\n  removeEvent = removeEventHard;\n}\n\nmodule.exports = {\n  add: addEvent,\n  remove: removeEvent,\n  fabricate: fabricateEvent\n};\n\nfunction addEventEasy (el, type, fn, capturing) {\n  return el.addEventListener(type, fn, capturing);\n}\n\nfunction addEventHard (el, type, fn) {\n  return el.attachEvent('on' + type, wrap(el, type, fn));\n}\n\nfunction removeEventEasy (el, type, fn, capturing) {\n  return el.removeEventListener(type, fn, capturing);\n}\n\nfunction removeEventHard (el, type, fn) {\n  var listener = unwrap(el, type, fn);\n  if (listener) {\n    return el.detachEvent('on' + type, listener);\n  }\n}\n\nfunction fabricateEvent (el, type, model) {\n  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();\n  if (el.dispatchEvent) {\n    el.dispatchEvent(e);\n  } else {\n    el.fireEvent('on' + type, e);\n  }\n  function makeClassicEvent () {\n    var e;\n    if (doc.createEvent) {\n      e = doc.createEvent('Event');\n      e.initEvent(type, true, true);\n    } else if (doc.createEventObject) {\n      e = doc.createEventObject();\n    }\n    return e;\n  }\n  function makeCustomEvent () {\n    return new customEvent(type, { detail: model });\n  }\n}\n\nfunction wrapperFactory (el, type, fn) {\n  return function wrapper (originalEvent) {\n    var e = originalEvent || global.event;\n    e.target = e.target || e.srcElement;\n    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };\n    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };\n    e.which = e.which || e.keyCode;\n    fn.call(el, e);\n  };\n}\n\nfunction wrap (el, type, fn) {\n  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);\n  hardCache.push({\n    wrapper: wrapper,\n    element: el,\n    type: type,\n    fn: fn\n  });\n  return wrapper;\n}\n\nfunction unwrap (el, type, fn) {\n  var i = find(el, type, fn);\n  if (i) {\n    var wrapper = hardCache[i].wrapper;\n    hardCache.splice(i, 1); // free up a tad of memory\n    return wrapper;\n  }\n}\n\nfunction find (el, type, fn) {\n  var i, item;\n  for (i = 0; i < hardCache.length; i++) {\n    item = hardCache[i];\n    if (item.element === el && item.type === type && item.fn === fn) {\n      return i;\n    }\n  }\n}\n","\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","'use strict';\n\nvar eventmap = [];\nvar eventname = '';\nvar ron = /^on/;\n\nfor (eventname in global) {\n  if (ron.test(eventname)) {\n    eventmap.push(eventname.slice(2));\n  }\n}\n\nmodule.exports = eventmap;\n","'use strict';\n\nvar cache = {};\nvar start = '(?:^|\\\\s)';\nvar end = '(?:\\\\s|$)';\n\nfunction lookupClass (className) {\n  var cached = cache[className];\n  if (cached) {\n    cached.lastIndex = 0;\n  } else {\n    cache[className] = cached = new RegExp(start + className + end, 'g');\n  }\n  return cached;\n}\n\nfunction addClass (el, className) {\n  var current = el.className;\n  if (!current.length) {\n    el.className = className;\n  } else if (!lookupClass(className).test(current)) {\n    el.className += ' ' + className;\n  }\n}\n\nfunction rmClass (el, className) {\n  el.className = el.className.replace(lookupClass(className), ' ').trim();\n}\n\nmodule.exports = {\n  add: addClass,\n  rm: rmClass\n};\n","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar typeFunc = require('type-func');\nvar animationFramePolyfill = require('animation-frame-polyfill');\nvar domSet = require('dom-set');\nvar domPlane = require('dom-plane');\nvar mousemoveDispatcher = _interopDefault(require('dom-mousemove-dispatcher'));\n\nfunction AutoScroller(elements, options){\n    if ( options === void 0 ) options = {};\n\n    var self = this;\n    var maxSpeed = 4, scrolling = false;\n\n    this.margin = options.margin || -1;\n    //this.scrolling = false;\n    this.scrollWhenOutside = options.scrollWhenOutside || false;\n\n    var point = {},\n        pointCB = domPlane.createPointCB(point),\n        dispatcher = mousemoveDispatcher(),\n        down = false;\n\n    window.addEventListener('mousemove', pointCB, false);\n    window.addEventListener('touchmove', pointCB, false);\n\n    if(!isNaN(options.maxSpeed)){\n        maxSpeed = options.maxSpeed;\n    }\n\n    this.autoScroll = typeFunc.boolean(options.autoScroll);\n    this.syncMove = typeFunc.boolean(options.syncMove, false);\n\n    this.destroy = function(forceCleanAnimation) {\n        window.removeEventListener('mousemove', pointCB, false);\n        window.removeEventListener('touchmove', pointCB, false);\n        window.removeEventListener('mousedown', onDown, false);\n        window.removeEventListener('touchstart', onDown, false);\n        window.removeEventListener('mouseup', onUp, false);\n        window.removeEventListener('touchend', onUp, false);\n        window.removeEventListener('pointerup', onUp, false);\n        window.removeEventListener('mouseleave', onMouseOut, false);\n\n        window.removeEventListener('mousemove', onMove, false);\n        window.removeEventListener('touchmove', onMove, false);\n\n        window.removeEventListener('scroll', setScroll, true);\n        elements = [];\n        if(forceCleanAnimation){\n          cleanAnimation();\n        }\n    };\n\n    this.add = function(){\n        var element = [], len = arguments.length;\n        while ( len-- ) element[ len ] = arguments[ len ];\n\n        domSet.addElements.apply(void 0, [ elements ].concat( element ));\n        return this;\n    };\n\n    this.remove = function(){\n        var element = [], len = arguments.length;\n        while ( len-- ) element[ len ] = arguments[ len ];\n\n        return domSet.removeElements.apply(void 0, [ elements ].concat( element ));\n    };\n\n    var hasWindow = null, windowAnimationFrame;\n\n    if(Object.prototype.toString.call(elements) !== '[object Array]'){\n        elements = [elements];\n    }\n\n    (function(temp){\n        elements = [];\n        temp.forEach(function(element){\n            if(element === window){\n                hasWindow = window;\n            }else{\n                self.add(element);\n            }\n        });\n    }(elements));\n\n    Object.defineProperties(this, {\n        down: {\n            get: function(){ return down; }\n        },\n        maxSpeed: {\n            get: function(){ return maxSpeed; }\n        },\n        point: {\n            get: function(){ return point; }\n        },\n        scrolling: {\n            get: function(){ return scrolling; }\n        }\n    });\n\n    var n = 0, current = null, animationFrame;\n\n    window.addEventListener('mousedown', onDown, false);\n    window.addEventListener('touchstart', onDown, false);\n    window.addEventListener('mouseup', onUp, false);\n    window.addEventListener('touchend', onUp, false);\n\n    /*\n    IE does not trigger mouseup event when scrolling.\n    It is a known issue that Microsoft won't fix.\n    https://connect.microsoft.com/IE/feedback/details/783058/scrollbar-trigger-mousedown-but-not-mouseup\n    IE supports pointer events instead\n    */\n    window.addEventListener('pointerup', onUp, false);\n\n    window.addEventListener('mousemove', onMove, false);\n    window.addEventListener('touchmove', onMove, false);\n\n    window.addEventListener('mouseleave', onMouseOut, false);\n\n    window.addEventListener('scroll', setScroll, true);\n\n    function setScroll(e){\n\n        for(var i=0; i<elements.length; i++){\n            if(elements[i] === e.target){\n                scrolling = true;\n                break;\n            }\n        }\n\n        if(scrolling){\n            animationFramePolyfill.requestAnimationFrame(function (){ return scrolling = false; });\n        }\n    }\n\n    function onDown(){\n        down = true;\n    }\n\n    function onUp(){\n        down = false;\n        cleanAnimation();\n    }\n    function cleanAnimation(){\n      animationFramePolyfill.cancelAnimationFrame(animationFrame);\n      animationFramePolyfill.cancelAnimationFrame(windowAnimationFrame);\n    }\n    function onMouseOut(){\n        down = false;\n    }\n\n    function getTarget(target){\n        if(!target){\n            return null;\n        }\n\n        if(current === target){\n            return target;\n        }\n\n        if(domSet.hasElement(elements, target)){\n            return target;\n        }\n\n        while(target = target.parentNode){\n            if(domSet.hasElement(elements, target)){\n                return target;\n            }\n        }\n\n        return null;\n    }\n\n    function getElementUnderPoint(){\n        var underPoint = null;\n\n        for(var i=0; i<elements.length; i++){\n            if(inside(point, elements[i])){\n                underPoint = elements[i];\n            }\n        }\n\n        return underPoint;\n    }\n\n\n    function onMove(event){\n\n        if(!self.autoScroll()) { return; }\n\n        if(event['dispatched']){ return; }\n\n        var target = event.target, body = document.body;\n\n        if(current && !inside(point, current)){\n            if(!self.scrollWhenOutside){\n                current = null;\n            }\n        }\n\n        if(target && target.parentNode === body){\n            //The special condition to improve speed.\n            target = getElementUnderPoint();\n        }else{\n            target = getTarget(target);\n\n            if(!target){\n                target = getElementUnderPoint();\n            }\n        }\n\n\n        if(target && target !== current){\n            current = target;\n        }\n\n        if(hasWindow){\n            animationFramePolyfill.cancelAnimationFrame(windowAnimationFrame);\n            windowAnimationFrame = animationFramePolyfill.requestAnimationFrame(scrollWindow);\n        }\n\n\n        if(!current){\n            return;\n        }\n\n        animationFramePolyfill.cancelAnimationFrame(animationFrame);\n        animationFrame = animationFramePolyfill.requestAnimationFrame(scrollTick);\n    }\n\n    function scrollWindow(){\n        autoScroll(hasWindow);\n\n        animationFramePolyfill.cancelAnimationFrame(windowAnimationFrame);\n        windowAnimationFrame = animationFramePolyfill.requestAnimationFrame(scrollWindow);\n    }\n\n    function scrollTick(){\n\n        if(!current){\n            return;\n        }\n\n        autoScroll(current);\n\n        animationFramePolyfill.cancelAnimationFrame(animationFrame);\n        animationFrame = animationFramePolyfill.requestAnimationFrame(scrollTick);\n\n    }\n\n\n    function autoScroll(el){\n        var rect = domPlane.getClientRect(el), scrollx, scrolly;\n\n        if(point.x < rect.left + self.margin){\n            scrollx = Math.floor(\n                Math.max(-1, (point.x - rect.left) / self.margin - 1) * self.maxSpeed\n            );\n        }else if(point.x > rect.right - self.margin){\n            scrollx = Math.ceil(\n                Math.min(1, (point.x - rect.right) / self.margin + 1) * self.maxSpeed\n            );\n        }else{\n            scrollx = 0;\n        }\n\n        if(point.y < rect.top + self.margin){\n            scrolly = Math.floor(\n                Math.max(-1, (point.y - rect.top) / self.margin - 1) * self.maxSpeed\n            );\n        }else if(point.y > rect.bottom - self.margin){\n            scrolly = Math.ceil(\n                Math.min(1, (point.y - rect.bottom) / self.margin + 1) * self.maxSpeed\n            );\n        }else{\n            scrolly = 0;\n        }\n\n        if(self.syncMove()){\n            /*\n            Notes about mousemove event dispatch.\n            screen(X/Y) should need to be updated.\n            Some other properties might need to be set.\n            Keep the syncMove option default false until all inconsistencies are taken care of.\n            */\n            dispatcher.dispatch(el, {\n                pageX: point.pageX + scrollx,\n                pageY: point.pageY + scrolly,\n                clientX: point.x + scrollx,\n                clientY: point.y + scrolly\n            });\n        }\n\n        setTimeout(function (){\n\n            if(scrolly){\n                scrollY(el, scrolly);\n            }\n\n            if(scrollx){\n                scrollX(el, scrollx);\n            }\n\n        });\n    }\n\n    function scrollY(el, amount){\n        if(el === window){\n            window.scrollTo(el.pageXOffset, el.pageYOffset + amount);\n        }else{\n            el.scrollTop += amount;\n        }\n    }\n\n    function scrollX(el, amount){\n        if(el === window){\n            window.scrollTo(el.pageXOffset + amount, el.pageYOffset);\n        }else{\n            el.scrollLeft += amount;\n        }\n    }\n\n}\n\nfunction AutoScrollerFactory(element, options){\n    return new AutoScroller(element, options);\n}\n\nfunction inside(point, el, rect){\n    if(!rect){\n        return domPlane.pointInside(point, el);\n    }else{\n        return (point.y > rect.top && point.y < rect.bottom &&\n                point.x > rect.left && point.x < rect.right);\n    }\n}\n\n/*\ngit remote add origin https://github.com/hollowdoor/dom_autoscroller.git\ngit push -u origin master\n*/\n\nmodule.exports = AutoScrollerFactory;\n//# sourceMappingURL=bundle.js.map\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar prefix = ['webkit', 'moz', 'ms', 'o'];\n\nvar requestAnimationFrame = exports.requestAnimationFrame = function () {\n\n  for (var i = 0, limit = prefix.length; i < limit && !window.requestAnimationFrame; ++i) {\n    window.requestAnimationFrame = window[prefix[i] + 'RequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame) {\n    (function () {\n      var lastTime = 0;\n\n      window.requestAnimationFrame = function (callback) {\n        var now = new Date().getTime();\n        var ttc = Math.max(0, 16 - now - lastTime);\n        var timer = window.setTimeout(function () {\n          return callback(now + ttc);\n        }, ttc);\n\n        lastTime = now + ttc;\n\n        return timer;\n      };\n    })();\n  }\n\n  return window.requestAnimationFrame.bind(window);\n}();\n\nvar cancelAnimationFrame = exports.cancelAnimationFrame = function () {\n\n  for (var i = 0, limit = prefix.length; i < limit && !window.cancelAnimationFrame; ++i) {\n    window.cancelAnimationFrame = window[prefix[i] + 'CancelAnimationFrame'] || window[prefix[i] + 'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function (timer) {\n      window.clearTimeout(timer);\n    };\n  }\n\n  return window.cancelAnimationFrame.bind(window);\n}();\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar arrayFrom = _interopDefault(require('array-from'));\nvar isArray = _interopDefault(require('is-array'));\nvar isElement = _interopDefault(require('iselement'));\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n/**\n * Returns `true` if provided input is Element.\n * @name isElement\n * @param {*} [input]\n * @returns {boolean}\n */\nvar isElement$1 = function (input) {\n  return input != null && (typeof input === 'undefined' ? 'undefined' : _typeof(input)) === 'object' && input.nodeType === 1 && _typeof(input.style) === 'object' && _typeof(input.ownerDocument) === 'object';\n};\n\nfunction select(selector){\n    if(typeof selector === 'string'){\n        try{\n            return document.querySelector(selector);\n        }catch(e){\n            throw e;\n        }\n    }else if(isElement(selector)){\n        return selector;\n    }\n}\n\nfunction selectAll(selector){\n    if(typeof selector === 'string'){\n        return Array.prototype.slice.apply(\n            document.querySelectorAll(selector)\n        );\n    }else if(isArray(selector)){\n        return selector.map(select);\n    }else if('length' in selector){\n        return arrayFrom(selector).map(select);\n    }\n}\n\nfunction indexOfElement(elements, element){\n    element = resolveElement(element, true);\n    if(!isElement$1(element)) { return -1; }\n    for(var i=0; i<elements.length; i++){\n        if(elements[i] === element){\n            return i;\n        }\n    }\n    return -1;\n}\n\nfunction hasElement(elements, element){\n    return -1 !== indexOfElement(elements, element);\n}\n\nfunction domListOf(arr){\n\n    if(!arr) { return []; }\n\n    try{\n        if(typeof arr === 'string'){\n            return arrayFrom(document.querySelectorAll(arr));\n        }else if(isArray(arr)){\n            return arr.map(resolveElement);\n        }else{\n            if(typeof arr.length === 'undefined'){\n                return [resolveElement(arr)];\n            }\n\n            return arrayFrom(arr, resolveElement);\n\n        }\n    }catch(e){\n        throw new Error(e);\n    }\n\n}\n\nfunction concatElementLists(){\n    var lists = [], len = arguments.length;\n    while ( len-- ) lists[ len ] = arguments[ len ];\n\n    return lists.reduce(function (last, list){\n        return list.length ? last : last.concat(domListOf(list));\n    }, []);\n}\n\nfunction pushElements(elements, toAdd){\n\n    for(var i=0; i<toAdd.length; i++){\n        if(!hasElement(elements, toAdd[i]))\n            { elements.push(toAdd[i]); }\n    }\n\n    return toAdd;\n}\n\nfunction addElements(elements){\n    var toAdd = [], len = arguments.length - 1;\n    while ( len-- > 0 ) toAdd[ len ] = arguments[ len + 1 ];\n\n    toAdd = toAdd.map(resolveElement);\n    return pushElements(elements, toAdd);\n}\n\nfunction removeElements(elements){\n    var toRemove = [], len = arguments.length - 1;\n    while ( len-- > 0 ) toRemove[ len ] = arguments[ len + 1 ];\n\n    return toRemove.map(resolveElement).reduce(function (last, e){\n\n        var index = indexOfElement(elements, e);\n\n        if(index !== -1)\n            { return last.concat(elements.splice(index, 1)); }\n        return last;\n    }, []);\n}\n\nfunction resolveElement(element, noThrow){\n    if(typeof element === 'string'){\n        try{\n            return document.querySelector(element);\n        }catch(e){\n            throw e;\n        }\n\n    }\n\n    if(!isElement$1(element) && !noThrow){\n        throw new TypeError((element + \" is not a DOM element.\"));\n    }\n    return element;\n}\n\nexports.indexOfElement = indexOfElement;\nexports.hasElement = hasElement;\nexports.domListOf = domListOf;\nexports.concatElementLists = concatElementLists;\nexports.addElements = addElements;\nexports.removeElements = removeElements;\nexports.resolveElement = resolveElement;\nexports.select = select;\nexports.selectAll = selectAll;\n//# sourceMappingURL=bundle.js.map\n","module.exports = (typeof Array.from === 'function' ?\n  Array.from :\n  require('./polyfill')\n);\n","// Production steps of ECMA-262, Edition 6, 22.1.2.1\n// Reference: http://www.ecma-international.org/ecma-262/6.0/#sec-array.from\nmodule.exports = (function() {\n  var isCallable = function(fn) {\n    return typeof fn === 'function';\n  };\n  var toInteger = function (value) {\n    var number = Number(value);\n    if (isNaN(number)) { return 0; }\n    if (number === 0 || !isFinite(number)) { return number; }\n    return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n  };\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n  var toLength = function (value) {\n    var len = toInteger(value);\n    return Math.min(Math.max(len, 0), maxSafeInteger);\n  };\n  var iteratorProp = function(value) {\n    if(value != null) {\n      if(['string','number','boolean','symbol'].indexOf(typeof value) > -1){\n        return Symbol.iterator;\n      } else if (\n        (typeof Symbol !== 'undefined') &&\n        ('iterator' in Symbol) &&\n        (Symbol.iterator in value)\n      ) {\n        return Symbol.iterator;\n      }\n      // Support \"@@iterator\" placeholder, Gecko 27 to Gecko 35\n      else if ('@@iterator' in value) {\n        return '@@iterator';\n      }\n    }\n  };\n  var getMethod = function(O, P) {\n    // Assert: IsPropertyKey(P) is true.\n    if (O != null && P != null) {\n      // Let func be GetV(O, P).\n      var func = O[P];\n      // ReturnIfAbrupt(func).\n      // If func is either undefined or null, return undefined.\n      if(func == null) {\n        return void 0;\n      }\n      // If IsCallable(func) is false, throw a TypeError exception.\n      if (!isCallable(func)) {\n        throw new TypeError(func + ' is not a function');\n      }\n      return func;\n    }\n  };\n  var iteratorStep = function(iterator) {\n    // Let result be IteratorNext(iterator).\n    // ReturnIfAbrupt(result).\n    var result = iterator.next();\n    // Let done be IteratorComplete(result).\n    // ReturnIfAbrupt(done).\n    var done = Boolean(result.done);\n    // If done is true, return false.\n    if(done) {\n      return false;\n    }\n    // Return result.\n    return result;\n  };\n\n  // The length property of the from method is 1.\n  return function from(items /*, mapFn, thisArg */ ) {\n    'use strict';\n\n    // 1. Let C be the this value.\n    var C = this;\n\n    // 2. If mapfn is undefined, let mapping be false.\n    var mapFn = arguments.length > 1 ? arguments[1] : void 0;\n\n    var T;\n    if (typeof mapFn !== 'undefined') {\n      // 3. else\n      //   a. If IsCallable(mapfn) is false, throw a TypeError exception.\n      if (!isCallable(mapFn)) {\n        throw new TypeError(\n          'Array.from: when provided, the second argument must be a function'\n        );\n      }\n\n      //   b. If thisArg was supplied, let T be thisArg; else let T\n      //      be undefined.\n      if (arguments.length > 2) {\n        T = arguments[2];\n      }\n      //   c. Let mapping be true (implied by mapFn)\n    }\n\n    var A, k;\n\n    // 4. Let usingIterator be GetMethod(items, @@iterator).\n    // 5. ReturnIfAbrupt(usingIterator).\n    var usingIterator = getMethod(items, iteratorProp(items));\n\n    // 6. If usingIterator is not undefined, then\n    if (usingIterator !== void 0) {\n      // a. If IsConstructor(C) is true, then\n      //   i. Let A be the result of calling the [[Construct]]\n      //      internal method of C with an empty argument list.\n      // b. Else,\n      //   i. Let A be the result of the abstract operation ArrayCreate\n      //      with argument 0.\n      // c. ReturnIfAbrupt(A).\n      A = isCallable(C) ? Object(new C()) : [];\n\n      // d. Let iterator be GetIterator(items, usingIterator).\n      var iterator = usingIterator.call(items);\n\n      // e. ReturnIfAbrupt(iterator).\n      if (iterator == null) {\n        throw new TypeError(\n          'Array.from requires an array-like or iterable object'\n        );\n      }\n\n      // f. Let k be 0.\n      k = 0;\n\n      // g. Repeat\n      var next, nextValue;\n      while (true) {\n        // i. Let Pk be ToString(k).\n        // ii. Let next be IteratorStep(iterator).\n        // iii. ReturnIfAbrupt(next).\n        next = iteratorStep(iterator);\n\n        // iv. If next is false, then\n        if (!next) {\n\n          // 1. Let setStatus be Set(A, \"length\", k, true).\n          // 2. ReturnIfAbrupt(setStatus).\n          A.length = k;\n\n          // 3. Return A.\n          return A;\n        }\n        // v. Let nextValue be IteratorValue(next).\n        // vi. ReturnIfAbrupt(nextValue)\n        nextValue = next.value;\n\n        // vii. If mapping is true, then\n        //   1. Let mappedValue be Call(mapfn, T, nextValue, k).\n        //   2. If mappedValue is an abrupt completion, return\n        //      IteratorClose(iterator, mappedValue).\n        //   3. Let mappedValue be mappedValue.[[value]].\n        // viii. Else, let mappedValue be nextValue.\n        // ix.  Let defineStatus be the result of\n        //      CreateDataPropertyOrThrow(A, Pk, mappedValue).\n        // x. [TODO] If defineStatus is an abrupt completion, return\n        //    IteratorClose(iterator, defineStatus).\n        if (mapFn) {\n          A[k] = mapFn.call(T, nextValue, k);\n        }\n        else {\n          A[k] = nextValue;\n        }\n        // xi. Increase k by 1.\n        k++;\n      }\n      // 7. Assert: items is not an Iterable so assume it is\n      //    an array-like object.\n    } else {\n\n      // 8. Let arrayLike be ToObject(items).\n      var arrayLike = Object(items);\n\n      // 9. ReturnIfAbrupt(items).\n      if (items == null) {\n        throw new TypeError(\n          'Array.from requires an array-like object - not null or undefined'\n        );\n      }\n\n      // 10. Let len be ToLength(Get(arrayLike, \"length\")).\n      // 11. ReturnIfAbrupt(len).\n      var len = toLength(arrayLike.length);\n\n      // 12. If IsConstructor(C) is true, then\n      //     a. Let A be Construct(C, len).\n      // 13. Else\n      //     a. Let A be ArrayCreate(len).\n      // 14. ReturnIfAbrupt(A).\n      A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n      // 15. Let k be 0.\n      k = 0;\n      // 16. Repeat, while k < len (also steps a - h)\n      var kValue;\n      while (k < len) {\n        kValue = arrayLike[k];\n        if (mapFn) {\n          A[k] = mapFn.call(T, kValue, k);\n        }\n        else {\n          A[k] = kValue;\n        }\n        k++;\n      }\n      // 17. Let setStatus be Set(A, \"length\", len, true).\n      // 18. ReturnIfAbrupt(setStatus).\n      A.length = len;\n      // 19. Return A.\n    }\n    return A;\n  };\n})();\n","\n/**\n * isArray\n */\n\nvar isArray = Array.isArray;\n\n/**\n * toString\n */\n\nvar str = Object.prototype.toString;\n\n/**\n * Whether or not the given `val`\n * is an array.\n *\n * example:\n *\n *        isArray([]);\n *        // > true\n *        isArray(arguments);\n *        // > false\n *        isArray('');\n *        // > false\n *\n * @param {mixed} val\n * @return {bool}\n */\n\nmodule.exports = isArray || function (val) {\n  return !! val && '[object Array]' == str.call(val);\n};\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n/**\n * Returns `true` if provided input is Element.\n * @name isElement\n * @param {*} [input]\n * @returns {boolean}\n */\nexport default function (input) {\n  return input != null && (typeof input === 'undefined' ? 'undefined' : _typeof(input)) === 'object' && input.nodeType === 1 && _typeof(input.style) === 'object' && _typeof(input.ownerDocument) === 'object';\n}","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar createPointCb = _interopDefault(require('create-point-cb'));\n\nfunction createWindowRect() {\n    var props = {\n        top: { value: 0, enumerable: true },\n        left: { value: 0, enumerable: true },\n        right: { value: window.innerWidth, enumerable: true },\n        bottom: { value: window.innerHeight, enumerable: true },\n        width: { value: window.innerWidth, enumerable: true },\n        height: { value: window.innerHeight, enumerable: true },\n        x: { value: 0, enumerable: true },\n        y: { value: 0, enumerable: true }\n    };\n\n    if (Object.create) {\n        return Object.create({}, props);\n    } else {\n        var rect = {};\n        Object.defineProperties(rect, props);\n        return rect;\n    }\n}\n\nfunction getClientRect(el) {\n    if (el === window) {\n        return createWindowRect();\n    } else {\n        try {\n            var rect = el.getBoundingClientRect();\n            if (rect.x === undefined) {\n                rect.x = rect.left;\n                rect.y = rect.top;\n            }\n            return rect;\n        } catch (e) {\n            throw new TypeError(\"Can't call getBoundingClientRect on \" + el);\n        }\n    }\n}\n\nfunction pointInside(point, el) {\n    var rect = getClientRect(el);\n    return point.y > rect.top && point.y < rect.bottom && point.x > rect.left && point.x < rect.right;\n}\n\nexports.createPointCB = createPointCb;\nexports.getClientRect = getClientRect;\nexports.pointInside = pointInside;\n//# sourceMappingURL=bundle.js.map\n","'use strict';\n\nvar typeFunc = require('type-func');\n\nfunction createPointCB(object, options) {\n\n    // A persistent object (as opposed to returned object) is used to save memory\n    // This is good to prevent layout thrashing, or for games, and such\n\n    // NOTE\n    // This uses IE fixes which should be OK to remove some day. :)\n    // Some speed will be gained by removal of these.\n\n    // pointCB should be saved in a variable on return\n    // This allows the usage of element.removeEventListener\n\n    options = options || {};\n\n    var allowUpdate = typeFunc.boolean(options.allowUpdate, true);\n\n    /*if(typeof options.allowUpdate === 'function'){\n        allowUpdate = options.allowUpdate;\n    }else{\n        allowUpdate = function(){return true;};\n    }*/\n\n    return function pointCB(event) {\n\n        event = event || window.event; // IE-ism\n        object.target = event.target || event.srcElement || event.originalTarget;\n        object.element = this;\n        object.type = event.type;\n\n        if (!allowUpdate(event)) {\n            return;\n        }\n\n        // Support touch\n        // http://www.creativebloq.com/javascript/make-your-site-work-touch-devices-51411644\n\n        if (event.targetTouches) {\n            object.x = event.targetTouches[0].clientX;\n            object.y = event.targetTouches[0].clientY;\n            object.pageX = event.targetTouches[0].pageX;\n            object.pageY = event.targetTouches[0].pageY;\n            object.screenX = event.targetTouches[0].screenX;\n            object.screenY = event.targetTouches[0].screenY;\n        } else {\n\n            // If pageX/Y aren't available and clientX/Y are,\n            // calculate pageX/Y - logic taken from jQuery.\n            // (This is to support old IE)\n            // NOTE Hopefully this can be removed soon.\n\n            if (event.pageX === null && event.clientX !== null) {\n                var eventDoc = event.target && event.target.ownerDocument || document;\n                var doc = eventDoc.documentElement;\n                var body = eventDoc.body;\n\n                object.pageX = event.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n                object.pageY = event.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n            } else {\n                object.pageX = event.pageX;\n                object.pageY = event.pageY;\n            }\n\n            // pageX, and pageY change with page scroll\n            // so we're not going to use those for x, and y.\n            // NOTE Most browsers also alias clientX/Y with x/y\n            // so that's something to consider down the road.\n\n            object.x = event.clientX;\n            object.y = event.clientY;\n\n            object.screenX = event.screenX;\n            object.screenY = event.screenY;\n        }\n\n        object.clientX = object.x;\n        object.clientY = object.y;\n    };\n\n    //NOTE Remember accessibility, Aria roles, and labels.\n}\n\n/*\ngit remote add origin https://github.com/hollowdoor/create_point_cb.git\ngit push -u origin master\n*/\n\nmodule.exports = createPointCB;\n//# sourceMappingURL=bundle.js.map\n","'use strict';\n\nvar objectCreate = void 0;\nif (typeof Object.create != 'function') {\n  objectCreate = function (undefined) {\n    var Temp = function Temp() {};\n    return function (prototype, propertiesObject) {\n      if (prototype !== Object(prototype) && prototype !== null) {\n        throw TypeError('Argument must be an object, or null');\n      }\n      Temp.prototype = prototype || {};\n      var result = new Temp();\n      Temp.prototype = null;\n      if (propertiesObject !== undefined) {\n        Object.defineProperties(result, propertiesObject);\n      }\n\n      // to imitate the case of Object.create(null)\n      if (prototype === null) {\n        result.__proto__ = null;\n      }\n      return result;\n    };\n  }();\n} else {\n  objectCreate = Object.create;\n}\n\nvar objectCreate$1 = objectCreate;\n\nvar mouseEventProps = ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'metaKey', 'movementX', 'movementY', 'offsetX', 'offsetY', 'pageX', 'pageY', 'region', 'relatedTarget', 'screenX', 'screenY', 'shiftKey', 'which', 'x', 'y'];\n\nfunction createDispatcher(element) {\n\n    var defaultSettings = {\n        screenX: 0,\n        screenY: 0,\n        clientX: 0,\n        clientY: 0,\n        ctrlKey: false,\n        shiftKey: false,\n        altKey: false,\n        metaKey: false,\n        button: 0,\n        buttons: 1,\n        relatedTarget: null,\n        region: null\n    };\n\n    if (element !== undefined) {\n        element.addEventListener('mousemove', onMove);\n    }\n\n    function onMove(e) {\n        for (var i = 0; i < mouseEventProps.length; i++) {\n            defaultSettings[mouseEventProps[i]] = e[mouseEventProps[i]];\n        }\n    }\n\n    var dispatch = function () {\n        if (MouseEvent) {\n            return function m1(element, initMove, data) {\n                var evt = new MouseEvent('mousemove', createMoveInit(defaultSettings, initMove));\n\n                //evt.dispatched = 'mousemove';\n                setSpecial(evt, data);\n\n                return element.dispatchEvent(evt);\n            };\n        } else if (typeof document.createEvent === 'function') {\n            return function m2(element, initMove, data) {\n                var settings = createMoveInit(defaultSettings, initMove);\n                var evt = document.createEvent('MouseEvents');\n\n                evt.initMouseEvent(\"mousemove\", true, //can bubble\n                true, //cancelable\n                window, //view\n                0, //detail\n                settings.screenX, //0, //screenX\n                settings.screenY, //0, //screenY\n                settings.clientX, //80, //clientX\n                settings.clientY, //20, //clientY\n                settings.ctrlKey, //false, //ctrlKey\n                settings.altKey, //false, //altKey\n                settings.shiftKey, //false, //shiftKey\n                settings.metaKey, //false, //metaKey\n                settings.button, //0, //button\n                settings.relatedTarget //null //relatedTarget\n                );\n\n                //evt.dispatched = 'mousemove';\n                setSpecial(evt, data);\n\n                return element.dispatchEvent(evt);\n            };\n        } else if (typeof document.createEventObject === 'function') {\n            return function m3(element, initMove, data) {\n                var evt = document.createEventObject();\n                var settings = createMoveInit(defaultSettings, initMove);\n                for (var name in settings) {\n                    evt[name] = settings[name];\n                }\n\n                //evt.dispatched = 'mousemove';\n                setSpecial(evt, data);\n\n                return element.dispatchEvent(evt);\n            };\n        }\n    }();\n\n    function destroy() {\n        if (element) element.removeEventListener('mousemove', onMove, false);\n        defaultSettings = null;\n    }\n\n    return {\n        destroy: destroy,\n        dispatch: dispatch\n    };\n}\n\nfunction createMoveInit(defaultSettings, initMove) {\n    initMove = initMove || {};\n    var settings = objectCreate$1(defaultSettings);\n    for (var i = 0; i < mouseEventProps.length; i++) {\n        if (initMove[mouseEventProps[i]] !== undefined) settings[mouseEventProps[i]] = initMove[mouseEventProps[i]];\n    }\n\n    return settings;\n}\n\nfunction setSpecial(e, data) {\n    console.log('data ', data);\n    e.data = data || {};\n    e.dispatched = 'mousemove';\n}\n\n/*\nhttp://marcgrabanski.com/simulating-mouse-click-events-in-javascript/\n*/\n\nmodule.exports = createDispatcher;\n//# sourceMappingURL=bundle.js.map\n","/*\n * @link https://sprout.barrelstrengthdesign.com\n * @copyright Copyright (c) Barrel Strength Design LLC\n * @license https://craftcms.github.io/license\n */\n\nif (typeof Craft.SproutForms === typeof undefined) {\n  Craft.SproutForms = {};\n}\n\n(function($) {\n  let MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n  // If mutation observer is not supported, create a harness for it for graceful degradation.\n  // Older browsers could be supported through the DOMNodeInserted event, but that can be saved for another day...\n  if (!MutationObserver) {\n    MutationObserver = function() {\n    };\n    MutationObserver.prototype.observe = function() {\n    };\n    MutationObserver.prototype.disconnect = function() {\n    };\n  }\n\n  /**\n   * SproutForms.FieldModal class\n   * Handles the modal window for creating new fields.\n   */\n  Craft.SproutForms.FieldModal = Garnish.Modal.extend({\n\n      $body: null,\n      $content: null,\n      $main: null,\n      $footer: null,\n      $leftButtons: null,\n      $rightButtons: null,\n      $saveBtn: null,\n      $cancelBtn: null,\n      $deleteBtn: null,\n      $saveSpinner: null,\n      $deleteSpinner: null,\n      $loadSpinner: null,\n      addedDelete: false,\n\n      $html: null,\n      $js: null,\n      $css: null,\n      $currentHtml: null,\n      $currentJs: null,\n      $currentCss: null,\n\n      $observed: null,\n      observer: null,\n\n      templateLoaded: false,\n      executedJs: null,\n      loadedCss: null,\n\n      /**\n       * The constructor.\n       */\n      init: function(settings) {\n        this.base();\n        this.setSettings(settings, {\n          resizable: true\n        });\n\n        this.$currentHtml = $();\n        this.$currentJs = $();\n        this.$currentCss = $();\n        this.$observed = $();\n\n        this.executedJs = {};\n        this.loadedCss = {};\n\n        // Observe the DOM\n        this.observer = new MutationObserver($.proxy(function(mutations) {\n          for (let i = 0; i < mutations.length; i++) {\n            this.$observed = this.$observed.add(mutations[i].addedNodes);\n          }\n        }, this));\n\n        const $container = $('<form class=\"modal sprout-field-modal\" style=\"display: none; opacity: 0;\">').appendTo(Garnish.$bod);\n\n        this.$body = $('<div class=\"body\">').appendTo($container);\n        this.$content = $('<div class=\"content\">').appendTo(this.$body);\n        this.$main = $('<div class=\"main\">').appendTo(this.$content);\n        this.$footer = $('<div class=\"footer\">').appendTo($container);\n        this.$loadSpinner = $('<div class=\"spinner big\">').appendTo($container);\n\n        this.$leftButtons = $('<div class=\"buttons left\">').appendTo(this.$footer);\n        this.$rightButtons = $('<div class=\"buttons right\">').appendTo(this.$footer);\n\n        this.$deleteSpinner = $('<div class=\"spinner hidden\">').appendTo(this.$leftButtons);\n\n        this.$deleteBtn = $('<div class=\"btn delete hidden\" role=\"button\">').text(Craft.t('sprout-forms', 'Delete')).appendTo(this.$leftButtons);\n        this.$cancelBtn = $('<div class=\"btn disabled\" role=\"button\">').text(Craft.t('sprout-forms', 'Cancel')).appendTo(this.$rightButtons);\n        this.$saveBtn = $('<div class=\"btn submit disabled\" role=\"button\">').text(Craft.t('sprout-forms', 'Save')).appendTo(this.$rightButtons);\n        this.$saveSpinner = $('<div class=\"spinner hidden\">').appendTo(this.$rightButtons);\n\n        this.setContainer($container);\n        const formId = $(\"#formId\").val();\n        const postData = {\n          formId: formId\n        };\n\n        // Loads the field settings template file, as well as all the resources that come with it\n        Craft.postActionRequest('sprout-forms/fields/modal-field', postData, $.proxy(function(response, textStatus) {\n          if (textStatus === 'success') {\n            this.$loadSpinner.addClass('hidden');\n            this.initTemplate(response);\n          } else {\n            this.destroy();\n          }\n        }, this));\n      },\n\n      /**\n       * Prepares the field settings template HTML, CSS and Javascript.\n       *\n       * @param template\n       */\n      initTemplate: function(template) {\n        const callback = $.proxy(function(e) {\n          this.$html = e.$html;\n          this.$js = e.$js;\n          this.$css = e.$css;\n\n          this.templateLoaded = true;\n          this.initListeners();\n          if (this.visible) {\n            this.initSettings();\n          }\n\n          this.off('parseTemplate', callback);\n        }, this);\n\n        this.on('parseTemplate', callback);\n        this.parseTemplate(template);\n      },\n\n      /**\n       * Takes raw HTML, CSS and Javascript and parses it ready to be used in the DOM.\n       * It also loads any external resources if they are needed.\n       *\n       * @param template\n       */\n      parseTemplate: function(template) {\n        const that = this;\n        const $head = Garnish.$doc.find('head');\n\n        const $html = $(template.html);\n        const $js = $(template.js).filter('script');\n        const $css = $(template.css).filter('style, link');\n\n        // Ensure that external stylesheets are loaded asynchronously\n        const $cssFiles = $css.filter('link').prop('async', true);\n        const $cssInline = $css.filter('style');\n\n        $cssFiles.each(function() {\n          const $this = $(this);\n          const src = $this.prop('href');\n\n          if (!that.loadedCss.hasOwnProperty(src)) {\n            $head.append($this);\n            that.loadedCss[src] = $this;\n          }\n        });\n\n        // Load external Javascript files asynchronously, and remove them from being executed again.\n        // This assumes that external Javascript files are simply library files, that don't directly and\n        // instantly execute code that modifies the DOM. Library files can be loaded and executed once and\n        // reused later on.\n        // The Javascript tags that directly contain code are assumed to be context-dependent, so they are\n        // saved to be executed each time the modal is opened.\n        const $jsFiles = $js.filter('[src]');\n        const $jsInline = $js.filter(':not([src])');\n\n        const jsFiles = [];\n        $jsFiles.each(function() {\n          const $this = $(this);\n          const src = $this.prop('src');\n          if (!that.executedJs.hasOwnProperty(src)) {\n            jsFiles.push(src);\n            that.executedJs[src] = true;\n          }\n        });\n\n        const callback = function() {\n          that.off('runExternalScripts', callback);\n          that.trigger('parseTemplate', {\n            target: this,\n            $html: $html,\n            $js: $jsInline,\n            $css: $cssInline\n          });\n        };\n        // Fixes bug on Craft3 - Updates way to callback function\n        $.when(this.runExternalScripts(jsFiles)).then(callback());\n        //this.runExternalScripts(jsFiles);\n\n        this.$deleteBtn.removeClass('hidden');\n        this.$saveBtn.removeClass('disabled');\n        this.$cancelBtn.removeClass('disabled');\n      },\n\n      /**\n       * Runs external Javascript files\n       *\n       * @param files - An array of URL's (as strings) to Javascript files\n       */\n      runExternalScripts: function(files) {\n        let filesCount = files.length;\n\n        if (filesCount > 0) {\n          for (let i = 0; i < files.length; i++) {\n            const src = files[i];\n            // Fixes Double-instantiating bug\n            if ((src.indexOf('MatrixConfigurator') >= 0) ||\n              (src.indexOf('TableFieldSettings.min.js') >= 0) ||\n              (src.indexOf('quill.min.js') >= 0) ||\n              (src.indexOf('sproutfields.js') >= 0) ||\n              (src.indexOf('EditableTable.js') >= 0) ||\n              (src.indexOf('initialize.js') >= 0)\n            ) {\n              $.getScript(src, $.proxy(function(data, status) {\n                if (status === 'success') {\n                  filesCount--;\n\n                  if (filesCount === 0) {\n                    this.trigger('runExternalScripts', {\n                      target: this\n                    });\n                  }\n                } else {\n                  Craft.cp.displayError(Craft.t('sprout-forms', 'Could not load all resources.'));\n                }\n              }, this));\n            }\n          }\n        } else {\n          this.trigger('runExternalScripts', {\n            target: this\n          });\n        }\n      },\n\n      /**\n       * Binds all listeners so the quick field buttons can start working.\n       */\n      initListeners: function() {\n        this.$deleteBtn.addClass('hidden');\n        this.$cancelBtn.addClass('disabled');\n        this.$saveBtn.addClass('disabled');\n\n        this.addListener(this.$cancelBtn, 'activate', 'closeModal');\n        this.addListener(this.$saveBtn, 'activate', 'saveField');\n        if (!this.addedDelete) {\n          this.addListener(this.$deleteBtn, 'click', 'deleteField');\n          this.addedDelete = true;\n        }\n\n        this.on('show', this.initSettings);\n        this.on('fadeOut', this.destroySettings);\n\n        this.enable();\n      },\n\n      /**\n       * Unbinds all listeners.\n       */\n      destroyListeners: function() {\n        this.$cancelBtn.addClass('disabled');\n        this.$saveBtn.addClass('disabled');\n\n        this.removeListener(this.$cancelBtn, 'activate');\n        this.removeListener(this.$saveBtn, 'activate');\n\n        this.off('show', this.initSettings);\n        this.off('fadeOut', this.destroySettings);\n\n        this.disable();\n      },\n\n      /**\n       * Initialises the HTML, CSS and Javascript for the modal window.\n       */\n      initSettings: function(e) {\n        const that = e && e.target ? e.target : this;\n\n        // If the template files are not loaded yet, just cancel initialisation of the settings.\n        if (!that.templateLoaded) {\n          return;\n        }\n\n        that.$currentHtml = e && e.$html ? e.$html : that.$html.clone();\n        that.$currentJs = e && e.$js ? e.$js : that.$js.clone();\n        that.$currentCss = e && e.$css ? e.$css : that.$css.clone();\n\n        // Save any new nodes that are added to the body during initialisation, so they can be safely removed later.\n        that.$observed = $();\n        that.observer.observe(Garnish.$bod[0], {childList: true, subtree: false});\n\n        that.$main.append(that.$currentHtml);\n        Garnish.$bod.append(that.$currentJs);\n\n        // Only show the delete button if editing a field\n        const $fieldId = that.$main.find('input[name=\"fieldId\"]');\n\n        Craft.initUiElements();\n\n        // Rerun the external scripts as some field types may need to make DOM changes in their external files.\n        // This means that libraries are being initialized multiple times, but hopefully they're smart enough to\n        // deal with that. So far, no issues.\n        const callback = function() {\n          that.off('runExternalScripts', callback);\n\n          // Stop observing after a healthy timeout to ensure all mutations are captured.\n          setTimeout(function() {\n            that.observer.disconnect();\n          }, 1);\n        };\n        $.when(that.runExternalScripts(Object.keys(that.executedJs))).then(callback());\n        //that.on('runExternalScripts', callback);\n        //that.runExternalScripts(Object.keys(that.executedJs));\n      },\n\n      /**\n       * Event handler for when the modal window finishes fading out after hiding.\n       * Clears out all events and elements of the modal.\n       */\n      destroySettings: function(e) {\n        const that = e && e.target ? e.target : this;\n\n        that.$currentHtml.remove();\n        that.$currentJs.remove();\n        that.$currentCss.remove();\n        that.$observed.remove();\n      },\n\n      /**\n       * Event handler for the Close button.\n       * Hides the modal window from view.\n       */\n      closeModal: function() {\n        this.hide();\n      },\n\n      /**\n       * Event handler for the save button.\n       * Saves the new field form to the database.\n       *\n       * @param e\n       */\n      saveField: function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n\n        if (this.$saveBtn.hasClass('disabled') || !this.$saveSpinner.hasClass('hidden')) {\n          return;\n        }\n\n        this.destroyListeners();\n\n        this.$saveSpinner.removeClass('hidden');\n        const data = this.$container.serialize();\n\n        const inputId = this.$container.find('input[name=\"fieldId\"]');\n        const id = inputId.length ? inputId.val() : false;\n\n        Craft.postActionRequest('sprout-forms/fields/save-field', data, $.proxy(function(response, textStatus) {\n          this.$saveSpinner.addClass('hidden');\n\n          const statusSuccess = (textStatus === 'success');\n\n          if (statusSuccess && response.success) {\n            this.initListeners();\n\n            if (id === false) {\n              this.trigger('newField', {\n                target: this,\n                field: response.field\n              });\n            } else {\n              this.trigger('saveField', {\n                target: this,\n                field: response.field\n              });\n\n              Craft.cp.displayNotice(Craft.t('sprout-forms', '\\'{name}\\' field saved.', {name: response.field.name}));\n            }\n\n            this.hide();\n          } else if (statusSuccess && response.template) {\n            if (this.visible) {\n              const callback = $.proxy(function(e) {\n                this.initListeners();\n                this.destroySettings();\n                this.initSettings(e);\n                this.off('parseTemplate', callback);\n              }, this);\n\n              this.on('parseTemplate', callback);\n              this.parseTemplate(response.template);\n\n              Garnish.shake(this.$container);\n            } else {\n              this.initListeners();\n            }\n          } else {\n            this.initListeners();\n\n            Craft.cp.displayError(Craft.t('sprout-forms', 'An unknown error occurred.'));\n          }\n        }, this));\n      },\n\n      /**\n       *\n       * @param id\n       */\n      editField: function(id) {\n        this.destroyListeners();\n        this.show();\n        this.initListeners();\n\n        this.$loadSpinner.removeClass('hidden');\n\n        const formId = $(\"#formId\").val();\n        const data = {'fieldId': id, 'formId': formId};\n\n        Craft.postActionRequest('sprout-forms/fields/edit-field', data, $.proxy(function(response, textStatus) {\n          this.$loadSpinner.addClass('hidden');\n\n          const statusSuccess = (textStatus === 'success');\n\n          if (statusSuccess && response.success) {\n            const callback = $.proxy(function(e) {\n              this.destroySettings();\n              this.initSettings(e);\n              this.off('parseTemplate', callback);\n            }, this);\n\n            this.on('parseTemplate', callback);\n            this.parseTemplate(response.template);\n          } else if (statusSuccess && response.error) {\n            Craft.cp.displayError(response.error);\n\n            this.hide();\n          } else {\n            Craft.cp.displayError(Craft.t('sprout-forms', 'An unknown error occurred. '));\n\n            this.hide();\n          }\n        }, this));\n      },\n\n      deleteField: function(e) {\n        e.preventDefault();\n        const userResponse = this.confirmDeleteField();\n\n        if (userResponse) {\n          this.destroyListeners();\n\n          const data = this.$container.serialize();\n\n          const fieldId = $(this.$container).find('input[name=\"fieldId\"]').val();\n\n          Craft.postActionRequest('sprout-forms/fields/delete-field', data, $.proxy(function(response, textStatus) {\n            const statusSuccess = (textStatus === 'success');\n\n            if (statusSuccess && response.success) {\n\n              Craft.cp.displayNotice(Craft.t('sprout-forms', 'Field deleted.'));\n\n              $('#sproutfield-' + fieldId).remove();\n\n              this.initListeners();\n              this.hide();\n            } else {\n              Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to delete field.'));\n\n              this.hide();\n            }\n          }, this));\n        }\n      },\n\n      confirmDeleteField: function() {\n        return confirm(\"Are you sure you want to delete this field and all of it's data?\");\n      },\n\n      /**\n       * Prevents the modal from closing if it's disabled.\n       * This fixes issues if the modal is closed when saving/deleting fields.\n       */\n      hide: function() {\n        if (!this._disabled) {\n          this.base();\n        }\n      },\n\n      /**\n       * Removes everything to do with the modal form the DOM.\n       */\n      destroy: function() {\n\n        this.base.destroy();\n\n        this.destroyListeners();\n        this.destroySettings();\n\n        this.$shade.remove();\n        this.$container.remove();\n\n        this.trigger('destroy');\n      }\n    },\n    {\n      /**\n       * (Static) Singleton pattern.\n       *\n       * @returns FieldModal\n       */\n      getInstance: function() {\n        if (!this._instance) {\n          this._instance = new Craft.SproutForms.FieldModal();\n        }\n\n        return this._instance;\n      }\n    });\n\n})(jQuery);\n","/*\n * @link https://sprout.barrelstrengthdesign.com\n * @copyright Copyright (c) Barrel Strength Design LLC\n * @license https://craftcms.github.io/license\n */\n\nif (typeof Craft.SproutForms === typeof undefined) {\n  Craft.SproutForms = {};\n}\n\n(function($) {\n  let MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n  // If mutation observer is not supported, create a harness for it for graceful degradation.\n  // Older browsers could be supported through the DOMNodeInserted event, but that can be saved for another day...\n  if (!MutationObserver) {\n    MutationObserver = function() {\n    };\n    MutationObserver.prototype.observe = function() {\n    };\n    MutationObserver.prototype.disconnect = function() {\n    };\n  }\n\n  /**\n   * SproutForms.IntegrationModal class\n   * Handles the modal window for editing integrations.\n   */\n  Craft.SproutForms.IntegrationModal = Garnish.Modal.extend({\n\n      $body: null,\n      $content: null,\n      $main: null,\n      $footer: null,\n      $leftButtons: null,\n      $rightButtons: null,\n      $saveBtn: null,\n      $cancelBtn: null,\n      $deleteBtn: null,\n      $saveSpinner: null,\n      $deleteSpinner: null,\n      $loadSpinner: null,\n      addedDelete: false,\n\n      $html: null,\n      $js: null,\n      $css: null,\n      $currentHtml: null,\n      $currentJs: null,\n      $currentCss: null,\n\n      $observed: null,\n      observer: null,\n\n      templateLoaded: false,\n      executedJs: null,\n      loadedCss: null,\n\n      /**\n       * The constructor.\n       */\n      init: function(settings) {\n        this.base();\n        this.setSettings(settings, {\n          resizable: true\n        });\n\n        this.$currentHtml = $();\n        this.$currentJs = $();\n        this.$currentCss = $();\n        this.$observed = $();\n\n        this.executedJs = {};\n        this.loadedCss = {};\n\n        // Observe the DOM\n        this.observer = new MutationObserver($.proxy(function(mutations) {\n          for (let i = 0; i < mutations.length; i++) {\n            this.$observed = this.$observed.add(mutations[i].addedNodes);\n          }\n        }, this));\n\n        const $container = $('<form class=\"modal sprout-field-modal\" style=\"display: none; opacity: 0;\">').appendTo(Garnish.$bod);\n\n        this.$body = $('<div class=\"body\">').appendTo($container);\n        this.$content = $('<div class=\"content\">').appendTo(this.$body);\n        this.$main = $('<div class=\"main\">').appendTo(this.$content);\n        this.$footer = $('<div class=\"footer\">').appendTo($container);\n        this.$loadSpinner = $('<div class=\"spinner big\">').appendTo($container);\n\n        this.$leftButtons = $('<div class=\"buttons left\">').appendTo(this.$footer);\n        this.$rightButtons = $('<div class=\"buttons right\">').appendTo(this.$footer);\n\n        this.$deleteSpinner = $('<div class=\"spinner hidden\">').appendTo(this.$leftButtons);\n\n        this.$deleteBtn = $('<div class=\"btn delete hidden\" role=\"button\">').text(Craft.t('sprout-forms', 'Delete')).appendTo(this.$leftButtons);\n        this.$cancelBtn = $('<div class=\"btn disabled\" role=\"button\">').text(Craft.t('sprout-forms', 'Cancel')).appendTo(this.$rightButtons);\n        this.$saveBtn = $('<div class=\"btn submit disabled\" role=\"button\">').text(Craft.t('sprout-forms', 'Save')).appendTo(this.$rightButtons);\n        this.$saveSpinner = $('<div class=\"spinner hidden\">').appendTo(this.$rightButtons);\n\n        this.setContainer($container);\n\n        this.$loadSpinner.addClass('hidden');\n        const response = {\n          html: '',\n          js: '',\n          css: '',\n        };\n        this.initTemplate(response);\n      },\n\n      /**\n       * Prepares the Integration settings template HTML, CSS and Javascript.\n       *\n       * @param template\n       */\n      initTemplate: function(template) {\n        const callback = $.proxy(function(e) {\n          this.$html = e.$html;\n          this.$js = e.$js;\n          this.$css = e.$css;\n\n          this.templateLoaded = true;\n          this.initListeners();\n          if (this.visible) {\n            this.initSettings();\n          }\n\n          this.off('parseTemplate', callback);\n        }, this);\n\n        this.on('parseTemplate', callback);\n        this.parseTemplate(template);\n      },\n\n      /**\n       * Takes raw HTML, CSS and Javascript and parses it ready to be used in the DOM.\n       * It also loads any external resources if they are needed.\n       *\n       * @param template\n       */\n      parseTemplate: function(template) {\n        const that = this;\n        const $head = Garnish.$doc.find('head');\n\n        const $html = $(template.html);\n        const $js = $(template.js).filter('script');\n        const $css = $(template.css).filter('style, link');\n\n        // Ensure that external stylesheets are loaded asynchronously\n        const $cssFiles = $css.filter('link').prop('async', true);\n        const $cssInline = $css.filter('style');\n\n        $cssFiles.each(function() {\n          const $this = $(this);\n          const src = $this.prop('href');\n\n          if (!that.loadedCss.hasOwnProperty(src)) {\n            $head.append($this);\n            that.loadedCss[src] = $this;\n          }\n        });\n\n        // Load external Javascript files asynchronously, and remove them from being executed again.\n        // This assumes that external Javascript files are simply library files, that don't directly and\n        // instantly execute code that modifies the DOM. Library files can be loaded and executed once and\n        // reused later on.\n        // The Javascript tags that directly contain code are assumed to be context-dependent, so they are\n        // saved to be executed each time the modal is opened.\n        const $jsFiles = $js.filter('[src]');\n        const $jsInline = $js.filter(':not([src])');\n\n        const jsFiles = [];\n        $jsFiles.each(function() {\n          const $this = $(this);\n          const src = $this.prop('src');\n          if (!that.executedJs.hasOwnProperty(src)) {\n            jsFiles.push(src);\n            that.executedJs[src] = true;\n          }\n        });\n\n        const callback = function() {\n          that.off('runExternalScripts', callback);\n          that.trigger('parseTemplate', {\n            target: this,\n            $html: $html,\n            $js: $jsInline,\n            $css: $cssInline\n          });\n        };\n        // Fixes bug on Craft3 - Updates way to callback function\n        $.when(this.runExternalScripts(jsFiles)).then(callback());\n        //this.runExternalScripts(jsFiles);\n\n        this.$deleteBtn.removeClass('hidden');\n        this.$saveBtn.removeClass('disabled');\n        this.$cancelBtn.removeClass('disabled');\n      },\n\n      /**\n       * Runs external Javascript files\n       *\n       * @param files - An array of URL's (as strings) to Javascript files\n       */\n      runExternalScripts: function(files) {\n        let filesCount = files.length;\n\n        if (filesCount > 0) {\n          for (let i = 0; i < files.length; i++) {\n            const src = files[i];\n\n            // Fixes Double-instantiating bug\n            if ((src.indexOf('MatrixConfigurator') >= 0) ||\n              (src.indexOf('TableFieldSettings.min.js') >= 0) ||\n              (src.indexOf('quill.min.js') >= 0) ||\n              (src.indexOf('sproutfields.js') >= 0) ||\n              (src.indexOf('EditableTable.js') >= 0) ||\n              (src.indexOf('initialize.js') >= 0)\n            ) {\n              $.getScript(src, $.proxy(function(data, status) {\n                if (status === 'success') {\n                  filesCount--;\n\n                  if (filesCount === 0) {\n                    this.trigger('runExternalScripts', {\n                      target: this\n                    });\n                  }\n                } else {\n                  Craft.cp.displayError(Craft.t('sprout-forms', 'Could not load all resources.'));\n                }\n              }, this));\n            }\n          }\n        } else {\n          this.trigger('runExternalScripts', {\n            target: this\n          });\n        }\n      },\n\n      /**\n       * Binds all listeners so the quick integration buttons can start working.\n       */\n      initListeners: function() {\n        this.$deleteBtn.addClass('hidden');\n        this.$cancelBtn.addClass('disabled');\n        this.$saveBtn.addClass('disabled');\n\n        this.addListener(this.$cancelBtn, 'activate', 'closeModal');\n        this.addListener(this.$saveBtn, 'activate', 'saveIntegration');\n        if (!this.addedDelete) {\n          this.addListener(this.$deleteBtn, 'click', 'deleteIntegration');\n          this.addedDelete = true;\n        }\n\n        this.on('show', this.initSettings);\n        this.on('fadeOut', this.destroySettings);\n\n        this.enable();\n      },\n\n      /**\n       * Unbinds all listeners.\n       */\n      destroyListeners: function() {\n        this.$cancelBtn.addClass('disabled');\n        this.$saveBtn.addClass('disabled');\n\n        this.removeListener(this.$cancelBtn, 'activate');\n        this.removeListener(this.$saveBtn, 'activate');\n\n        this.off('show', this.initSettings);\n        this.off('fadeOut', this.destroySettings);\n\n        this.disable();\n      },\n\n      /**\n       * Initialises the HTML, CSS and Javascript for the modal window.\n       */\n      initSettings: function(e) {\n        const that = e && e.target ? e.target : this;\n\n        // If the template files are not loaded yet, just cancel initialisation of the settings.\n        if (!that.templateLoaded) {\n          return;\n        }\n\n        that.$currentHtml = e && e.$html ? e.$html : that.$html.clone();\n        that.$currentJs = e && e.$js ? e.$js : that.$js.clone();\n        that.$currentCss = e && e.$css ? e.$css : that.$css.clone();\n\n        // Save any new nodes that are added to the body during initialisation, so they can be safely removed later.\n        that.$observed = $();\n        that.observer.observe(Garnish.$bod[0], {childList: true, subtree: false});\n\n        that.$main.append(that.$currentHtml);\n        Garnish.$bod.append(that.$currentJs);\n\n        Craft.initUiElements();\n\n        // Rerun the external scripts as some field types may need to make DOM changes in their external files.\n        // This means that libraries are being initialized multiple times, but hopefully they're smart enough to\n        // deal with that. So far, no issues.\n        const callback = function() {\n          that.off('runExternalScripts', callback);\n\n          // Stop observing after a healthy timeout to ensure all mutations are captured.\n          setTimeout(function() {\n            that.observer.disconnect();\n          }, 1);\n        };\n        $.when(that.runExternalScripts(Object.keys(that.executedJs))).then(callback());\n        //that.on('runExternalScripts', callback);\n        //that.runExternalScripts(Object.keys(that.executedJs));\n      },\n\n      /**\n       * Event handler for when the modal window finishes fading out after hiding.\n       * Clears out all events and elements of the modal.\n       */\n      destroySettings: function(e) {\n        const that = e && e.target ? e.target : this;\n\n        that.$currentHtml.remove();\n        that.$currentJs.remove();\n        that.$currentCss.remove();\n        that.$observed.remove();\n      },\n\n      /**\n       * Event handler for the Close button.\n       * Hides the modal window from view.\n       */\n      closeModal: function() {\n        this.hide();\n      },\n\n      /**\n       * Event handler for the save button.\n       * Saves the Integration settings to the database.\n       *\n       * @param e\n       */\n      saveIntegration: function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n\n        if (this.$saveBtn.hasClass('disabled') || !this.$saveSpinner.hasClass('hidden')) {\n          return;\n        }\n\n        this.destroyListeners();\n\n        this.$saveSpinner.removeClass('hidden');\n        const data = this.$container.serialize();\n\n        const inputId = this.$container.find('input[name=\"integrationId\"]');\n        const id = inputId.length ? inputId.val() : false;\n\n        Craft.postActionRequest('sprout-forms/integrations/save-integration', data, $.proxy(function(response, textStatus) {\n          this.$saveSpinner.addClass('hidden');\n\n          const statusSuccess = (textStatus === 'success');\n\n          if (statusSuccess && response.success) {\n            this.initListeners();\n\n            this.trigger('saveIntegration', {\n              target: this,\n              integration: response.integration\n            });\n\n            Craft.cp.displayNotice(Craft.t('sprout-forms', '\\'{name}\\' integration saved.', {name: response.integration.name}));\n\n            this.hide();\n          } else if (statusSuccess && response.template) {\n            if (this.visible) {\n              const callback = $.proxy(function(e) {\n                this.initListeners();\n                this.destroySettings();\n                this.initSettings(e);\n                this.off('parseTemplate', callback);\n              }, this);\n\n              this.on('parseTemplate', callback);\n              this.parseTemplate(response.template);\n\n              Garnish.shake(this.$container);\n            } else {\n              this.initListeners();\n            }\n          } else {\n            this.initListeners();\n\n            Craft.cp.displayError(Craft.t('sprout-forms', 'An unknown error occurred.'));\n          }\n        }, this));\n      },\n\n      /**\n       *\n       * @param id\n       */\n      editIntegration: function(id) {\n        this.destroyListeners();\n        this.show();\n        this.initListeners();\n\n        this.$loadSpinner.removeClass('hidden');\n\n        const formId = $(\"#formId\").val();\n        const data = {\n          'integrationId': id,\n          'formId': formId\n        };\n\n        Craft.postActionRequest('sprout-forms/integrations/edit-integration', data, $.proxy(function(response, textStatus) {\n          this.$loadSpinner.addClass('hidden');\n\n          const statusSuccess = (textStatus === 'success');\n\n          if (statusSuccess && response.success) {\n            const callback = $.proxy(function(e) {\n              this.destroySettings();\n              this.initSettings(e);\n              this.off('parseTemplate', callback);\n            }, this);\n\n            this.on('parseTemplate', callback);\n            this.parseTemplate(response.template);\n          } else if (statusSuccess && response.error) {\n            Craft.cp.displayError(response.error);\n\n            this.hide();\n          } else {\n            Craft.cp.displayError(Craft.t('sprout-forms', 'An unknown error occurred. '));\n\n            this.hide();\n          }\n        }, this));\n      },\n\n      deleteIntegration: function(e) {\n        e.preventDefault();\n        const userResponse = this.confirmDeleteIntegration();\n\n        if (userResponse) {\n          this.destroyListeners();\n\n          const data = this.$container.serialize();\n\n          const integrationId = $(this.$container).find('input[name=\"integrationId\"]').val();\n\n          Craft.postActionRequest('sprout-forms/integrations/delete-integration', data, $.proxy(function(response, textStatus) {\n            const statusSuccess = (textStatus === 'success');\n\n            if (statusSuccess && response.success) {\n\n              Craft.cp.displayNotice(Craft.t('sprout-forms', 'Integration deleted.'));\n\n              $('#sproutforms-integration-row-' + integrationId).remove();\n\n              this.initListeners();\n              this.hide();\n            } else {\n              Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to delete integration.'));\n\n              this.hide();\n            }\n          }, this));\n        }\n      },\n\n      confirmDeleteIntegration: function() {\n        return confirm(\"Are you sure you want to delete this integration and all of it's settings?\");\n      },\n\n      /**\n       * Prevents the modal from closing if it's disabled.\n       * This fixes issues if the modal is closed when saving/deleting integrations.\n       */\n      hide: function() {\n        if (!this._disabled) {\n          this.base();\n        }\n      },\n\n      /**\n       * Removes everything to do with the modal form the DOM.\n       */\n      destroy: function() {\n        this.base.destroy();\n\n        this.destroyListeners();\n        this.destroySettings();\n\n        this.$shade.remove();\n        this.$container.remove();\n\n        this.trigger('destroy');\n      }\n    },\n    {\n      /**\n       * (Static) Singleton pattern.\n       *\n       * @returns IntegrationModal\n       */\n      getInstance: function() {\n        if (!this._instance) {\n          this._instance = new Craft.SproutForms.IntegrationModal();\n        }\n\n        return this._instance;\n      }\n    });\n\n})(jQuery);\n","/*\n * @link https://sprout.barrelstrengthdesign.com\n * @copyright Copyright (c) Barrel Strength Design LLC\n * @license https://craftcms.github.io/license\n */\n\n/* global Craft */\n\nclass SproutFormsIntegration {\n\n  constructor(settings) {\n    const self = this;\n\n    this.integrationType = typeof settings.integrationType !== 'undefined'\n      ? settings.integrationType\n      : '';\n\n    // Make the sourceFormField read only\n    this.disableOptions();\n\n    // Init all empty field selects\n    this.updateAllFieldSelects();\n\n    this.updateTargetFieldsOnChange = typeof settings.updateTargetFieldsOnChange !== 'undefined'\n      ? settings.updateTargetFieldsOnChange\n      : [];\n\n    this.updateTargetFieldsOnChange.forEach(function(elementId) {\n      // Register an onChange event for all Element IDs identified by the Integration\n      $(elementId).change(function() {\n        self.updateAllFieldSelects();\n      });\n    });\n  }\n\n  disableOptions() {\n    const self = this;\n    const integrationId = $('#integrationId').val();\n\n    const data = {\n      'integrationId': integrationId\n    };\n\n    Craft.postActionRequest('sprout-forms/integrations/get-source-form-fields', data, $.proxy(function(response, textStatus) {\n      const statusSuccess = (textStatus === 'success');\n      if (statusSuccess && response.success) {\n        const rows = response.sourceFormFields;\n        $('tbody .formField').each(function(index) {\n          const td = $(this);\n          td.empty();\n          const title = rows[index][\"label\"];\n          const handle = rows[index][\"value\"];\n          td.append('<div style=\"display:none;\"><select readonly name=\"settings[' + self.integrationType + '][fieldMapping][' + index + '][sourceFormField]\"><option selected value=\"' + handle + '\">' + title + '</option></select></div><div style=\"padding: 7px 10px;font-size: 12px;color:#8f98a3;\">' + title + ' <span class=\"code\">(' + handle + ')</span></div>');\n        });\n      } else {\n        Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to get the Form fields'));\n      }\n    }, this));\n\n    return null;\n  }\n\n  updateAllFieldSelects() {\n    const integrationIdBase = this.integrationType.replace(/\\\\/g, '-');\n    const mappingTableRows = 'table#settings-' + integrationIdBase + '-fieldMapping tr';\n\n    $(mappingTableRows).find('td:eq(2),th:eq(2)').remove();\n    $(mappingTableRows).find('td:eq(0),th:eq(0)').css('width', '50%');\n    $(mappingTableRows).find('td:eq(1),th:eq(1)').css('width', '50%');\n\n    const $currentRows = this.getCurrentRows('tbody .targetFields');\n\n    // Hand off all our current Form data so the Integration can use it if needed\n    const data = $(\"#integrationId\").closest('form').serialize();\n\n    const self = this;\n\n    Craft.postActionRequest('sprout-forms/integrations/get-target-integration-fields', data, $.proxy(function(response, textStatus) {\n      const statusSuccess = (textStatus === 'success');\n\n      if (statusSuccess && response.success) {\n        const rows = response.targetIntegrationFields;\n\n        if (rows.length === 0) {\n          return false;\n        }\n\n        $currentRows.each(function(index) {\n          const $select = $(this).find('select');\n          const fields = rows[index];\n\n          self.appendFieldsToSelect($select, fields);\n        });\n      } else {\n        Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to get the Form fields'));\n      }\n    }, this));\n  }\n\n  getCurrentRows(className = null) {\n    if (className === null) {\n      className = 'tbody .formField';\n    }\n    return $(className);\n  }\n\n  appendFieldsToSelect($select, fields) {\n    $select.empty();\n\n    let dropdown = '';\n    let closeOptgroup = false;\n    $select.append('<option value=\"\">' + Craft.t('sprout-forms', 'None') + '</option>');\n\n    for (i = 0; i < fields.length; i++) {\n      const field = fields[i];\n      let selectedCode = '';\n      const lastItem = i === (fields.length - 1);\n\n      if (!(\"optgroup\" in field)) {\n        if (\"selected\" in field) {\n          selectedCode = 'selected';\n        }\n        dropdown += '<option ' + selectedCode + ' value=\"' + field['value'] + '\">' + field['label'] + '</option>';\n      }\n\n      if ((\"optgroup\" in field && closeOptgroup) || (lastItem && closeOptgroup)) {\n        dropdown += '</optgroup>';\n        closeOptgroup = false;\n      }\n\n      if (\"optgroup\" in field) {\n        dropdown += '<optgroup label=\"' + field['optgroup'] + '\">';\n        closeOptgroup = true;\n      }\n    }\n\n    $select.append(dropdown);\n  }\n}\n\nwindow.SproutFormsIntegration = SproutFormsIntegration;","/*\n * @link https://sprout.barrelstrengthdesign.com\n * @copyright Copyright (c) Barrel Strength Design LLC\n * @license https://craftcms.github.io/license\n */\n\n/* global Craft */\n\nif (typeof Craft.SproutForms === typeof undefined) {\n  Craft.SproutForms = {};\n}\n\n(function($) {\n  let MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n  // If mutation observer is not supported, create a harness for it for graceful degradation.\n  // Older browsers could be supported through the DOMNodeInserted event, but that can be saved for another day...\n  if (!MutationObserver) {\n    MutationObserver = function() {\n    };\n    MutationObserver.prototype.observe = function() {\n    };\n    MutationObserver.prototype.disconnect = function() {\n    };\n  }\n\n  /**\n   * SproutForms.RuleModal class\n   * Handles the modal window for editing Rules.\n   */\n  Craft.SproutForms.RuleModal = Garnish.Modal.extend({\n\n      $body: null,\n      $content: null,\n      $main: null,\n      $footer: null,\n      $leftButtons: null,\n      $rightButtons: null,\n      $saveBtn: null,\n      $cancelBtn: null,\n      $deleteBtn: null,\n      $saveSpinner: null,\n      $deleteSpinner: null,\n      $loadSpinner: null,\n      addedDelete: false,\n\n      $html: null,\n      $js: null,\n      $css: null,\n      $currentHtml: null,\n      $currentJs: null,\n      $currentCss: null,\n\n      $observed: null,\n      observer: null,\n\n      templateLoaded: false,\n      executedJs: null,\n      loadedCss: null,\n\n      /**\n       * The constructor.\n       */\n      init: function(settings) {\n        this.base();\n        this.setSettings(settings, {\n          resizable: true\n        });\n\n        this.$currentHtml = $();\n        this.$currentJs = $();\n        this.$currentCss = $();\n        this.$observed = $();\n\n        this.executedJs = {};\n        this.loadedCss = {};\n\n        // Observe the DOM\n        this.observer = new MutationObserver($.proxy(function(mutations) {\n          for (let i = 0; i < mutations.length; i++) {\n            this.$observed = this.$observed.add(mutations[i].addedNodes);\n          }\n        }, this));\n\n        const $container = $('<form class=\"modal sprout-field-modal\" style=\"display: none; opacity: 0;\">').appendTo(Garnish.$bod);\n\n        this.$body = $('<div class=\"body\">').appendTo($container);\n        this.$content = $('<div class=\"content\">').appendTo(this.$body);\n        this.$main = $('<div class=\"main\">').appendTo(this.$content);\n        this.$footer = $('<div class=\"footer\">').appendTo($container);\n        this.$loadSpinner = $('<div class=\"spinner big\">').appendTo($container);\n\n        this.$leftButtons = $('<div class=\"buttons left\">').appendTo(this.$footer);\n        this.$rightButtons = $('<div class=\"buttons right\">').appendTo(this.$footer);\n\n        this.$deleteSpinner = $('<div class=\"spinner hidden\">').appendTo(this.$leftButtons);\n\n        this.$deleteBtn = $('<div class=\"btn delete hidden\" role=\"button\">').text(Craft.t('sprout-forms', 'Delete')).appendTo(this.$leftButtons);\n        this.$cancelBtn = $('<div class=\"btn disabled\" role=\"button\">').text(Craft.t('sprout-forms', 'Cancel')).appendTo(this.$rightButtons);\n        this.$saveBtn = $('<div class=\"btn submit disabled\" role=\"button\">').text(Craft.t('sprout-forms', 'Save')).appendTo(this.$rightButtons);\n        this.$saveSpinner = $('<div class=\"spinner hidden\">').appendTo(this.$rightButtons);\n\n        this.setContainer($container);\n\n        this.$loadSpinner.addClass('hidden');\n        const response = {\n          html: '',\n          js: '',\n          css: '',\n        };\n        this.initTemplate(response);\n      },\n\n      /**\n       * Prepares the Rule settings template HTML, CSS and Javascript.\n       *\n       * @param template\n       */\n      initTemplate: function(template) {\n        const callback = $.proxy(function(e) {\n          this.$html = e.$html;\n          this.$js = e.$js;\n          this.$css = e.$css;\n\n          this.templateLoaded = true;\n          this.initListeners();\n          if (this.visible) {\n            this.initSettings();\n          }\n\n          this.off('parseTemplate', callback);\n        }, this);\n\n        this.on('parseTemplate', callback);\n        this.parseTemplate(template);\n      },\n\n      /**\n       * Takes raw HTML, CSS and Javascript and parses it ready to be used in the DOM.\n       * It also loads any external resources if they are needed.\n       *\n       * @param template\n       */\n      parseTemplate: function(template) {\n        const that = this;\n        const $head = Garnish.$doc.find('head');\n\n        const $html = $(template.html);\n        const $js = $(template.js).filter('script');\n        const $css = $(template.css).filter('style, link');\n\n        // Ensure that external stylesheets are loaded asynchronously\n        const $cssFiles = $css.filter('link').prop('async', true);\n        const $cssInline = $css.filter('style');\n\n        $cssFiles.each(function() {\n          const $this = $(this);\n          const src = $this.prop('href');\n\n          if (!that.loadedCss.hasOwnProperty(src)) {\n            $head.append($this);\n            that.loadedCss[src] = $this;\n          }\n        });\n\n        // Load external Javascript files asynchronously, and remove them from being executed again.\n        // This assumes that external Javascript files are simply library files, that don't directly and\n        // instantly execute code that modifies the DOM. Library files can be loaded and executed once and\n        // reused later on.\n        // The Javascript tags that directly contain code are assumed to be context-dependent, so they are\n        // saved to be executed each time the modal is opened.\n        const $jsFiles = $js.filter('[src]');\n        const $jsInline = $js.filter(':not([src])');\n\n        const jsFiles = [];\n        $jsFiles.each(function() {\n          const $this = $(this);\n          const src = $this.prop('src');\n          if (!that.executedJs.hasOwnProperty(src)) {\n            jsFiles.push(src);\n            that.executedJs[src] = true;\n          }\n        });\n\n        const callback = function() {\n          that.off('runExternalScripts', callback);\n          that.trigger('parseTemplate', {\n            target: this,\n            $html: $html,\n            $js: $jsInline,\n            $css: $cssInline\n          });\n        };\n        // Fixes bug on Craft3 - Updates way to callback function\n        $.when(this.runExternalScripts(jsFiles)).then(callback());\n        //this.runExternalScripts(jsFiles);\n\n        this.$deleteBtn.removeClass('hidden');\n        this.$saveBtn.removeClass('disabled');\n        this.$cancelBtn.removeClass('disabled');\n      },\n\n      /**\n       * Runs external Javascript files\n       *\n       * @param files - An array of URL's (as strings) to Javascript files\n       */\n      runExternalScripts: function(files) {\n        let filesCount = files.length;\n\n        if (filesCount > 0) {\n          for (let i = 0; i < files.length; i++) {\n            const src = files[i];\n            // Fixes Double-instantiating bug\n            if ((src.indexOf('MatrixConfigurator') >= 0) ||\n              (src.indexOf('TableFieldSettings.min.js') >= 0) ||\n              (src.indexOf('quill.min.js') >= 0) ||\n              (src.indexOf('sproutfields.js') >= 0) ||\n              (src.indexOf('EditableTable.js') >= 0) ||\n              (src.indexOf('initialize.js') >= 0)\n            ) {\n              $.getScript(src, $.proxy(function(data, status) {\n                if (status === 'success') {\n                  filesCount--;\n\n                  if (filesCount === 0) {\n                    this.trigger('runExternalScripts', {\n                      target: this\n                    });\n                  }\n                } else {\n                  Craft.cp.displayError(Craft.t('sprout-forms', 'Could not load all resources.'));\n                }\n              }, this));\n            }\n          }\n        } else {\n          this.trigger('runExternalScripts', {\n            target: this\n          });\n        }\n      },\n\n      /**\n       * Binds all listeners so the rule buttons can start working.\n       */\n      initListeners: function() {\n        this.$deleteBtn.addClass('hidden');\n        this.$cancelBtn.addClass('disabled');\n        this.$saveBtn.addClass('disabled');\n\n        this.addListener(this.$cancelBtn, 'activate', 'closeModal');\n        this.addListener(this.$saveBtn, 'activate', 'saveRule');\n        if (!this.addedDelete) {\n          this.addListener(this.$deleteBtn, 'click', 'deleteRule');\n          this.addedDelete = true;\n        }\n\n        this.on('show', this.initSettings);\n        this.on('fadeOut', this.destroySettings);\n\n        this.enable();\n      },\n\n      /**\n       * Unbinds all listeners.\n       */\n      destroyListeners: function() {\n        this.$cancelBtn.addClass('disabled');\n        this.$saveBtn.addClass('disabled');\n\n        this.removeListener(this.$cancelBtn, 'activate');\n        this.removeListener(this.$saveBtn, 'activate');\n\n        this.off('show', this.initSettings);\n        this.off('fadeOut', this.destroySettings);\n\n        this.disable();\n      },\n\n      /**\n       * Initialises the HTML, CSS and Javascript for the modal window.\n       */\n      initSettings: function(e) {\n        const that = e && e.target ? e.target : this;\n\n        // If the template files are not loaded yet, just cancel initialisation of the settings.\n        if (!that.templateLoaded) {\n          return;\n        }\n\n        that.$currentHtml = e && e.$html ? e.$html : that.$html.clone();\n        that.$currentJs = e && e.$js ? e.$js : that.$js.clone();\n        that.$currentCss = e && e.$css ? e.$css : that.$css.clone();\n\n        // Save any new nodes that are added to the body during initialisation, so they can be safely removed later.\n        that.$observed = $();\n        that.observer.observe(Garnish.$bod[0], {childList: true, subtree: false});\n\n        that.$main.append(that.$currentHtml);\n        Garnish.$bod.append(that.$currentJs);\n\n        Craft.initUiElements();\n\n        // Rerun the external scripts as some field types may need to make DOM changes in their external files.\n        // This means that libraries are being initialized multiple times, but hopefully they're smart enough to\n        // deal with that. So far, no issues.\n        const callback = function() {\n          that.off('runExternalScripts', callback);\n\n          // Stop observing after a healthy timeout to ensure all mutations are captured.\n          setTimeout(function() {\n            that.observer.disconnect();\n          }, 1);\n        };\n        $.when(that.runExternalScripts(Object.keys(that.executedJs))).then(callback());\n        //that.on('runExternalScripts', callback);\n        //that.runExternalScripts(Object.keys(that.executedJs));\n      },\n\n      /**\n       * Event handler for when the modal window finishes fading out after hiding.\n       * Clears out all events and elements of the modal.\n       */\n      destroySettings: function(e) {\n        const that = e && e.target ? e.target : this;\n\n        that.$currentHtml.remove();\n        that.$currentJs.remove();\n        that.$currentCss.remove();\n        that.$observed.remove();\n      },\n\n      /**\n       * Event handler for the Close button.\n       * Hides the modal window from view.\n       */\n      closeModal: function() {\n        this.hide();\n      },\n\n      /**\n       * Event handler for the save button.\n       * Saves the Rule settings to the database.\n       *\n       * @param e\n       */\n      saveRule: function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n\n        if (this.$saveBtn.hasClass('disabled') || !this.$saveSpinner.hasClass('hidden')) {\n          return;\n        }\n\n        this.destroyListeners();\n\n        this.$saveSpinner.removeClass('hidden');\n        const data = this.$container.serialize();\n\n        const inputId = this.$container.find('input[name=\"ruleId\"]');\n        const id = inputId.length ? inputId.val() : false;\n\n        Craft.postActionRequest('sprout-forms/rules/save-rule', data, $.proxy(function(response, textStatus) {\n          this.$saveSpinner.addClass('hidden');\n\n          const statusSuccess = (textStatus === 'success');\n\n          if (statusSuccess && response.success) {\n            this.initListeners();\n\n            this.trigger('saveRule', {\n              target: this,\n              rule: response.rule\n            });\n\n            Craft.cp.displayNotice(Craft.t('sprout-forms', '\\'{name}\\' rule saved.', {\n              name: response.rule.name\n            }));\n\n            this.hide();\n          } else if (statusSuccess && response.template) {\n            if (this.visible) {\n              const callback = $.proxy(function(e) {\n                this.initListeners();\n                this.destroySettings();\n                this.initSettings(e);\n                this.off('parseTemplate', callback);\n              }, this);\n\n              this.on('parseTemplate', callback);\n              this.parseTemplate(response.template);\n\n              Garnish.shake(this.$container);\n            } else {\n              this.initListeners();\n            }\n          } else {\n            this.initListeners();\n\n            Craft.cp.displayError(Craft.t('sprout-forms', 'An unknown error occurred.'));\n          }\n        }, this));\n      },\n\n      /**\n       *\n       * @param id\n       */\n      editRule: function(id) {\n        this.destroyListeners();\n        this.show();\n        this.initListeners();\n\n        this.$loadSpinner.removeClass('hidden');\n\n        const formId = $(\"#formId\").val();\n        const data = {\n          'ruleId': id,\n          'formId': formId\n        };\n\n        Craft.postActionRequest('sprout-forms/rules/edit-rule', data, $.proxy(function(response, textStatus) {\n          this.$loadSpinner.addClass('hidden');\n\n          const statusSuccess = (textStatus === 'success');\n\n          if (statusSuccess && response.success) {\n            const callback = $.proxy(function(e) {\n              this.destroySettings();\n              this.initSettings(e);\n              this.off('parseTemplate', callback);\n            }, this);\n\n            this.on('parseTemplate', callback);\n            this.parseTemplate(response.template);\n          } else if (statusSuccess && response.error) {\n            Craft.cp.displayError(response.error);\n\n            this.hide();\n          } else {\n            Craft.cp.displayError(Craft.t('sprout-forms', 'An unknown error occurred. '));\n\n            this.hide();\n          }\n        }, this));\n      },\n\n      deleteRule: function(e) {\n        e.preventDefault();\n        const userResponse = this.confirmDeleteRule();\n\n        if (userResponse) {\n          this.destroyListeners();\n\n          const data = this.$container.serialize();\n\n          const ruleId = $(this.$container).find('input[name=\"ruleId\"]').val();\n\n          Craft.postActionRequest('sprout-forms/rules/delete-rule', data, $.proxy(function(response, textStatus) {\n            const statusSuccess = (textStatus === 'success');\n\n            if (statusSuccess && response.success) {\n\n              Craft.cp.displayNotice(Craft.t('sprout-forms', 'Rule deleted.'));\n\n              $('#sproutforms-rules-row-' + ruleId).remove();\n\n              this.initListeners();\n              this.hide();\n            } else {\n              Craft.cp.displayError(Craft.t('sprout-forms', 'Unable to delete rule.'));\n\n              this.hide();\n            }\n          }, this));\n        }\n      },\n\n      confirmDeleteRule: function() {\n        return confirm(\"Are you sure you want to delete this rule and all of it's settings?\");\n      },\n\n      /**\n       * Prevents the modal from closing if it's disabled.\n       * This fixes issues if the modal is closed when saving/deleting rule.\n       */\n      hide: function() {\n        if (!this._disabled) {\n          this.base();\n        }\n      },\n\n      /**\n       * Removes everything to do with the modal form the DOM.\n       */\n      destroy: function() {\n        this.base.destroy();\n\n        this.destroyListeners();\n        this.destroySettings();\n\n        this.$shade.remove();\n        this.$container.remove();\n\n        this.trigger('destroy');\n      }\n    },\n    {\n      /**\n       * (Static) Singleton pattern.\n       *\n       * @returns RuleModal\n       */\n      getInstance: function() {\n        if (!this._instance) {\n          this._instance = new Craft.SproutForms.RuleModal();\n        }\n\n        return this._instance;\n      }\n    });\n\n})(jQuery);\n"],"sourceRoot":""}